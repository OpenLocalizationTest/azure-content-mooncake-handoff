<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="markdown" source-language="zh-cn" target-language="en-us">
    <header>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-f2b4b1a" tool-company="Microsoft" />
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">67834fd7e1e48f031d4d395f83b898d1064c894b</xliffext:olfilehash>
      <xliffext:olfilepath xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">articles\web-sites-java-custom-upload.md</xliffext:olfilepath>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">ht</xliffext:oltranslationpriority>
      <xliffext:oltranslationtype xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">Human Translation</xliffext:oltranslationtype>
      <xliffext:olskeletonhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">b7ebb0fed2d863977dfce2473dbd67618bdd4c9a</xliffext:olskeletonhash>
      <xliffext:olxliffhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">149cd9f0f2ddd91cb01fbe011a8659d9e41dae82</xliffext:olxliffhash>
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve">
          <source>将自定义 Java Web 应用上载到 Azure</source>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>本教程介绍了如何将自定义 Java Web 应用上载到 Azure Web 应用。</source>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>将自定义 Java Web 应用上载到 Azure</source>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>本主题介绍了如何将自定义 Java Web 应用上载到 Azure。</source>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>包括适用于 Java Web 应用的信息以及特定应用程序的示例。</source>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>请注意，Azure 提供了一种使用 Azure 门户配置 UI 创建 Java Web 应用的方法，如 <bpt id="p1">[</bpt>Azure Web 应用和 Java 入门<ept id="p1">](/documentation/articles/web-sites-java-get-started)</ept>中所述。</source>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>此教程适用于无需使用 Azure 配置 UI 的方案。</source>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>配置指南</source>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>下面描述了 Azure 上的自定义 Java Web 应用所需的设置。</source>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>Java 进程使用的 HTTP 端口是动态分配的。</source>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>该进程必须使用环境变量 <ph id="ph1">`HTTP_PLATFORM_PORT`</ph> 的端口。</source>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>除单个 HTTP 侦听程序以外的所有其他侦听端口都应禁用。</source>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>在 Tomcat 中，这些端口包括 Shutdown、HTTPS 和 AJP 端口。</source>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>容器仅应针对 IPv4 流量进行配置。</source>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>需要在配置中设置应用程序的 <bpt id="p1">**</bpt>startup<ept id="p1">**</ept> 命令。</source>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>需要目录具有写入权限的应用程序应位于 Azure Web 应用的内容目录中，即 <bpt id="p1">**</bpt>D:<ph id="ph1">\\</ph>home<ept id="p1">**</ept>。</source>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>环境变量 <ph id="ph1">`HOME`</ph> 引用 D:<ph id="ph2">\\</ph>home。</source>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>您可以在 web.config 文件中根据需要设置环境变量。</source>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>web.config httpPlatform 配置</source>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>以下信息介绍了 web.config 中 <bpt id="p1">**</bpt>httpPlatform<ept id="p1">**</ept> 的格式。</source>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>arguments<ept id="p1">**</ept>（默认值=""）。<bpt id="p2">**</bpt>processPath<ept id="p2">**</ept> 设置中指定的可执行文件或脚本的参数。</source>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>示例（所示示例包含 <bpt id="p1">**</bpt>processPath<ept id="p1">**</ept>）：</source>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>processPath<ept id="p1">**</ept> - 启动侦听 HTTP 请求的进程的可执行文件或脚本的路径。</source>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>示例:</source>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>rapidFailsPerMinute<ept id="p1">**</ept>（默认值=10） 允许 <bpt id="p2">**</bpt>processPath<ept id="p2">**</ept> 中指定的进程每分钟崩溃的次数。</source>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>如果超出了此限制，则每分钟达到此限制后的剩余时间 <bpt id="p1">**</bpt>HttpPlatformHandler<ept id="p1">**</ept> 将停止启动进程。</source>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>requestTimeout<ept id="p1">**</ept>（默认值="00:02:00"） <bpt id="p2">**</bpt>HttpPlatformHandler<ept id="p2">**</ept> 等待侦听 <ph id="ph1">`%HTTP_PLATFORM_PORT%`</ph> 的进程响应的持续时间。</source>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>startupRetryCount<ept id="p1">**</ept>（默认值=10） <bpt id="p2">**</bpt>HttpPlatformHandler<ept id="p2">**</ept> 尝试启动 <bpt id="p3">**</bpt>processPath<ept id="p3">**</ept> 中指定的进程的次数。</source>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>有关详细信息，请参阅 <bpt id="p1">**</bpt>startupTimeLimit<ept id="p1">**</ept>。</source>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>startupTimeLimit<ept id="p1">**</ept>（默认值=10 秒） <bpt id="p2">**</bpt>HttpPlatformHandler<ept id="p2">**</ept> 等待可执行文件/脚本启动侦听端口的进程的持续时间。</source>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>如果超出了此时间限制，<bpt id="p1">**</bpt>HttpPlatformHandler<ept id="p1">**</ept> 将终止进程，然后尝试重新启动 <bpt id="p2">**</bpt>startupRetryCount<ept id="p2">**</ept> 次。</source>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>stdoutLogEnabled<ept id="p1">**</ept>（默认值="true"） 如果为 true，<bpt id="p2">**</bpt>processPath<ept id="p2">**</ept> 设置中指定地进程的 <bpt id="p3">**</bpt>stdout<ept id="p3">**</ept> 和 <bpt id="p4">**</bpt>stderr<ept id="p4">**</ept> 将重定向到 <bpt id="p5">**</bpt>stdoutLogFile<ept id="p5">**</ept> 中指定地文件（请参阅 <bpt id="p6">**</bpt>stdoutLogFile<ept id="p6">**</ept> 部分）。</source>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>stdoutLogFile<ept id="p1">**</ept>（默认值="d:<ph id="ph1">\\</ph>home<ph id="ph2">\\</ph>LogFiles<ph id="ph3">\\</ph>httpPlatformStdout.log"） 记录 <bpt id="p2">**</bpt>processPath<ept id="p2">**</ept> 中指定的进程的 <bpt id="p3">**</bpt>stdout<ept id="p3">**</ept> 和 <bpt id="p4">**</bpt>stderr<ept id="p4">**</ept> 的绝对文件路径。</source>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>是一个特殊的占位符，需要指定为 <bpt id="p1">**</bpt>arguments<ept id="p1">**</ept> 的一部分或 <bpt id="p2">**</bpt>httpPlatform<ept id="p2">**</ept> <bpt id="p3">**</bpt>environmentVariables<ept id="p3">**</ept> 列表的一部分。</source>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>其将会被替换为 <bpt id="p1">**</bpt>HttpPlatformHandler<ept id="p1">**</ept> 内部生成的端口，以便 <bpt id="p2">**</bpt>processPath<ept id="p2">**</ept> 指定的进程可以侦听此端口。</source>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>部署</source>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>可以通过基于 Internet Information Services (IIS) 的 Web 应用所用的方法轻松地部署基于 Java 的 Web 应用。</source>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>FTP 和 Git 都是支持的部署机制，和 Web 应用集成的 SCM 功能一样。</source>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>WebDeploy 可充当协议，但由于 Java 不是在 Visual Studio 中开发的，因此 WebDeploy 不适用于 Java Web 应用部署使用案例。</source>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>应用程序配置示例</source>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>对于以下应用程序，提供了 web.config 文件和应用程序配置作为示例，用以说明如何在 Azure Web 应用上启用 Java 应用程序。</source>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>Tomcat</source>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>尽管 Azure Web 应用提供了两个 Tomcat 变体，但仍可以上载客户特定的实例。</source>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>使用不同的 JVM 安装 Tomcat 的示例如下。</source>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>对于 Tomcat，需要更改少量配置。</source>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>需要编辑 Server.xml 并进行如下设置：</source>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>Shutdown 端口 = -1</source>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>HTTP 连接器端口 = ${port.http}</source>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>HTTP 连接器地址 = "127.0.0.1"</source>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>注释掉 HTTPS 和 AJP 连接器</source>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>也可以在 catalina.properties 文件中设置 IPv4 设置，并在其中添加 <ph id="ph1">`java.net.preferIPv4Stack=true`</ph>。</source>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>Azure Web 应用上不支持 Direct3d 调用。</source>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>若要禁用这些调用，添加以下 Java 选项使你的应用程序进行以下调用：</source>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>Jetty</source>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>和 Tomcat 一样，客户可以上载其自己的 Jetty 实例。</source>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>对于运行 Jetty 完整安装，配置应如下所示：</source>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source>应在 start.ini 中更改 Jetty 配置并设置 <ph id="ph1">`java.net.preferIPv4Stack=true`</ph>。</source>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source>Hudson</source>
        </trans-unit>
        <trans-unit id="159" translate="yes" xml:space="preserve">
          <source>我们的测试使用 Hudson 3.1.2 war 和默认 Tomcat 7.0.50 实例，但没有使用 UI 来进行设置。</source>
        </trans-unit>
        <trans-unit id="160" translate="yes" xml:space="preserve">
          <source>由于 Hudson 为软件构建工具，因此建议将其安装在可在 Web 应用上设置 <bpt id="p1">**</bpt>AlwaysOn<ept id="p1">**</ept> 标志的专用实例上。</source>
        </trans-unit>
        <trans-unit id="161" translate="yes" xml:space="preserve">
          <source>在 Web 应用的站点根目录（即 <bpt id="p1">**</bpt>d:<ph id="ph1">\\</ph>home<ph id="ph2">\\</ph>site<ph id="ph3">\\</ph>wwwroot<ept id="p1">**</ept>）中创建 <bpt id="p2">**</bpt>webapps<ept id="p2">**</ept> 目录（如果尚不存在），并将 Hudson.war 放在 <bpt id="p3">**</bpt>d:<ph id="ph4">\\</ph>home<ph id="ph5">\\</ph>site<ph id="ph6">\\</ph>wwwroot<ph id="ph7">\\</ph>webapps<ept id="p3">**</ept> 中。</source>
        </trans-unit>
        <trans-unit id="162" translate="yes" xml:space="preserve">
          <source>下载 Apache Maven 3.0.5（与 Hudson 兼容），并将其放在 <bpt id="p1">**</bpt>d:<ph id="ph1">\\</ph>home<ph id="ph2">\\</ph>site<ph id="ph3">\\</ph>wwwroot<ept id="p1">**</ept> 中。</source>
        </trans-unit>
        <trans-unit id="163" translate="yes" xml:space="preserve">
          <source>在 <bpt id="p1">**</bpt>d:<ph id="ph1">\\</ph>home<ph id="ph2">\\</ph>site<ph id="ph3">\\</ph>wwwroot<ept id="p1">**</ept> 中创建 web.config，并在其中粘贴以下内容：</source>
        </trans-unit>
        <trans-unit id="164" translate="yes" xml:space="preserve">
          <source>此时可以重新启动 Web 应用，使所做的更改生效。</source>
        </trans-unit>
        <trans-unit id="165" translate="yes" xml:space="preserve">
          <source>连接到 http://yourwebapp/hudson 以启动 Hudson。</source>
        </trans-unit>
        <trans-unit id="166" translate="yes" xml:space="preserve">
          <source>Hudson 对自身进行配置后，您将看到以下屏幕：</source>
        </trans-unit>
        <trans-unit id="167" translate="yes" xml:space="preserve">
          <source>Hudson</source>
        </trans-unit>
        <trans-unit id="168" translate="yes" xml:space="preserve">
          <source>访问 Hudson 配置页：单击“管理 Hudson”，然后单击“配置系统”。</source>
        </trans-unit>
        <trans-unit id="169" translate="yes" xml:space="preserve">
          <source>如下所示配置 JDK：</source>
        </trans-unit>
        <trans-unit id="170" translate="yes" xml:space="preserve">
          <source>Hudson 配置</source>
        </trans-unit>
        <trans-unit id="171" translate="yes" xml:space="preserve">
          <source>如下所示配置 Maven：</source>
        </trans-unit>
        <trans-unit id="172" translate="yes" xml:space="preserve">
          <source>Maven 配置</source>
        </trans-unit>
        <trans-unit id="173" translate="yes" xml:space="preserve">
          <source>保存设置。</source>
        </trans-unit>
        <trans-unit id="174" translate="yes" xml:space="preserve">
          <source>Hudson 现在即已配置好，并可供使用。</source>
        </trans-unit>
        <trans-unit id="175" translate="yes" xml:space="preserve">
          <source>有关 Hudson 的更多信息，请参阅 <bpt id="p1">[</bpt>http://hudson-ci.org<ept id="p1">](http://hudson-ci.org)</ept>。</source>
        </trans-unit>
        <trans-unit id="176" translate="yes" xml:space="preserve">
          <source>Liferay</source>
        </trans-unit>
        <trans-unit id="177" translate="yes" xml:space="preserve">
          <source>Azure Web 应用支持 Liferay。</source>
        </trans-unit>
        <trans-unit id="178" translate="yes" xml:space="preserve">
          <source>由于 Liferay 可能需要大量内存，因此站点需要在可以提供足够内存的中型或大型专用工作机上运行。</source>
        </trans-unit>
        <trans-unit id="179" translate="yes" xml:space="preserve">
          <source>Liferay 也需要花数分钟才能启动。</source>
        </trans-unit>
        <trans-unit id="180" translate="yes" xml:space="preserve">
          <source>鉴于上述原因，建议你将站点设置为“始终打开”。</source>
        </trans-unit>
        <trans-unit id="181" translate="yes" xml:space="preserve">
          <source>使用与 Tomcat 捆绑的 Liferay 6.1.2 Community Edition GA3 时，下载 Liferay 后将编辑以下文件：</source>
        </trans-unit>
        <trans-unit id="182" translate="yes" xml:space="preserve">
          <source>Server.xml</source>
        </trans-unit>
        <trans-unit id="183" translate="yes" xml:space="preserve">
          <source>将 Shutdown 端口更改为 -1。</source>
        </trans-unit>
        <trans-unit id="184" translate="yes" xml:space="preserve">
          <source>将 HTTP 连接器更改为</source>
        </trans-unit>
        <trans-unit id="185" translate="yes" xml:space="preserve">
          <source>注释掉 AJP 连接器。</source>
        </trans-unit>
        <trans-unit id="186" translate="yes" xml:space="preserve">
          <source>在 <bpt id="p1">**</bpt>liferay<ph id="ph1">\\</ph>tomcat-7.0.40<ph id="ph2">\\</ph>webapps<ph id="ph3">\\</ph>ROOT<ph id="ph4">\\</ph>WEB-INF<ph id="ph5">\\</ph>classes<ept id="p1">**</ept> 文件夹中，创建文件 <bpt id="p2">**</bpt>portal-ext.properties<ept id="p2">**</ept>。</source>
        </trans-unit>
        <trans-unit id="187" translate="yes" xml:space="preserve">
          <source>此文件应包含一行如下所示的内容：</source>
        </trans-unit>
        <trans-unit id="188" translate="yes" xml:space="preserve">
          <source>在 tomcat-7.0.40 文件夹所在的目录级别中，创建包含以下内容的文件 <bpt id="p1">**</bpt>web.config<ept id="p1">**</ept>：</source>
        </trans-unit>
        <trans-unit id="189" translate="yes" xml:space="preserve">
          <source>在 <bpt id="p1">**</bpt>httpPlatform<ept id="p1">**</ept> 块中，将 <bpt id="p2">**</bpt>requestTimeout<ept id="p2">**</ept> 设置为“00:10:00”。</source>
        </trans-unit>
        <trans-unit id="190" translate="yes" xml:space="preserve">
          <source>此时间可以减少，但随后在引导 Liferay 时您可能会看到超时错误。</source>
        </trans-unit>
        <trans-unit id="191" translate="yes" xml:space="preserve">
          <source>如果更改此值，也应该修改 tomcat server.xml 中的<bpt id="p1">**</bpt>connectionTimeout<ept id="p1">**</ept>。</source>
        </trans-unit>
        <trans-unit id="192" translate="yes" xml:space="preserve">
          <source>值得注意的是，JRE<ph id="ph1">\_</ph>HOME 环境变量将在上述 web.config 中指定为指向 64 位 JDK。</source>
        </trans-unit>
        <trans-unit id="193" translate="yes" xml:space="preserve">
          <source>默认为 32 位，但由于 Liferay 可能需要大量内存，因此建议使用 64 位 JDK。</source>
        </trans-unit>
        <trans-unit id="194" translate="yes" xml:space="preserve">
          <source>做完上述更改后，重新启动运行 Liferay 的 Web 应用，然后打开 http://yourwebapp。</source>
        </trans-unit>
        <trans-unit id="195" translate="yes" xml:space="preserve">
          <source>可从 Web 应用根目录访问 Liferay 门户。</source>
        </trans-unit>
        <trans-unit id="196" translate="yes" xml:space="preserve">
          <source>有关 Liferay 的详细信息，请参阅 <bpt id="p1">[</bpt>http://www.liferay.com<ept id="p1">](http://www.liferay.com)</ept>。</source>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>