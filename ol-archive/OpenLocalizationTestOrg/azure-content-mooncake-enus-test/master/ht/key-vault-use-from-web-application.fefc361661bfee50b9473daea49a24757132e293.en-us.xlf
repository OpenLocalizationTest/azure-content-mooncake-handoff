<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="md" source-language="en-US" target-language="en-us">
    <header>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">ht</xliffext:oltranslationpriority>
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">dcfc0770760947b25693dce5d06d8816437e0e3b</xliffext:olfilehash>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-02a95cf" tool-company="Microsoft" />
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve">
          <source>从 Web 应用程序使用 Azure 密钥保管库 | Azure</source>
          <target state="new">从 Web 应用程序使用 Azure 密钥保管库 | Azure</target>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>本教程帮助你了解如何从 Web 应用程序使用 Azure 密钥保管库。</source>
          <target state="new">本教程帮助你了解如何从 Web 应用程序使用 Azure 密钥保管库。</target>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>从 Web 应用程序使用 Azure 密钥保管库</source>
          <target state="new">从 Web 应用程序使用 Azure 密钥保管库</target>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>介绍</source>
          <target state="new">介绍</target>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>本教程帮助你了解如何从 Azure 中的 Web 应用程序使用 Azure 密钥保管库。其中将会引导你访问 Azure 密钥保管库中的机密，以便可以在 Web 应用程序中使用该机密。</source>
          <target state="new">本教程帮助你了解如何从 Azure 中的 Web 应用程序使用 Azure 密钥保管库。其中将会引导你访问 Azure 密钥保管库中的机密，以便可以在 Web 应用程序中使用该机密。</target>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>估计完成时间：<ept id="p1">**</ept>15 分钟</source>
          <target state="new"><bpt id="p1">**</bpt>估计完成时间：<ept id="p1">**</ept>15 分钟</target>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>有关 Azure 密钥保管库的概述信息，请参阅<bpt id="p1">[</bpt>什么是 Azure 密钥保管库？<ept id="p1">](/documentation/articles/key-vault-whatis)</ept></source>
          <target state="new">有关 Azure 密钥保管库的概述信息，请参阅<bpt id="p1">[</bpt>什么是 Azure 密钥保管库？<ept id="p1">](/documentation/articles/key-vault-whatis)</ept></target>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>先决条件</source>
          <target state="new">先决条件</target>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>若要完成本教程，你必须准备好以下各项：</source>
          <target state="new">若要完成本教程，你必须准备好以下各项：</target>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>Azure 密钥保管库中的机密的 URI</source>
          <target state="new">Azure 密钥保管库中的机密的 URI</target>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>已在 Azure Active Directory 中注册的、有权访问你的密钥保管库的 Web 应用程序的客户端 ID 和客户端密码</source>
          <target state="new">已在 Azure Active Directory 中注册的、有权访问你的密钥保管库的 Web 应用程序的客户端 ID 和客户端密码</target>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>Web 应用程序。我们将演示针对 Azure 中作为 Web 应用程序部署的 ASP.NET MVC 应用程序的步骤。</source>
          <target state="new">Web 应用程序。我们将演示针对 Azure 中作为 Web 应用程序部署的 ASP.NET MVC 应用程序的步骤。</target>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph>你必须已完成 <bpt id="p1">[</bpt>Azure 密钥保管库入门<ept id="p1">](/documentation/articles/key-vault-get-started)</ept>中列出的适用于本教程的步骤，以便获取 Web 应用程序的机密、客户端 ID 和客户端密钥的 URI。</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph>你必须已完成 <bpt id="p1">[</bpt>Azure 密钥保管库入门<ept id="p1">](/documentation/articles/key-vault-get-started)</ept>中列出的适用于本教程的步骤，以便获取 Web 应用程序的机密、客户端 ID 和客户端密钥的 URI。</target>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>要访问密钥保管库的 Web 应用程序已在 Azure Active Directory 中注册，因此有权访问你的密钥保管库。如果这不是这样，请返回入门教程中的“注册应用程序”，并重复列出的步骤。</source>
          <target state="new">要访问密钥保管库的 Web 应用程序已在 Azure Active Directory 中注册，因此有权访问你的密钥保管库。如果这不是这样，请返回入门教程中的“注册应用程序”，并重复列出的步骤。</target>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>本教程面向 Web 开发人员，他们已经了解有关在 Azure 上创建 Web 应用程序的基本知识。有关 Azure Web Sites 的详细信息，请参阅 <bpt id="p1">[</bpt>Web Sites 概述<ept id="p1">](/documentation/services/web-sites)</ept>。</source>
          <target state="new">本教程面向 Web 开发人员，他们已经了解有关在 Azure 上创建 Web 应用程序的基本知识。有关 Azure Web Sites 的详细信息，请参阅 <bpt id="p1">[</bpt>Web Sites 概述<ept id="p1">](/documentation/services/web-sites)</ept>。</target>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;a id="packages"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>添加 NuGet 包</source>
          <target state="new"><ph id="ph1">&lt;a id="packages"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>添加 NuGet 包</target>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>需要在 Web 应用程序上安装三个包。</source>
          <target state="new">需要在 Web 应用程序上安装三个包。</target>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>Active Directory 身份验证库 - 包含用来与 Azure Active Directory 交互以及管理用户标识的方法</source>
          <target state="new">Active Directory 身份验证库 - 包含用来与 Azure Active Directory 交互以及管理用户标识的方法</target>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>Azure 密钥保管库库 - 包含用来与 Azure 密钥保管库交互的方法</source>
          <target state="new">Azure 密钥保管库库 - 包含用来与 Azure 密钥保管库交互的方法</target>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>可以在 Package Manager Console 中使用 Install-Package 命令安装所有这三个包。</source>
          <target state="new">可以在 Package Manager Console 中使用 Install-Package 命令安装所有这三个包。</target>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;a id="webconfig"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>修改 Web.Config</source>
          <target state="new"><ph id="ph1">&lt;a id="webconfig"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>修改 Web.Config</target>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>需要按如下所示将三个应用程序设置添加到 web.config 文件。</source>
          <target state="new">需要按如下所示将三个应用程序设置添加到 web.config 文件。</target>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>如果你不打算将应用程序作作为 Azure Web 应用程序托管，则应在 web.config 中添加实际的客户端 Id、客户端密钥和机密 URI 值。否则，请将这些虚构值，因为我们将在 Azure 门户中添加实际值以提高安全级别。</source>
          <target state="new">如果你不打算将应用程序作作为 Azure Web 应用程序托管，则应在 web.config 中添加实际的客户端 Id、客户端密钥和机密 URI 值。否则，请将这些虚构值，因为我们将在 Azure 门户中添加实际值以提高安全级别。</target>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;a id="gettoken"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>添加方法以获取访问令牌</source>
          <target state="new"><ph id="ph1">&lt;a id="gettoken"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>添加方法以获取访问令牌</target>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>若要使用密钥保管库 API，你需要一个访问令牌。密钥保管库客户端将处理对密钥保管库 API 的调用，但你需要为该 API 提供一个用于获取访问令牌的函数。</source>
          <target state="new">若要使用密钥保管库 API，你需要一个访问令牌。密钥保管库客户端将处理对密钥保管库 API 的调用，但你需要为该 API 提供一个用于获取访问令牌的函数。</target>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>以下代码可从 Azure Active Directory 获取访问令牌。可将此代码添加在应用程序中的任意位置。我想要添加一个 Utils 或 EncryptionHelper 类。</source>
          <target state="new">以下代码可从 Azure Active Directory 获取访问令牌。可将此代码添加在应用程序中的任意位置。我想要添加一个 Utils 或 EncryptionHelper 类。</target>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph>使用客户端 ID 和客户端密码是对 Azure AD 应用程序进行身份验证的最简单方法。并且在 web 应用程序中使用它可以实现职责分离，并更好地控制密钥管理。但它不依赖于将客户端密码放入配置设置中，对于某些人来说这可能就像将要保护的机密放入配置设置中一样具有风险。有关如何使用客户端 ID 和证书（而不是客户端 ID 和客户端密码）对 Azure AD 应用程序进行身份验证的讨论，请参阅下文。</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph>使用客户端 ID 和客户端密码是对 Azure AD 应用程序进行身份验证的最简单方法。并且在 web 应用程序中使用它可以实现职责分离，并更好地控制密钥管理。但它不依赖于将客户端密码放入配置设置中，对于某些人来说这可能就像将要保护的机密放入配置设置中一样具有风险。有关如何使用客户端 ID 和证书（而不是客户端 ID 和客户端密码）对 Azure AD 应用程序进行身份验证的讨论，请参阅下文。</target>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;a id="appstart"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>在 Application Start 中检索机密</source>
          <target state="new"><ph id="ph1">&lt;a id="appstart"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>在 Application Start 中检索机密</target>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>现在，我们需要添加代码来调用密钥保管库 API 并检索机密。以下代码可添加到任何位置，前提是在使用之前调用它。我已将此代码放在 Global.asax 中的 Application Start 事件内，这样，在启动应用程序时，该代码将运行一次，并使机密可用于应用程序。</source>
          <target state="new">现在，我们需要添加代码来调用密钥保管库 API 并检索机密。以下代码可添加到任何位置，前提是在使用之前调用它。我已将此代码放在 Global.asax 中的 Application Start 事件内，这样，在启动应用程序时，该代码将运行一次，并使机密可用于应用程序。</target>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>使用证书（而不是客户端密码）进行身份验证</source>
          <target state="new">使用证书（而不是客户端密码）进行身份验证</target>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>另一种对 Azure AD 应用程序进行身份验证的方法是使用客户端 ID 和证书（而不是客户端 ID 和客户端密码）。下面是在 Azure Web 应用中使用证书的步骤：</source>
          <target state="new">另一种对 Azure AD 应用程序进行身份验证的方法是使用客户端 ID 和证书（而不是客户端 ID 和客户端密码）。下面是在 Azure Web 应用中使用证书的步骤：</target>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>获取或创建证书</source>
          <target state="new">获取或创建证书</target>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>将证书与 Azure AD 应用程序相关联</source>
          <target state="new">将证书与 Azure AD 应用程序相关联</target>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>在 Web 应用中添加代码以使用证书</source>
          <target state="new">在 Web 应用中添加代码以使用证书</target>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>将证书添加到 Web 应用</source>
          <target state="new">将证书添加到 Web 应用</target>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>获取或创建证书<ept id="p1">**</ept> 出于我们的目的，我们将生成测试证书。下面是几个可在开发人员命令提示符下使用以创建证书的命令。将目录更改为要在其中创建证书文件的位置。</source>
          <target state="new"><bpt id="p1">**</bpt>获取或创建证书<ept id="p1">**</ept> 出于我们的目的，我们将生成测试证书。下面是几个可在开发人员命令提示符下使用以创建证书的命令。将目录更改为要在其中创建证书文件的位置。</target>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>记下 .pfx 的结束日期和密码（在此示例中为：07/31/2016 和 test123）。稍后你将需要它们。</source>
          <target state="new">记下 .pfx 的结束日期和密码（在此示例中为：07/31/2016 和 test123）。稍后你将需要它们。</target>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>有关创建测试证书的详细信息，请参阅<bpt id="p1">[</bpt>如何：创建自己的测试证书<ept id="p1">](https://msdn.microsoft.com/zh-cn/library/ff699202.aspx)</ept></source>
          <target state="new">有关创建测试证书的详细信息，请参阅<bpt id="p1">[</bpt>如何：创建自己的测试证书<ept id="p1">](https://msdn.microsoft.com/zh-cn/library/ff699202.aspx)</ept></target>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>将证书与 Azure AD 应用程序相关联<ept id="p1">**</ept> 既然你拥有一个证书，你需要将其与 Azure AD 应用程序相关联。但当前 Azure 管理门户不支持此操作。你需要改用 Powershell。以下是你需要运行的命令：</source>
          <target state="new"><bpt id="p1">**</bpt>将证书与 Azure AD 应用程序相关联<ept id="p1">**</ept> 既然你拥有一个证书，你需要将其与 Azure AD 应用程序相关联。但当前 Azure 管理门户不支持此操作。你需要改用 Powershell。以下是你需要运行的命令：</target>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>运行这些命令后，你可以在 Azure AD 中看到该应用程序。如果你最初未看到该应用程序，可搜索“我的公司拥有的应用程序”，而不是“我的公司使用的应用程序”。</source>
          <target state="new">运行这些命令后，你可以在 Azure AD 中看到该应用程序。如果你最初未看到该应用程序，可搜索“我的公司拥有的应用程序”，而不是“我的公司使用的应用程序”。</target>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>若要了解有关 Azure AD 应用程序对象和 ServicePrincipal 对象的详细信息，请参阅<bpt id="p1">[</bpt>应用程序对象和服务主体对象<ept id="p1">](/documentation/articles/active-directory-application-objects)</ept></source>
          <target state="new">若要了解有关 Azure AD 应用程序对象和 ServicePrincipal 对象的详细信息，请参阅<bpt id="p1">[</bpt>应用程序对象和服务主体对象<ept id="p1">](/documentation/articles/active-directory-application-objects)</ept></target>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>在 Web 应用中添加代码以使用证书<ept id="p1">**</ept> 现在，我们将在 Web 应用中添加代码以访问证书并使用它进行身份验证。</source>
          <target state="new"><bpt id="p1">**</bpt>在 Web 应用中添加代码以使用证书<ept id="p1">**</ept> 现在，我们将在 Web 应用中添加代码以访问证书并使用它进行身份验证。</target>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>首先是用于访问证书的代码。</source>
          <target state="new">首先是用于访问证书的代码。</target>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>请注意，StoreLocation 是 CurrentUser，而不是 LocalMachine。并且，我们为 Find 方法提供“false”，因为我们使用的是测试证书。</source>
          <target state="new">请注意，StoreLocation 是 CurrentUser，而不是 LocalMachine。并且，我们为 Find 方法提供“false”，因为我们使用的是测试证书。</target>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>其次是使用 CertificateHelper 并创建 ClientAssertionCertificate 的代码，这是身份验证所需的。</source>
          <target state="new">其次是使用 CertificateHelper 并创建 ClientAssertionCertificate 的代码，这是身份验证所需的。</target>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>以下是新代码，用于获取访问令牌。这将替换上面的 GetToken 方法。为方便起见，我为它起了不同名称。</source>
          <target state="new">以下是新代码，用于获取访问令牌。这将替换上面的 GetToken 方法。为方便起见，我为它起了不同名称。</target>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>为了便于使用，我已将所有这些代码放到我的 Web 应用项目的 Utils 类中。</source>
          <target state="new">为了便于使用，我已将所有这些代码放到我的 Web 应用项目的 Utils 类中。</target>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>最后的代码更改是在 Application\_Start 方法中。首先，我们需要调用 GetCert() 方法以加载 ClientAssertionCertificate。然后，我们将更改在创建新的 KeyVaultClient 时提供的回调方法。请注意，这将替换上面使用的代码。</source>
          <target state="new">最后的代码更改是在 Application\_Start 方法中。首先，我们需要调用 GetCert() 方法以加载 ClientAssertionCertificate。然后，我们将更改在创建新的 KeyVaultClient 时提供的回调方法。请注意，这将替换上面使用的代码。</target>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>将证书添加到 Web 应用<ept id="p1">**</ept> 将证书添加到 Web 应用是一个简单的分为两步的过程。首先，转到 Azure 门户并导航到你的 Web 应用。在你的 Web 应用的“设置”边栏选项卡中，单击“自定义域和 SSL”所对应的条目。在打开的边栏选项卡中，你将能够上载上面创建的证书 KVWebApp.pfx，请确保记住 pfx 的密码。</source>
          <target state="new"><bpt id="p1">**</bpt>将证书添加到 Web 应用<ept id="p1">**</ept> 将证书添加到 Web 应用是一个简单的分为两步的过程。首先，转到 Azure 门户并导航到你的 Web 应用。在你的 Web 应用的“设置”边栏选项卡中，单击“自定义域和 SSL”所对应的条目。在打开的边栏选项卡中，你将能够上载上面创建的证书 KVWebApp.pfx，请确保记住 pfx 的密码。</target>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>你需要执行的最后一项操作是将应用程序设置添加到 Web 应用中，该设置名为 WEBSITE\_LOAD\_CERTIFICATES，值为 *。这将确保加载所有证书。如果你只想加载已上载的证书，则可以输入这些证书的指纹的逗号分隔列表。</source>
          <target state="new">你需要执行的最后一项操作是将应用程序设置添加到 Web 应用中，该设置名为 WEBSITE\_LOAD\_CERTIFICATES，值为 *。这将确保加载所有证书。如果你只想加载已上载的证书，则可以输入这些证书的指纹的逗号分隔列表。</target>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>若要了解有关将证书添加到 Web 应用的详细信息，请参阅<bpt id="p1">[</bpt>在 Azure Web 应用应用程序中使用证书<ept id="p1">](https://azure.microsoft.com/blog/2014/10/27/using-certificates-in-azure-websites-applications/)</ept></source>
          <target state="new">若要了解有关将证书添加到 Web 应用的详细信息，请参阅<bpt id="p1">[</bpt>在 Azure Web 应用应用程序中使用证书<ept id="p1">](https://azure.microsoft.com/blog/2014/10/27/using-certificates-in-azure-websites-applications/)</ept></target>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;a id="next"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>后续步骤</source>
          <target state="new"><ph id="ph1">&lt;a id="next"&gt;</ph><ph id="ph2">&lt;/a&gt;</ph>后续步骤</target>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>有关编程参考，请参阅 <bpt id="p1">[</bpt>Azure 密钥保管库 C# 客户端 API 参考<ept id="p1">](https://msdn.microsoft.com/zh-cn/library/azure/dn903628.aspx)</ept>。</source>
          <target state="new">有关编程参考，请参阅 <bpt id="p1">[</bpt>Azure 密钥保管库 C# 客户端 API 参考<ept id="p1">](https://msdn.microsoft.com/zh-cn/library/azure/dn903628.aspx)</ept>。</target>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>