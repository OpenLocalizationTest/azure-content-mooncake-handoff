{
  "nodes": [
    {
      "content": "在 Azure 中配置 Web 应用",
      "pos": [
        28,
        46
      ]
    },
    {
      "content": "如何在 Azure 中配置 Web 应用",
      "pos": [
        66,
        86
      ]
    },
    {
      "content": "如何配置 Web 应用",
      "pos": [
        314,
        325
      ]
    },
    {
      "content": "在 Azure 管理门户中，你可以更改 Web 应用的配置选项并链接到其他 Azure 资源，如数据库。",
      "pos": [
        328,
        380
      ]
    },
    {
      "content": "目录",
      "pos": [
        385,
        387
      ]
    },
    {
      "content": "如何更改 Web 应用的配置选项",
      "pos": [
        394,
        410
      ]
    },
    {
      "content": "如何配置 Web 应用以使用 SQL 数据库",
      "pos": [
        435,
        457
      ]
    },
    {
      "content": "如何配置 Web 应用以使用 MySQL 数据库",
      "pos": [
        479,
        503
      ]
    },
    {
      "content": "如何配置自定义域名",
      "pos": [
        527,
        536
      ]
    },
    {
      "content": "如何配置 Web 应用以使用 SSL",
      "pos": [
        555,
        573
      ]
    },
    {
      "content": "后续步骤",
      "pos": [
        595,
        599
      ]
    },
    {
      "pos": [
        613,
        661
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtochangeconfig\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>如何更改 Web 应用的配置选项"
    },
    {
      "content": "若要设置 Web 应用的配置选项，请执行以下操作：",
      "pos": [
        724,
        749
      ]
    },
    {
      "pos": [
        754,
        810
      ],
      "content": "在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](https://manage.windowsazure.cn/)</ept>中，打开 Web 应用的管理页。"
    },
    {
      "content": "单击“配置”选项卡。",
      "pos": [
        814,
        824
      ]
    },
    {
      "content": "“配置”选项卡包含以下部分：",
      "pos": [
        826,
        840
      ]
    },
    {
      "content": "常规",
      "pos": [
        846,
        848
      ]
    },
    {
      "pos": [
        850,
        884
      ],
      "content": "<bpt id=\"p1\">**</bpt>框架版本<ept id=\"p1\">**</ept>。如果你的应用程序使用下列任一框架，请设置这些选项："
    },
    {
      "pos": [
        888,
        931
      ],
      "content": "<bpt id=\"p1\">**</bpt>.NET Framework 版本<ept id=\"p1\">**</ept>：设置 .NET Framework 版本。"
    },
    {
      "pos": [
        935,
        975
      ],
      "content": "<bpt id=\"p1\">**</bpt>PHP 版本<ept id=\"p1\">**</ept>：设置 PHP 版本，或设为“关闭”****以禁用 PHP。"
    },
    {
      "pos": [
        978,
        1022
      ],
      "content": "<bpt id=\"p1\">**</bpt>Java 版本<ept id=\"p1\">**</ept>：选择显示的版本以启用 Java，或设为“关闭”以禁用 Java。"
    },
    {
      "content": "如果你启用 Java，通过“Web 容器”选项，你可以选择 Tomcat 版本或是 Jetty 版本。",
      "pos": [
        1026,
        1077
      ]
    },
    {
      "pos": [
        1080,
        1125
      ],
      "content": "<bpt id=\"p1\">**</bpt>Python 版本<ept id=\"p1\">**</ept>：选择 Python 版本，或设为“关闭”以禁用 Python。"
    },
    {
      "content": "出于技术原因，为你的 Web 应用启用 Java 会禁用 .NET、PHP 和 Python 选项。",
      "pos": [
        1131,
        1181
      ]
    },
    {
      "pos": [
        1185,
        1363
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>托管管道模式<ph id=\"ph2\">&lt;/strong&gt;</ph>。设置 IIS <bpt id=\"p1\">[</bpt>管道模式<ept id=\"p1\">](http://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture#Application)</ept>。请保持设置为“集成(默认)”，除非你的旧版 Web 应用需要旧版 IIS。"
    },
    {
      "pos": [
        1367,
        1459
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>平台<ph id=\"ph2\">&lt;/strong&gt;</ph>。选择是要在 32 位还是 64 位环境中运行应用程序。64 位环境需要“基本”或“标准”模式。“免费”和“共享”模式始终在 32 位环境下运行。"
    },
    {
      "pos": [
        1463,
        1652
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>Web Socket<ph id=\"ph2\">&lt;/strong&gt;</ph>。设为“打开”以启用 WebSocket 协议；例如，如果你的 Web 应用使用 <bpt id=\"p1\">[</bpt>ASP.NET SignalR<ept id=\"p1\">](http://www.asp.net/signalr)</ept> 或 <bpt id=\"p2\">[</bpt>socket.io<ept id=\"p2\">](/documentation/articles/web-sites-nodejs-chat-app-socketio/)</ept>。"
    },
    {
      "pos": [
        1656,
        1813
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>始终可用<ph id=\"ph2\">&lt;/strong&gt;</ph>。默认情况下， Web 应用如果已处于空闲状态相当一段时间，则是未加载的状态。这样可以让系统节省资源。在“基本”或“标准”模式下，你可以启用“始终可用”，以始终保持加载站点。如果你的站点运行连续的 Web 作业，则应启用“始终可用”，否则这些 Web 作业可能无法可靠运行"
    },
    {
      "pos": [
        1817,
        2031
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>在 Visual Studio Online 中编辑<ph id=\"ph2\">&lt;/strong&gt;</ph>。通过 Visual Studio Online 启用实时代码编辑。如果启用，“仪表板”选项卡的<ph id=\"ph3\">&lt;strong&gt;</ph><ph id=\"ph4\">&lt;/strong&gt;</ph>“速览”部分下则会显示名为“在 Visual Studio Online 编辑”<ph id=\"ph5\">&lt;strong&gt;</ph><ph id=\"ph6\">&lt;/strong&gt;</ph>的链接。单击此连结可直接联机编辑 Web 应用。如果你需要进行身份验证，可以使用你的基本部署凭据。"
    },
    {
      "pos": [
        2038,
        2066
      ],
      "content": "[AZURE.NOTE]\n此功能还在预览中。",
      "leadings": [
        "",
        "    > "
      ],
      "nodes": [
        {
          "content": "此功能还在预览中。",
          "pos": [
            13,
            22
          ]
        }
      ]
    },
    {
      "content": "注意：如果通过源代码管理你启用部署，则部署可能会覆盖你在 Visual Studio Online 编辑器中进行的更改。",
      "pos": [
        2068,
        2128
      ]
    },
    {
      "content": "证书",
      "pos": [
        2135,
        2137
      ]
    },
    {
      "pos": [
        2139,
        2266
      ],
      "content": "在“基本”或“标准”模式下，你可为自定义域上载 SSL 证书。有关详细信息，请参阅<bpt id=\"p1\">[</bpt>为 Azure Web 应用启用 HTTPS<ept id=\"p1\">](/documentation/articles/web-sites-configure-ssl-certificate)</ept>。"
    },
    {
      "content": "此处列出已上载的证书。在你上载某一证书后，可以将其分配给你的订阅和区域中的任何 Web 应用。通配符证书可用于接受此证书的域中的任何站点。仅当该证书不具有有效绑定关系时，才能删除证书。",
      "pos": [
        2268,
        2360
      ]
    },
    {
      "content": "域名",
      "pos": [
        2366,
        2368
      ]
    },
    {
      "pos": [
        2370,
        2476
      ],
      "content": "查看或添加 Web 应用的其他域名。有关详细信息，请参阅<bpt id=\"p1\">[</bpt>为 Azure Web 应用配置自定义域名<ept id=\"p1\">](/documentation/articles/web-sites-custom-domain-name)</ept>。"
    },
    {
      "content": "SSL 绑定",
      "pos": [
        2482,
        2488
      ]
    },
    {
      "pos": [
        2490,
        2611
      ],
      "content": "如果已上载 SSL 证书，可以将其绑定到自定义域名。有关详细信息，请参阅<bpt id=\"p1\">[</bpt>为 Azure Web 应用启用 HTTPS<ept id=\"p1\">](/documentation/articles/web-sites-configure-ssl-certificate)</ept>"
    },
    {
      "content": "部署",
      "pos": [
        2617,
        2619
      ]
    },
    {
      "content": "只有在你已经从源代码管理启用了部署后，此部分才出现。使用这些设置配置部署。",
      "pos": [
        2621,
        2658
      ]
    },
    {
      "pos": [
        2662,
        2738
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>Git URL<ph id=\"ph2\">&lt;/strong&gt;</ph>。如果你已为 Azure Web 应用创建 Git 存储库，则 Git URL 就是推送内容的 URL。"
    },
    {
      "pos": [
        2741,
        2832
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>部署触发器 URL<ph id=\"ph2\">&lt;/strong&gt;</ph>。可以在 GitHub、CodePlex、Bitbucket 或其他存储库上设置此 URL，将提交操作推送到存储库时就能触发部署。"
    },
    {
      "pos": [
        2835,
        2873
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>要部署的分支<ph id=\"ph2\">&lt;/strong&gt;</ph>。指定推送内容时要部署的分支。"
    },
    {
      "content": "若要通过源代码管理设置部署，请查看“仪表板”选项卡，然后单击“通过源代码管理设置部署”。",
      "pos": [
        2875,
        2919
      ]
    },
    {
      "content": "应用程序诊断",
      "pos": [
        2925,
        2931
      ]
    },
    {
      "content": "从支持日志记录的 Web 应用写入诊断日志的选项：",
      "pos": [
        2933,
        2958
      ]
    },
    {
      "pos": [
        2962,
        3046
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>文件系统<ph id=\"ph2\">&lt;/strong&gt;</ph>。将日志写入 Web 应用的文件系统。文件系统日志记录将持续 12 小时。你可以从 Web 应用的 FTP 共享访问这些日志。"
    },
    {
      "pos": [
        3049,
        3116
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>表存储<ph id=\"ph2\">&lt;/strong&gt;</ph>。将日志写入 Azure 表存储。该存储没有时限，除非你禁用日志记录，否则会一直启用日志记录。"
    },
    {
      "pos": [
        3120,
        3195
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>Blob 存储<ph id=\"ph2\">&lt;/strong&gt;</ph>。将日志写入 Azure Blob 存储。该存储没有时限，除非你禁用日志记录，否则会一直启用日志记录。"
    },
    {
      "pos": [
        3197,
        3263
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>日志记录级别<ph id=\"ph2\">&lt;/strong&gt;</ph>。启用日志记录时，此选项指定要记录的信息量（“错误”、“警告”、“信息”或“详细”）。"
    },
    {
      "pos": [
        3265,
        3299
      ],
      "content": "<bpt id=\"p1\">**</bpt>管理表存储<ept id=\"p1\">**</ept>。启用表存储时，单击此按钮可设置存储帐户和表名称。"
    },
    {
      "pos": [
        3301,
        3353
      ],
      "content": "<bpt id=\"p1\">**</bpt>管理 blob 存储。<ept id=\"p1\">**</ept> 启用 Blob 存储时，单击此按钮可设置存储帐户和 blob 存储名称。"
    },
    {
      "content": "应用程序诊断",
      "pos": [
        3359,
        3365
      ]
    },
    {
      "content": "用于收集 Web 应用诊断信息的选项。",
      "pos": [
        3367,
        3386
      ]
    },
    {
      "pos": [
        3388,
        3482
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>Web 服务器日志记录<ph id=\"ph2\">&lt;/strong&gt;</ph>。启用 Web 服务器日志记录。日志以 W3C 扩展日志文件格式保存。可将日志保存到 Azure 存储空间或 Web 应用文件系统。"
    },
    {
      "content": "如果你选择“文件系统”，日志会保存到“仪表板”页上“FTP 诊断日志”下列出的 FTP 站点。",
      "pos": [
        3487,
        3534
      ]
    },
    {
      "content": "如果你选择“文件系统”，请使用“配额”框设置日志文件的最大磁盘空间量。空间量最小为 25MB，最大为 100MB。默认值为 35MB.。在达到了配额后，最旧的文件将被最新的文件依次覆盖。如果你需要保留超过 100MB 的历史记录，请使用 Azure 存储空间，它的存储容量更大。",
      "pos": [
        3537,
        3676
      ]
    },
    {
      "content": "或者，单击“设置保留”，以在一段时间后自动删除文件。默认情况下，永不删除日志。",
      "pos": [
        3679,
        3718
      ]
    },
    {
      "pos": [
        3723,
        3854
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>详细的错误消息<ph id=\"ph2\">&lt;/strong&gt;</ph>。如果启用，详细的错误消息会另存为 .htm 文件。若要查看文件，请转到“仪表板”页上“FTP 诊断日志”下列出的 FTP 站点。文件保存在 FTP 站点中的 /LogFiles/DetailedErrors 下。"
    },
    {
      "pos": [
        3856,
        4058
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>未能请求跟踪<ph id=\"ph2\">&lt;/strong&gt;</ph>。如果启用，失败的请求将记录到 XML 文件。若要查看文件，请转到“仪表板”页上“FTP 诊断日志”下列出的 FTP 站点。） 这些文件保存在 /LogFiles/W3SVCxxx 下，其中 xxx 是唯一标识符。此文件夹包含一个 XSL 文件和一个或多个 XML 文件。请务必下载 XSL 文件，因为 XSL 文件提供格式化和筛选 XML 文件内容的功能。"
    },
    {
      "pos": [
        4060,
        4158
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>远程调试<ph id=\"ph2\">&lt;/strong&gt;</ph> 启用远程调试。如果启用，你可以使用 Visual Studio 中的远程调试器直接连接到 Azure Web 应用。远程调试将保持启用状态 48 小时。"
    },
    {
      "pos": [
        4160,
        4196
      ],
      "content": "<bpt id=\"p1\">**</bpt>注意<ept id=\"p1\">**</ept>：远程调试不适用于长度超过 20 个字符的站点名称或用户名。"
    },
    {
      "content": "开发人员分析",
      "pos": [
        4203,
        4209
      ]
    },
    {
      "content": "选择“加载项”可从列表中选择分析外接程序，目前 Azure 中国上不支持 Azure 应用商店。选择“自定义”可从列表中选择 New Relic 之类的分析提供程序。如果你使用某一自定义提供程序，则必须在“提供程序密钥”框中输入许可证密钥。",
      "pos": [
        4211,
        4331
      ]
    },
    {
      "content": "应用设置",
      "pos": [
        4337,
        4341
      ]
    },
    {
      "content": "你的 Web 应用在启动时将加载的名称/值对。",
      "pos": [
        4343,
        4366
      ]
    },
    {
      "content": "对于 .NET Web 应用，这些设置将在运行时注入到 .NET 配置 AppSettings 中，并且将重写现有设置。",
      "pos": [
        4370,
        4430
      ]
    },
    {
      "content": "PHP、Python、Java 和 Node 应用程序可以在运行时以环境变量的形式访问这些设置。系统将为每个应用程序设置创建两个环境变量，一个变量具有由应用程序设置条目指定的名称，另一个具有 APPSETTING\\_ 前缀。这两个变量都包含相同的值。",
      "pos": [
        4435,
        4560
      ]
    },
    {
      "content": "连接字符串",
      "pos": [
        4566,
        4571
      ]
    },
    {
      "content": "链接资源的连接字符串。",
      "pos": [
        4573,
        4584
      ]
    },
    {
      "content": "对于 .NET Web 应用，这些连接字符串将在运行时注入到 .NET 配置 connectionStrings 设置中，并且将重写其中的键等于链接的数据库名称的所有现有条目。",
      "pos": [
        4586,
        4674
      ]
    },
    {
      "content": "对于 PHP、Python、Java 和 Node 应用程序，这些设置将在运行时作为环境变量提供，并且用连接类型作为前缀。下面列出了环境变量前缀：",
      "pos": [
        4676,
        4749
      ]
    },
    {
      "content": "SQL Server：SQLCONNSTR\\_",
      "pos": [
        4753,
        4776
      ]
    },
    {
      "content": "MySQL：MYSQLCONNSTR\\_",
      "pos": [
        4779,
        4799
      ]
    },
    {
      "content": "SQL 数据库：SQLAZURECONNSTR\\_",
      "pos": [
        4802,
        4827
      ]
    },
    {
      "content": "自定义：CUSTOMCONNSTR\\_",
      "pos": [
        4830,
        4849
      ]
    },
    {
      "pos": [
        4851,
        4951
      ],
      "content": "例如，如果将 MySql 连接字符串命名为 connectionstring1，则将通过环境变量 <ph id=\"ph1\">&lt;code&gt;</ph><ph id=\"ph2\">MYSQLCONNSTR_connectionString1</ph><ph id=\"ph3\">&lt;/code&gt;</ph> 访问该字符串。"
    },
    {
      "pos": [
        4953,
        5031
      ],
      "content": "<ph id=\"ph1\">&lt;strong&gt;</ph>请注意<ph id=\"ph2\">&lt;/strong&gt;</ph>：将数据库资源链接到 Web 应用时，也会创建连接字符串。在配置管理页上查看时，以此方式创建的连接字符串为只读形式。"
    },
    {
      "content": "默认文档",
      "pos": [
        5037,
        5041
      ]
    },
    {
      "content": "Web 应用的默认文档是未指定 Web 应用上的特定页面时显示的网页。如果 Web 应用包含列表中的多个文件，请确保将默认文件放置在列表的顶部。",
      "pos": [
        5043,
        5115
      ]
    },
    {
      "content": "Web 应用可能会使用根据 URL 路由的模块，而不是提供静态内容，在此情况下，将没有此类默认文档。",
      "pos": [
        5117,
        5167
      ]
    },
    {
      "content": "处理程序映射",
      "pos": [
        5173,
        5179
      ]
    },
    {
      "content": "使用此区域可添加自定义脚本处理器，以处理特定文件扩展名的请求。",
      "pos": [
        5181,
        5212
      ]
    },
    {
      "pos": [
        5216,
        5255
      ],
      "content": "<bpt id=\"p1\">**</bpt>扩展<ept id=\"p1\">**</ept>。要处理的扩展名，例如 *.php 或 handler.fcgi。"
    },
    {
      "pos": [
        5258,
        5354
      ],
      "content": "<bpt id=\"p1\">**</bpt>脚本处理器路径<ept id=\"p1\">**</ept>。脚本处理器的绝对路径。匹配该扩展名的文件请求将由脚本处理器处理。使用路径 <ph id=\"ph1\">&lt;code&gt;</ph><ph id=\"ph2\">D:\\\\home\\\\site\\\\wwwroot</ph><ph id=\"ph3\">&lt;/code&gt;</ph> 来引用站点的根目录。"
    },
    {
      "pos": [
        5357,
        5379
      ],
      "content": "<bpt id=\"p1\">**</bpt>其他参数<ept id=\"p1\">**</ept>。脚本处理器的可选命令行参数"
    },
    {
      "content": "虚拟应用程序和目录",
      "pos": [
        5387,
        5396
      ]
    },
    {
      "pos": [
        5399,
        5511
      ],
      "content": "若要配置与你的 Web 应用关联的虚拟应用程序和目录，请指定每个虚拟目录及其对应于 Web 应用根目录的物理路径。或者，你也可以选中“应用程序”<ph id=\"ph1\">&lt;strong&gt;</ph><ph id=\"ph2\">&lt;/strong&gt;</ph>复选框，在站点配置中将虚拟目录标记为应用程序。"
    },
    {
      "pos": [
        5581,
        5632
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtoconfigSQL\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>如何配置 Web 应用以使用 SQL 数据库"
    },
    {
      "content": "执行以下步骤可将 Web 应用链接到 SQL 数据库：",
      "pos": [
        5634,
        5661
      ]
    },
    {
      "pos": [
        5666,
        5735
      ],
      "content": "在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](http://manage.windowsazure.cn)</ept>中，选择 “Web 应用”显示当前登录的帐户创建的网站的列表。"
    },
    {
      "content": "从 Web 应用列表中选择 Web 应用，以打开该 Web 应用的“管理”页。",
      "pos": [
        5740,
        5779
      ]
    },
    {
      "content": "单击“链接的资源”选项卡，“链接的资源”页上会显示一条消息：“没有链接资源”。",
      "pos": [
        5784,
        5823
      ]
    },
    {
      "content": "单击“链接资源”，以打开“链接资源”向导。",
      "pos": [
        5828,
        5849
      ]
    },
    {
      "content": "单击“创建新资源”，以显示可连接到 Web 应用的资源类型的列表。",
      "pos": [
        5854,
        5887
      ]
    },
    {
      "content": "单击“SQL 数据库”，以显示“链接数据库”向导。",
      "pos": [
        5892,
        5917
      ]
    },
    {
      "content": "完成“链接数据库”向导的第 3 页和第 4 页上的必填字段，然后单击第 4 页上的“完成”复选标记。",
      "pos": [
        5922,
        5972
      ]
    },
    {
      "content": "Azure 将使用指定的参数创建 SQL 数据库并将该数据库链接到 Web 应用。",
      "pos": [
        5974,
        6015
      ]
    },
    {
      "pos": [
        6020,
        6055
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtodomain\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>如何配置自定义域名"
    },
    {
      "pos": [
        6057,
        6162
      ],
      "content": "有关配置 Web 应用以使用自定义域名的信息，请参阅<bpt id=\"p1\">[</bpt>为 Azure Web 应用配置自定义域名<ept id=\"p1\">](/documentation/articles/web-sites-custom-domain-name/)</ept>。"
    },
    {
      "pos": [
        6167,
        6214
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtoconfigSSL\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>如何配置 Web 应用以使用 SSL"
    },
    {
      "pos": [
        6218,
        6335
      ],
      "content": "有关在 Azure 上为自定义域配置 SSL 的信息，请参阅<bpt id=\"p1\">[</bpt>为 Azure Web 应用启用 HTTPS<ept id=\"p1\">](/documentation/articles/web-sites-configure-ssl-certificate/)</ept>。"
    },
    {
      "pos": [
        6340,
        6363
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"next\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>后续步骤"
    },
    {
      "content": "如何缩放 Web 应用",
      "pos": [
        6368,
        6379
      ]
    },
    {
      "content": "如何监视 Web 应用",
      "pos": [
        6427,
        6438
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"在 Azure 中配置 Web 应用\" \n    description=\"如何在 Azure 中配置 Web 应用\" \n    services=\"app-service\\web\" \n    documentationCenter=\"\" \n    authors=\"erikre\" \n    manager=\"wpickett\" \n    editor=\"jimbe\"/>\n\n<tags \n    ms.service=\"web-sites\" \n    ms.date=\"12/08/2015\" \n    wacn.date=\"01/21/2016\"/>\n    \n# 如何配置 Web 应用 #\n在 Azure 管理门户中，你可以更改 Web 应用的配置选项并链接到其他 Azure 资源，如数据库。\n\n## 目录 ##\n- [如何更改 Web 应用的配置选项](#howtochangeconfig)\n- [如何配置 Web 应用以使用 SQL 数据库](#howtoconfigSQL)\n- [如何配置 Web 应用以使用 MySQL 数据库](#howtoconfigMySQL)\n- [如何配置自定义域名](#howtodomain)\n- [如何配置 Web 应用以使用 SSL](#howtoconfigSSL)\n- [后续步骤](#next)\n\n\n## <a name=\"howtochangeconfig\"></a>如何更改 Web 应用的配置选项\n\n<!-- HOW TO: CHANGE CONFIGURATION OPTIONS FOR A WEBSITE -->\n\n若要设置 Web 应用的配置选项，请执行以下操作：\n\n1. 在[管理门户](https://manage.windowsazure.cn/)中，打开 Web 应用的管理页。\n1. 单击“配置”选项卡。\n\n“配置”选项卡包含以下部分：\n\n### 常规\n\n**框架版本**。如果你的应用程序使用下列任一框架，请设置这些选项：\n\n- **.NET Framework 版本**：设置 .NET Framework 版本。 \n- **PHP 版本**：设置 PHP 版本，或设为“关闭”****以禁用 PHP。\n- **Java 版本**：选择显示的版本以启用 Java，或设为“关闭”以禁用 Java。 \n- 如果你启用 Java，通过“Web 容器”选项，你可以选择 Tomcat 版本或是 Jetty 版本。\n- **Python 版本**：选择 Python 版本，或设为“关闭”以禁用 Python。\n\n    出于技术原因，为你的 Web 应用启用 Java 会禁用 .NET、PHP 和 Python 选项。\n\n- <strong>托管管道模式</strong>。设置 IIS [管道模式](http://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture#Application)。请保持设置为“集成(默认)”，除非你的旧版 Web 应用需要旧版 IIS。\n\n- <strong>平台</strong>。选择是要在 32 位还是 64 位环境中运行应用程序。64 位环境需要“基本”或“标准”模式。“免费”和“共享”模式始终在 32 位环境下运行。\n\n- <strong>Web Socket</strong>。设为“打开”以启用 WebSocket 协议；例如，如果你的 Web 应用使用 [ASP.NET SignalR](http://www.asp.net/signalr) 或 [socket.io](/documentation/articles/web-sites-nodejs-chat-app-socketio/)。\n\n- <strong>始终可用</strong>。默认情况下， Web 应用如果已处于空闲状态相当一段时间，则是未加载的状态。这样可以让系统节省资源。在“基本”或“标准”模式下，你可以启用“始终可用”，以始终保持加载站点。如果你的站点运行连续的 Web 作业，则应启用“始终可用”，否则这些 Web 作业可能无法可靠运行\n\n- <strong>在 Visual Studio Online 中编辑</strong>。通过 Visual Studio Online 启用实时代码编辑。如果启用，“仪表板”选项卡的<strong></strong>“速览”部分下则会显示名为“在 Visual Studio Online 编辑”<strong></strong>的链接。单击此连结可直接联机编辑 Web 应用。如果你需要进行身份验证，可以使用你的基本部署凭据。\n\n    >[AZURE.NOTE]\n    > 此功能还在预览中。\n\n注意：如果通过源代码管理你启用部署，则部署可能会覆盖你在 Visual Studio Online 编辑器中进行的更改。\n\n\n### 证书\n\n在“基本”或“标准”模式下，你可为自定义域上载 SSL 证书。有关详细信息，请参阅[为 Azure Web 应用启用 HTTPS](/documentation/articles/web-sites-configure-ssl-certificate)。\n\n此处列出已上载的证书。在你上载某一证书后，可以将其分配给你的订阅和区域中的任何 Web 应用。通配符证书可用于接受此证书的域中的任何站点。仅当该证书不具有有效绑定关系时，才能删除证书。\n\n### 域名\n\n查看或添加 Web 应用的其他域名。有关详细信息，请参阅[为 Azure Web 应用配置自定义域名](/documentation/articles/web-sites-custom-domain-name)。\n\n### SSL 绑定\n\n如果已上载 SSL 证书，可以将其绑定到自定义域名。有关详细信息，请参阅[为 Azure Web 应用启用 HTTPS](/documentation/articles/web-sites-configure-ssl-certificate)\n\n### 部署\n\n只有在你已经从源代码管理启用了部署后，此部分才出现。使用这些设置配置部署。\n\n- <strong>Git URL</strong>。如果你已为 Azure Web 应用创建 Git 存储库，则 Git URL 就是推送内容的 URL。\n- <strong>部署触发器 URL</strong>。可以在 GitHub、CodePlex、Bitbucket 或其他存储库上设置此 URL，将提交操作推送到存储库时就能触发部署。\n- <strong>要部署的分支</strong>。指定推送内容时要部署的分支。\n\n若要通过源代码管理设置部署，请查看“仪表板”选项卡，然后单击“通过源代码管理设置部署”。\n\n### 应用程序诊断\n\n从支持日志记录的 Web 应用写入诊断日志的选项：\n\n- <strong>文件系统</strong>。将日志写入 Web 应用的文件系统。文件系统日志记录将持续 12 小时。你可以从 Web 应用的 FTP 共享访问这些日志。\n- <strong>表存储</strong>。将日志写入 Azure 表存储。该存储没有时限，除非你禁用日志记录，否则会一直启用日志记录。 \n- <strong>Blob 存储</strong>。将日志写入 Azure Blob 存储。该存储没有时限，除非你禁用日志记录，否则会一直启用日志记录。\n\n<strong>日志记录级别</strong>。启用日志记录时，此选项指定要记录的信息量（“错误”、“警告”、“信息”或“详细”）。\n\n**管理表存储**。启用表存储时，单击此按钮可设置存储帐户和表名称。\n\n**管理 blob 存储。** 启用 Blob 存储时，单击此按钮可设置存储帐户和 blob 存储名称。\n\n### 应用程序诊断\n\n用于收集 Web 应用诊断信息的选项。\n\n<strong>Web 服务器日志记录</strong>。启用 Web 服务器日志记录。日志以 W3C 扩展日志文件格式保存。可将日志保存到 Azure 存储空间或 Web 应用文件系统。\n \n- 如果你选择“文件系统”，日志会保存到“仪表板”页上“FTP 诊断日志”下列出的 FTP 站点。\n- 如果你选择“文件系统”，请使用“配额”框设置日志文件的最大磁盘空间量。空间量最小为 25MB，最大为 100MB。默认值为 35MB.。在达到了配额后，最旧的文件将被最新的文件依次覆盖。如果你需要保留超过 100MB 的历史记录，请使用 Azure 存储空间，它的存储容量更大。\n- 或者，单击“设置保留”，以在一段时间后自动删除文件。默认情况下，永不删除日志。   \n\n<strong>详细的错误消息</strong>。如果启用，详细的错误消息会另存为 .htm 文件。若要查看文件，请转到“仪表板”页上“FTP 诊断日志”下列出的 FTP 站点。文件保存在 FTP 站点中的 /LogFiles/DetailedErrors 下。\n\n<strong>未能请求跟踪</strong>。如果启用，失败的请求将记录到 XML 文件。若要查看文件，请转到“仪表板”页上“FTP 诊断日志”下列出的 FTP 站点。） 这些文件保存在 /LogFiles/W3SVCxxx 下，其中 xxx 是唯一标识符。此文件夹包含一个 XSL 文件和一个或多个 XML 文件。请务必下载 XSL 文件，因为 XSL 文件提供格式化和筛选 XML 文件内容的功能。\n\n<strong>远程调试</strong> 启用远程调试。如果启用，你可以使用 Visual Studio 中的远程调试器直接连接到 Azure Web 应用。远程调试将保持启用状态 48 小时。\n\n**注意**：远程调试不适用于长度超过 20 个字符的站点名称或用户名。\n\n\n### 开发人员分析\n\n选择“加载项”可从列表中选择分析外接程序，目前 Azure 中国上不支持 Azure 应用商店。选择“自定义”可从列表中选择 New Relic 之类的分析提供程序。如果你使用某一自定义提供程序，则必须在“提供程序密钥”框中输入许可证密钥。\n\n### 应用设置\n\n你的 Web 应用在启动时将加载的名称/值对。\n\n- 对于 .NET Web 应用，这些设置将在运行时注入到 .NET 配置 AppSettings 中，并且将重写现有设置。 \n\n- PHP、Python、Java 和 Node 应用程序可以在运行时以环境变量的形式访问这些设置。系统将为每个应用程序设置创建两个环境变量，一个变量具有由应用程序设置条目指定的名称，另一个具有 APPSETTING\\_ 前缀。这两个变量都包含相同的值。\n\n### 连接字符串\n\n链接资源的连接字符串。\n\n对于 .NET Web 应用，这些连接字符串将在运行时注入到 .NET 配置 connectionStrings 设置中，并且将重写其中的键等于链接的数据库名称的所有现有条目。\n\n对于 PHP、Python、Java 和 Node 应用程序，这些设置将在运行时作为环境变量提供，并且用连接类型作为前缀。下面列出了环境变量前缀：\n\n- SQL Server：SQLCONNSTR\\_\n- MySQL：MYSQLCONNSTR\\_\n- SQL 数据库：SQLAZURECONNSTR\\_\n- 自定义：CUSTOMCONNSTR\\_\n\n例如，如果将 MySql 连接字符串命名为 connectionstring1，则将通过环境变量 <code>MYSQLCONNSTR_connectionString1</code> 访问该字符串。\n\n<strong>请注意</strong>：将数据库资源链接到 Web 应用时，也会创建连接字符串。在配置管理页上查看时，以此方式创建的连接字符串为只读形式。\n\n### 默认文档\n\nWeb 应用的默认文档是未指定 Web 应用上的特定页面时显示的网页。如果 Web 应用包含列表中的多个文件，请确保将默认文件放置在列表的顶部。\n\nWeb 应用可能会使用根据 URL 路由的模块，而不是提供静态内容，在此情况下，将没有此类默认文档。\n\n### 处理程序映射\n\n使用此区域可添加自定义脚本处理器，以处理特定文件扩展名的请求。\n\n- **扩展**。要处理的扩展名，例如 *.php 或 handler.fcgi。\n- **脚本处理器路径**。脚本处理器的绝对路径。匹配该扩展名的文件请求将由脚本处理器处理。使用路径 <code>D:\\\\home\\\\site\\\\wwwroot</code> 来引用站点的根目录。\n- **其他参数**。脚本处理器的可选命令行参数 \n\n\n### 虚拟应用程序和目录 \n\n若要配置与你的 Web 应用关联的虚拟应用程序和目录，请指定每个虚拟目录及其对应于 Web 应用根目录的物理路径。或者，你也可以选中“应用程序”<strong></strong>复选框，在站点配置中将虚拟目录标记为应用程序。\n\n    \n\n<!-- HOW TO: CONFIGURE A WEBSITE TO USE A SQL DATABASE -->\n## <a name=\"howtoconfigSQL\"></a>如何配置 Web 应用以使用 SQL 数据库\n\n执行以下步骤可将 Web 应用链接到 SQL 数据库：\n\n1. 在[管理门户](http://manage.windowsazure.cn)中，选择 “Web 应用”显示当前登录的帐户创建的网站的列表。\n\n2. 从 Web 应用列表中选择 Web 应用，以打开该 Web 应用的“管理”页。\n\n3. 单击“链接的资源”选项卡，“链接的资源”页上会显示一条消息：“没有链接资源”。\n\n4. 单击“链接资源”，以打开“链接资源”向导。\n\n5. 单击“创建新资源”，以显示可连接到 Web 应用的资源类型的列表。\n\n6. 单击“SQL 数据库”，以显示“链接数据库”向导。\n\n7. 完成“链接数据库”向导的第 3 页和第 4 页上的必填字段，然后单击第 4 页上的“完成”复选标记。\n\nAzure 将使用指定的参数创建 SQL 数据库并将该数据库链接到 Web 应用。\n\n## <a name=\"howtodomain\"></a>如何配置自定义域名\n\n有关配置 Web 应用以使用自定义域名的信息，请参阅[为 Azure Web 应用配置自定义域名](/documentation/articles/web-sites-custom-domain-name/)。\n\n## <a name=\"howtoconfigSSL\"></a>如何配置 Web 应用以使用 SSL##\n\n有关在 Azure 上为自定义域配置 SSL 的信息，请参阅[为 Azure Web 应用启用 HTTPS](/documentation/articles/web-sites-configure-ssl-certificate/)。\n\n## <a name=\"next\"></a>后续步骤\n\n* [如何缩放 Web 应用](/documentation/articles/web-sites-scale/)\n\n* [如何监视 Web 应用](/documentation/articles/web-sites-monitor/)\n\n<!---HONumber=74-->"
}