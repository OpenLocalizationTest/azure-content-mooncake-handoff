{
  "nodes": [
    {
      "pos": [
        2,
        45
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"Network-Security-Group\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> 网络安全组"
    },
    {
      "content": "使用 NSG 资源可以通过实现允许和拒绝规则，为工作负载创建安全边界。可将此类规则应用到 VM、NIC 或子网。",
      "pos": [
        47,
        103
      ]
    },
    {
      "content": "属性",
      "pos": [
        106,
        108
      ]
    },
    {
      "content": "说明",
      "pos": [
        109,
        111
      ]
    },
    {
      "content": "示例值",
      "pos": [
        112,
        115
      ]
    },
    {
      "content": "子网",
      "pos": [
        134,
        136
      ]
    },
    {
      "content": "NSG 应用到的子网 ID 的列表。",
      "pos": [
        139,
        157
      ]
    },
    {
      "content": "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/virtualNetworks/TestVNet/subnets/FrontEnd",
      "pos": [
        158,
        301
      ]
    },
    {
      "content": "securityRules",
      "pos": [
        306,
        319
      ]
    },
    {
      "content": "构成 NSG 的安全规则的列表",
      "pos": [
        322,
        337
      ]
    },
    {
      "pos": [
        338,
        366
      ],
      "content": "请参阅下面的<bpt id=\"p1\">[</bpt>安全规则<ept id=\"p1\">](#Security-rule)</ept>"
    },
    {
      "content": "defaultSecurityRules",
      "pos": [
        371,
        391
      ]
    },
    {
      "content": "每个 NSG 中存在的默认安全规则的列表",
      "pos": [
        394,
        414
      ]
    },
    {
      "pos": [
        415,
        454
      ],
      "content": "请参阅下面的<bpt id=\"p1\">[</bpt>默认安全规则<ept id=\"p1\">](#Default-security-rules)</ept>"
    },
    {
      "pos": [
        459,
        509
      ],
      "content": "<bpt id=\"p1\">**</bpt>安全规则<ept id=\"p1\">**</ept> - 一个 NSG 可以有多个定义的安全规则。每个规则可以允许或拒绝不同类型的流量。"
    },
    {
      "pos": [
        514,
        547
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"Security-rule\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> 安全规则"
    },
    {
      "content": "安全规则是 NSG 的子资源，它包含以下属性。",
      "pos": [
        549,
        572
      ]
    },
    {
      "content": "属性",
      "pos": [
        575,
        577
      ]
    },
    {
      "content": "说明",
      "pos": [
        578,
        580
      ]
    },
    {
      "content": "示例值",
      "pos": [
        581,
        584
      ]
    },
    {
      "content": "description",
      "pos": [
        603,
        614
      ]
    },
    {
      "content": "规则的说明",
      "pos": [
        617,
        622
      ]
    },
    {
      "content": "允许子网 X 中所有 VM 的入站流量",
      "pos": [
        623,
        642
      ]
    },
    {
      "content": "protocol",
      "pos": [
        647,
        655
      ]
    },
    {
      "content": "要与规则匹配的协议",
      "pos": [
        658,
        667
      ]
    },
    {
      "content": "TCP、UDP 或 *",
      "pos": [
        668,
        679
      ]
    },
    {
      "content": "sourcePortRange",
      "pos": [
        684,
        699
      ]
    },
    {
      "content": "要与规则匹配的源端口范围",
      "pos": [
        702,
        714
      ]
    },
    {
      "content": "80、100-200、*",
      "pos": [
        715,
        727
      ]
    },
    {
      "content": "destinationPortRange",
      "pos": [
        733,
        753
      ]
    },
    {
      "content": "要与规则匹配的目标端口范围",
      "pos": [
        756,
        769
      ]
    },
    {
      "content": "80、100-200、*",
      "pos": [
        770,
        782
      ]
    },
    {
      "content": "sourceAddressPrefix",
      "pos": [
        787,
        806
      ]
    },
    {
      "content": "要与规则匹配的源地址前缀",
      "pos": [
        809,
        821
      ]
    },
    {
      "content": "10\\.10.10.1、10.10.10.0/24、VirtualNetwork",
      "pos": [
        822,
        862
      ]
    },
    {
      "content": "destinationAddressPrefix",
      "pos": [
        867,
        891
      ]
    },
    {
      "content": "要与规则匹配的目标地址前缀",
      "pos": [
        894,
        907
      ]
    },
    {
      "content": "10\\.10.10.1、10.10.10.0/24、VirtualNetwork",
      "pos": [
        908,
        948
      ]
    },
    {
      "content": "direction",
      "pos": [
        953,
        962
      ]
    },
    {
      "content": "要与规则匹配的流量方向",
      "pos": [
        965,
        976
      ]
    },
    {
      "content": "inbound 或 outbound",
      "pos": [
        977,
        995
      ]
    },
    {
      "content": "priority",
      "pos": [
        1000,
        1008
      ]
    },
    {
      "content": "规则的优先级。按优先顺序检查规则，只要应用了一个规则，就不会测试其他规则来进行匹配。",
      "pos": [
        1011,
        1053
      ]
    },
    {
      "content": "10、100、65000",
      "pos": [
        1054,
        1066
      ]
    },
    {
      "content": "access",
      "pos": [
        1071,
        1077
      ]
    },
    {
      "content": "规则匹配时要应用的访问类型",
      "pos": [
        1080,
        1093
      ]
    },
    {
      "content": "allow 或 deny",
      "pos": [
        1094,
        1106
      ]
    },
    {
      "content": "采用 JSON 格式的示例 NSG：",
      "pos": [
        1109,
        1127
      ]
    },
    {
      "pos": [
        2958,
        3002
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"Default-security-rules\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> 默认安全规则"
    },
    {
      "pos": [
        3004,
        3136
      ],
      "content": "默认安全规则的属性与安全规则中提供的属性相同。默认安全规则的用途是在应用了 NSG 的资源之间提供基本连接。请确保知道存在哪些<bpt id=\"p1\">[</bpt>默认安全规则<ept id=\"p1\">](/documentation/articles/virtual-networks-nsg#Default-Rules)</ept>。"
    },
    {
      "content": "其他资源",
      "pos": [
        3142,
        3146
      ]
    },
    {
      "pos": [
        3150,
        3213
      ],
      "content": "获取有关 <bpt id=\"p1\">[</bpt>NSG<ept id=\"p1\">](/documentation/articles/virtual-networks-nsg)</ept> 的详细信息。"
    },
    {
      "pos": [
        3216,
        3302
      ],
      "content": "阅读 NSG 的<bpt id=\"p1\">[</bpt> REST API 参考文档<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/azure/mt163615.aspx)</ept>"
    },
    {
      "pos": [
        3305,
        3391
      ],
      "content": "阅读 NSG 的<bpt id=\"p1\">[</bpt> REST API 参考文档<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/azure/mt163580.aspx)</ept>"
    }
  ],
  "content": "##<a name=\"Network-Security-Group\"></a> 网络安全组\n\n使用 NSG 资源可以通过实现允许和拒绝规则，为工作负载创建安全边界。可将此类规则应用到 VM、NIC 或子网。\n\n|属性|说明|示例值|\n|---|---|---|\n|**子网**|NSG 应用到的子网 ID 的列表。|/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/virtualNetworks/TestVNet/subnets/FrontEnd|\n|**securityRules**|构成 NSG 的安全规则的列表|请参阅下面的[安全规则](#Security-rule)|\n|**defaultSecurityRules**|每个 NSG 中存在的默认安全规则的列表|请参阅下面的[默认安全规则](#Default-security-rules)|\n\n- **安全规则** - 一个 NSG 可以有多个定义的安全规则。每个规则可以允许或拒绝不同类型的流量。\n\n###<a name=\"Security-rule\"></a> 安全规则\n\n安全规则是 NSG 的子资源，它包含以下属性。\n\n|属性|说明|示例值|\n|---|---|---|\n|**description**|规则的说明|允许子网 X 中所有 VM 的入站流量|\n|**protocol**|要与规则匹配的协议|TCP、UDP 或 *|\n|**sourcePortRange**|要与规则匹配的源端口范围|80、100-200、*| \n|**destinationPortRange**|要与规则匹配的目标端口范围|80、100-200、*|\n|**sourceAddressPrefix**|要与规则匹配的源地址前缀|10\\.10.10.1、10.10.10.0/24、VirtualNetwork|\n|**destinationAddressPrefix**|要与规则匹配的目标地址前缀|10\\.10.10.1、10.10.10.0/24、VirtualNetwork|\n|**direction**|要与规则匹配的流量方向|inbound 或 outbound|\n|**priority**|规则的优先级。按优先顺序检查规则，只要应用了一个规则，就不会测试其他规则来进行匹配。|10、100、65000|\n|**access**|规则匹配时要应用的访问类型|allow 或 deny|\n\n采用 JSON 格式的示例 NSG：\n\n    {\n        \"name\": \"NSG-BackEnd\",\n        \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/networkSecurityGroups/NSG-BackEnd\",\n        \"etag\": \"W/\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\",\n        \"type\": \"Microsoft.Network/networkSecurityGroups\",\n        \"location\": \"chinanorth\",\n        \"tags\": {\n            \"displayName\": \"NSG - Front End\"\n        },\n        \"properties\": {\n            \"provisioningState\": \"Succeeded\",\n            \"resourceGuid\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n            \"securityRules\": [\n                {\n                    \"name\": \"rdp-rule\",\n                    \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/networkSecurityGroups/NSG-BackEnd/securityRules/rdp-rule\",\n                    \"etag\": \"W/\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\",\n                    \"properties\": {\n                        \"provisioningState\": \"Succeeded\",\n                        \"description\": \"Allow RDP\",\n                        \"protocol\": \"Tcp\",\n                        \"sourcePortRange\": \"*\",\n                        \"destinationPortRange\": \"3389\",\n                        \"sourceAddressPrefix\": \"Internet\",\n                        \"destinationAddressPrefix\": \"*\",\n                        \"access\": \"Allow\",\n                        \"priority\": 100,\n                        \"direction\": \"Inbound\"\n                    }\n                }\n            ],\n            \"defaultSecurityRules\": [\n                { [...],\n            \"subnets\": [\n                {\n                    \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/TestRG/providers/Microsoft.Network/virtualNetworks/TestVNet/subnets/FrontEnd\"\n                }\n            ]\n        }\n    }\n\n###<a name=\"Default-security-rules\"></a> 默认安全规则\n\n默认安全规则的属性与安全规则中提供的属性相同。默认安全规则的用途是在应用了 NSG 的资源之间提供基本连接。请确保知道存在哪些[默认安全规则](/documentation/articles/virtual-networks-nsg#Default-Rules)。\n\n### 其他资源\n\n- 获取有关 [NSG](/documentation/articles/virtual-networks-nsg) 的详细信息。\n- 阅读 NSG 的[ REST API 参考文档](https://msdn.microsoft.com/zh-cn/library/azure/mt163615.aspx)\n- 阅读 NSG 的[ REST API 参考文档](https://msdn.microsoft.com/zh-cn/library/azure/mt163580.aspx)\n\n<!---HONumber=82-->"
}