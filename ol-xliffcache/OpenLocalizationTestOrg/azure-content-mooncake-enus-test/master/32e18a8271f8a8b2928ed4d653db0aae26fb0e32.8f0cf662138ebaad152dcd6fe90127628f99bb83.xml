{"nodes":[{"content":"在 Azure 中创建 Node.js Web 应用 | Azure","pos":[27,61]},{"content":"学习如何将 Node.js 应用程序部署到 Azure 中的 Web 应用。","pos":[80,118]},{"content":"在 Azure 中创建 Node.js Web 应用","pos":[344,370]},{"content":".Net","pos":[394,398]},{"content":"Node.js","pos":[457,464]},{"content":"Java","pos":[530,534]},{"content":"PHP - Git","pos":[591,600]},{"content":"PHP - FTP","pos":[665,674]},{"content":"Python","pos":[739,745]},{"content":"本教程说明如何创建一个简单的 <bpt id=\"p1\">[</bpt>Node.js<ept id=\"p1\">](http://nodejs.org)</ept> 应用程序，并使用 <bpt id=\"p2\">[</bpt>Git<ept id=\"p2\">](http://git-scm.com)</ept> 将其部署到 <bpt id=\"p3\">[</bpt>Azure Web 应用<ept id=\"p3\">](/documentation/services/web-sites)</ept>中的 <bpt id=\"p4\">[</bpt>Web 应用<ept id=\"p4\">](/home/features/web-site)</ept>。","pos":[808,979],"source":"本教程说明如何创建一个简单的 [Node.js](http://nodejs.org) 应用程序，并使用 [Git](http://git-scm.com) 将其部署到 [Azure Web 应用](/documentation/services/web-sites)中的 [Web 应用](/home/features/web-site)。"},{"content":"本教程中的说明适用于任何能够运行 Node.js 的操作系统。","pos":[979,1010]},{"content":"学习内容：","pos":[1012,1017]},{"content":"如何使用 Azure 管理门户在 Azure 中创建 Web 应用。","pos":[1021,1055]},{"content":"如何通过推送到 Web 应用的 Git 存储库，将 Node.js 应用程序部署到 Web 应用。","pos":[1058,1107]},{"content":"已完成的应用程序将简短的“hello world”字符串写入浏览器。","pos":[1109,1143]},{"content":"显示“Hello World”消息的浏览器。","pos":[1147,1169]},{"pos":[1194,1295],"content":"有关教程以及适用于更复杂 Node.js 应用程序的示例代码，或有关如何在 Azure 中使用 Node.js 的其他主题，请参阅 <bpt id=\"p1\">[</bpt>Node.js 开发人员中心<ept id=\"p1\">](/develop/nodejs/)</ept>。","source":"有关教程以及适用于更复杂 Node.js 应用程序的示例代码，或有关如何在 Azure 中使用 Node.js 的其他主题，请参阅 [Node.js 开发人员中心](/develop/nodejs/)。"},{"content":"若要完成本教程，你需要一个 Azure 帐户。","pos":[1312,1335]},{"content":"如果你没有帐户，可以<bpt id=\"p1\">[</bpt>注册试用版<ept id=\"p1\">](/pricing/1rmb-trial/?WT.mc_id=A261C142F)</ept>。","pos":[1335,1394],"source":"如果你没有帐户，可以[注册试用版](/pricing/1rmb-trial/?WT.mc_id=A261C142F)。"},{"content":"创建 Web 应用并启用 Git 发布","pos":[1399,1418]},{"content":"请按照以下步骤在 Azure 中创建 Web 应用，然后启用 Git 发布。","pos":[1420,1458]},{"content":"<bpt id=\"p1\">[</bpt>Git<ept id=\"p1\">](http://git-scm.com/)</ept> 是一个分布式版本控制系统，可用来部署 Azure Web 应用。","pos":[1460,1519],"source":"[Git](http://git-scm.com/) 是一个分布式版本控制系统，可用来部署 Azure Web 应用。"},{"content":"你将在本地 Git 存储库中存储你为 Web 应用编写的代码，并通过推送到远程存储库将代码部署到 Azure。","pos":[1519,1574]},{"content":"这种部署方法是 Azure Web 应用的一项功能。","pos":[1574,1600]},{"pos":[1605,1622],"content":"登录到 <bpt id=\"p1\">[</bpt>Azure 管理门户<ept id=\"p1\">]</ept>。","source":"登录到 [Azure 管理门户]。"},{"content":"单击该门户左下的“+ 新建”图标。","pos":[1627,1644]},{"content":"突出显示了“+新建”链接的Azure 管理门户","pos":[1652,1675]},{"content":"单击“ Web 应用”，然后单击“快速创建”。","pos":[1701,1724]},{"content":"输入“URL”的值，并在“区域”下拉菜单中为你的 Web 应用选择数据中心。","pos":[1724,1762]},{"content":"单击对话框底部的复选标记。","pos":[1762,1775]},{"content":"“快速创建”对话框","pos":[1783,1792]},{"content":"Web 应用状态更改为“正在运行”之后，单击 Web 应用名称以访问“仪表板”。","pos":[1819,1859]},{"content":"打开 Web 应用仪表板","pos":[1867,1879]},{"content":"在“快速启动”页的右下方，选择“从源代码管理设置部署”。","pos":[1902,1930]},{"content":"设置 Git 发布","pos":[1938,1947]},{"content":"当系统询问“你的源代码在哪里？","pos":[1975,1990]},{"content":"”时，选择“本地 Git 存储库”，然后单击箭头。","pos":[1990,2015]},{"content":"你的源代码在哪里","pos":[2023,2031]},{"content":"若要启用 Git 发布，必须提供用户名和密码。","pos":[2052,2075]},{"content":"如果您先前已对某个 Azure Web 应用启用了发布，则系统不会提示您输入用户名或密码。","pos":[2075,2120]},{"content":"而是用您先前指定的用户名和密码创建一个 Git 存储库。","pos":[2120,2148]},{"content":"记下此用户名和密码，因为它们将用于您创建的所有 Azure Web 应用的 Git 发布。","pos":[2148,2193]},{"content":"提示输入用户名和密码的对话框。","pos":[2201,2216]},{"content":"一旦 Git 存储库准备就绪，就会显示有关要用于设置本地存储库并将文件推送到 Azure 的 Git 命令的说明。","pos":[2252,2309]},{"content":"为 Web 应用创建存储库后返回的 Git 部署说明。","pos":[2317,2344]},{"content":"本地构建和测试应用程序","pos":[2368,2379]},{"content":"在本部分中，你将创建一个 <bpt id=\"p1\">**</bpt>server.js<ept id=\"p1\">**</ept> 文件，其中包含已稍做修改的“Hello World”示例版本（来自 [nodejs.org]）。","pos":[2381,2456],"source":"在本部分中，你将创建一个 **server.js** 文件，其中包含已稍做修改的“Hello World”示例版本（来自 [nodejs.org]）。"},{"content":"代码将添加 process.env.PORT，作为在 Azure Web 应用中运行时要侦听的端口。","pos":[2456,2506]},{"pos":[2511,2533],"content":"创建名为 <bpt id=\"p1\">*</bpt>helloworld<ept id=\"p1\">*</ept> 的目录。","source":"创建名为 *helloworld* 的目录。"},{"pos":[2538,2587],"content":"使用文本编辑器在 <bpt id=\"p1\">*</bpt>helloworld<ept id=\"p1\">*</ept> 目录中创建名为 <bpt id=\"p2\">**</bpt>server.js<ept id=\"p2\">**</ept> 的新文件。","source":"使用文本编辑器在 *helloworld* 目录中创建名为 **server.js** 的新文件。"},{"pos":[2592,2626],"content":"将以下代码复制到 <bpt id=\"p1\">**</bpt>server.js<ept id=\"p1\">**</ept> 文件，然后保存该文件：","source":"将以下代码复制到 **server.js** 文件，然后保存该文件："},{"content":"打开命令行，并使用以下命令在本地启动 Web 应用。","pos":[2884,2910]},{"content":"打开 Web 浏览器并导航到 http://localhost:1337。","pos":[2939,2976]},{"content":"显示“Hello World”的网页随即出现，如以下屏幕截图所示。","pos":[2982,3015]},{"content":"显示“Hello World”消息的浏览器。","pos":[3023,3045]},{"content":"发布应用程序","pos":[3073,3079]},{"content":"如果你尚未安装 Git，现在请安装。","pos":[3084,3102]},{"pos":[3108,3165],"content":"有关针对你的平台的安装说明，请参阅 <bpt id=\"p1\">[</bpt>Git 下载页<ept id=\"p1\">](http://git-scm.com/download)</ept>。","source":"有关针对你的平台的安装说明，请参阅 [Git 下载页](http://git-scm.com/download)。"},{"pos":[3170,3224],"content":"从命令行中，将目录更改为 <bpt id=\"p1\">**</bpt>helloworld<ept id=\"p1\">**</ept> 目录，然后输入以下命令来初始化本地 Git 存储库。","source":"从命令行中，将目录更改为 **helloworld** 目录，然后输入以下命令来初始化本地 Git 存储库。"},{"content":"使用以下命令将文件添加到存储库中：","pos":[3248,3265]},{"content":"使用以下命令添加 Git remote，以便将更新推送到你之前创建的 Web 应用：","pos":[3328,3370]},{"content":"使用以下命令将更改推送到 Azure：","pos":[3433,3452]},{"content":"系统将提示你输入之前创建的密码。","pos":[3489,3505]},{"content":"输出类似于以下示例。","pos":[3505,3515]},{"content":"若要查看你的应用，请在 Azure 管理门户的“Web 应用”部分中单击“浏览”按钮。","pos":[4169,4212]},{"content":"发布对应用程序所做的更改","pos":[4217,4229]},{"pos":[4234,4298],"content":"在文本编辑器中打开 <bpt id=\"p1\">**</bpt>server.js<ept id=\"p1\">**</ept> 文件，将“Hello World<ph id=\"ph1\">\\\\</ph>n”更改为“Hello Azure<ph id=\"ph2\">\\\\</ph>n”。","source":"在文本编辑器中打开 **server.js** 文件，将“Hello World\\\\n”更改为“Hello Azure\\\\n”。"},{"content":"保存文件。","pos":[4304,4309]},{"pos":[4314,4354],"content":"从命令行中，将目录更改为 <bpt id=\"p1\">**</bpt>helloworld<ept id=\"p1\">**</ept> 目录，然后运行以下命令：","source":"从命令行中，将目录更改为 **helloworld** 目录，然后运行以下命令："},{"content":"系统将再次提示你输入密码。","pos":[4457,4470]},{"content":"刷新你从中导航到 Web 应用 URL 的浏览器窗口。","pos":[4475,4502]},{"content":"显示“Hello Azure”的网页","pos":[4510,4528]},{"content":"要恢复到以前的部署，可以在“部署”中选择该部署。","pos":[4555,4579]},{"content":"后续步骤","pos":[4584,4588]},{"content":"你已将 Node.js 应用程序部署到 Azure 中的 Web 应用。","pos":[4590,4626]},{"content":"若要详细了解 Azure Web 应用如何运行 Node.js 应用程序，请参阅 <bpt id=\"p1\">[</bpt>Azure Web Apps：Node.js<ept id=\"p1\">](http://blogs.msdn.com/b/silverlining/archive/2012/06/14/windows-azure-websites-node-js.aspx)</ept> 和<bpt id=\"p2\">[</bpt>在 Azure 应用程序中指定 Node.js 版本<ept id=\"p2\">](/documentation/articles/nodejs-specify-node-version-azure-apps)</ept>。","pos":[4626,4879],"source":"若要详细了解 Azure Web 应用如何运行 Node.js 应用程序，请参阅 [Azure Web Apps：Node.js](http://blogs.msdn.com/b/silverlining/archive/2012/06/14/windows-azure-websites-node-js.aspx) 和[在 Azure 应用程序中指定 Node.js 版本](/documentation/articles/nodejs-specify-node-version-azure-apps)。"},{"content":"Node.js 提供可由您的应用程序使用的丰富的模块生态系统。","pos":[4881,4912]},{"content":"若要了解 Web Apps 是如何使用模块的，请参阅<bpt id=\"p1\">[</bpt>将 Node.js 模块与 Azure 应用程序一起使用<ept id=\"p1\">](/documentation/articles/nodejs-use-node-modules-azure-apps)</ept>。","pos":[4912,5029],"source":"若要了解 Web Apps 是如何使用模块的，请参阅[将 Node.js 模块与 Azure 应用程序一起使用](/documentation/articles/nodejs-use-node-modules-azure-apps)。"},{"pos":[5031,5154],"content":"如果你将应用程序部署到 Azure 后遇到问题，请参阅<bpt id=\"p1\">[</bpt>如何在 Azure Web 应用中调试 Node.js 应用程序<ept id=\"p1\">](/documentation/articles/web-sites-nodejs-debug)</ept>，以了解有关诊断问题的信息。","source":"如果你将应用程序部署到 Azure 后遇到问题，请参阅[如何在 Azure Web 应用中调试 Node.js 应用程序](/documentation/articles/web-sites-nodejs-debug)，以了解有关诊断问题的信息。"},{"content":"本文将使用 Azure 管理门户来创建 Web 应用。","pos":[5156,5183]},{"content":"你也可以使用 <bpt id=\"p1\">[</bpt>Azure 命令行界面<ept id=\"p1\">](/documentation/articles/xplat-cli-install)</ept>或 <bpt id=\"p2\">[</bpt>Azure PowerShell<ept id=\"p2\">](/documentation/articles/powershell-install-configure)</ept> 执行相同的操作。","pos":[5183,5329],"source":"你也可以使用 [Azure 命令行界面](/documentation/articles/xplat-cli-install)或 [Azure PowerShell](/documentation/articles/powershell-install-configure) 执行相同的操作。"},{"pos":[5331,5404],"content":"有关如何在 Azure 上开发 Node.js 应用程序的详细信息，请参阅 <bpt id=\"p1\">[</bpt>Node.js 开发人员中心<ept id=\"p1\">](/develop/nodejs/)</ept>。","source":"有关如何在 Azure 上开发 Node.js 应用程序的详细信息，请参阅 [Node.js 开发人员中心](/develop/nodejs/)。"},{"content":"Azure 管理门户","pos":[5407,5417]}],"content":"<properties\n    pageTitle=\"在 Azure 中创建 Node.js Web 应用 | Azure\"\n    description=\"学习如何将 Node.js 应用程序部署到 Azure 中的 Web 应用。\"\n    services=\"app-service\\web\"\n    documentationCenter=\"nodejs\"\n    authors=\"rmcmurray\"\n    manager=\"wpickett\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"app-service-web\"\n    ms.date=\"01/09/2016\"\n    wacn.date=\"02/26/2016\"/>\n\n# 在 Azure 中创建 Node.js Web 应用\n\n> [AZURE.SELECTOR]\n- [.Net](/documentation/articles/web-sites-dotnet-get-started)\n- [Node.js](/documentation/articles/web-sites-nodejs-develop-deploy-mac)\n- [Java](/documentation/articles/web-sites-java-get-started)\n- [PHP - Git](/documentation/articles/web-sites-php-mysql-deploy-use-git)\n- [PHP - FTP](/documentation/articles/web-sites-php-mysql-deploy-use-ftp)\n- [Python](/documentation/articles/web-sites-python-ptvs-django-mysql)\n\n本教程说明如何创建一个简单的 [Node.js](http://nodejs.org) 应用程序，并使用 [Git](http://git-scm.com) 将其部署到 [Azure Web 应用](/documentation/services/web-sites)中的 [Web 应用](/home/features/web-site)。本教程中的说明适用于任何能够运行 Node.js 的操作系统。\n\n学习内容：\n\n* 如何使用 Azure 管理门户在 Azure 中创建 Web 应用。\n* 如何通过推送到 Web 应用的 Git 存储库，将 Node.js 应用程序部署到 Web 应用。\n\n已完成的应用程序将简短的“hello world”字符串写入浏览器。\n\n![显示“Hello World”消息的浏览器。][helloworld-completed]\n\n有关教程以及适用于更复杂 Node.js 应用程序的示例代码，或有关如何在 Azure 中使用 Node.js 的其他主题，请参阅 [Node.js 开发人员中心](/develop/nodejs/)。\n\n> [AZURE.NOTE]\n若要完成本教程，你需要一个 Azure 帐户。如果你没有帐户，可以[注册试用版](/pricing/1rmb-trial/?WT.mc_id=A261C142F)。\n\n## 创建 Web 应用并启用 Git 发布\n\n请按照以下步骤在 Azure 中创建 Web 应用，然后启用 Git 发布。\n\n[Git](http://git-scm.com/) 是一个分布式版本控制系统，可用来部署 Azure Web 应用。你将在本地 Git 存储库中存储你为 Web 应用编写的代码，并通过推送到远程存储库将代码部署到 Azure。这种部署方法是 Azure Web 应用的一项功能。\n\n1. 登录到 [Azure 管理门户]。\n\n2. 单击该门户左下的“+ 新建”图标。\n\n    ![突出显示了“+新建”链接的Azure 管理门户][portal-new-website]\n\n3. 单击“ Web 应用”，然后单击“快速创建”。输入“URL”的值，并在“区域”下拉菜单中为你的 Web 应用选择数据中心。单击对话框底部的复选标记。\n\n    ![“快速创建”对话框][portal-quick-create]\n\n4. Web 应用状态更改为“正在运行”之后，单击 Web 应用名称以访问“仪表板”。\n\n    ![打开 Web 应用仪表板][go-to-dashboard]\n\n6. 在“快速启动”页的右下方，选择“从源代码管理设置部署”。\n\n    ![设置 Git 发布][setup-git-publishing]\n\n6. 当系统询问“你的源代码在哪里？”时，选择“本地 Git 存储库”，然后单击箭头。\n\n    ![你的源代码在哪里][where-is-code]\n\n7. 若要启用 Git 发布，必须提供用户名和密码。如果您先前已对某个 Azure Web 应用启用了发布，则系统不会提示您输入用户名或密码。而是用您先前指定的用户名和密码创建一个 Git 存储库。记下此用户名和密码，因为它们将用于您创建的所有 Azure Web 应用的 Git 发布。\n\n    ![提示输入用户名和密码的对话框。][portal-git-username-password]\n\n8. 一旦 Git 存储库准备就绪，就会显示有关要用于设置本地存储库并将文件推送到 Azure 的 Git 命令的说明。\n\n    ![为 Web 应用创建存储库后返回的 Git 部署说明。][git-instructions]\n\n## 本地构建和测试应用程序\n\n在本部分中，你将创建一个 **server.js** 文件，其中包含已稍做修改的“Hello World”示例版本（来自 [nodejs.org]）。代码将添加 process.env.PORT，作为在 Azure Web 应用中运行时要侦听的端口。\n\n1. 创建名为 *helloworld* 的目录。\n\n2. 使用文本编辑器在 *helloworld* 目录中创建名为 **server.js** 的新文件。\n\n2. 将以下代码复制到 **server.js** 文件，然后保存该文件：\n\n        var http = require('http')\n        var port = process.env.PORT || 1337;\n        http.createServer(function(req, res) {\n          res.writeHead(200, { 'Content-Type': 'text/plain' });\n          res.end('Hello World\\n');\n        }).listen(port);\n\n3. 打开命令行，并使用以下命令在本地启动 Web 应用。\n\n        node server.js\n\n4. 打开 Web 浏览器并导航到 http://localhost:1337。\n\n    显示“Hello World”的网页随即出现，如以下屏幕截图所示。\n\n    ![显示“Hello World”消息的浏览器。][helloworld-localhost]\n\n## 发布应用程序\n\n1. 如果你尚未安装 Git，现在请安装。\n\n    有关针对你的平台的安装说明，请参阅 [Git 下载页](http://git-scm.com/download)。\n\n1. 从命令行中，将目录更改为 **helloworld** 目录，然后输入以下命令来初始化本地 Git 存储库。\n\n        git init\n\n\n2. 使用以下命令将文件添加到存储库中：\n\n        git add .\n        git commit -m \"initial commit\"\n\n3. 使用以下命令添加 Git remote，以便将更新推送到你之前创建的 Web 应用：\n\n        git remote add azure [URL for remote repository]\n\n4. 使用以下命令将更改推送到 Azure：\n\n        git push azure master\n\n    系统将提示你输入之前创建的密码。输出类似于以下示例。\n\n        Counting objects: 3, done.\n        Delta compression using up to 8 threads.\n        Compressing objects: 100% (2/2), done.\n        Writing objects: 100% (3/3), 374 bytes, done.\n        Total 3 (delta 0), reused 0 (delta 0)\n        remote: New deployment received.\n        remote: Updating branch 'master'.\n        remote: Preparing deployment for commit id '5ebbe250c9'.\n        remote: Preparing files for deployment.\n        remote: Deploying Web.config to enable Node.js activation.\n        remote: Deployment successful.\n        To https://user@testsite.scm.chinacloudsites.cn/testsite.git\n         * [new branch]      master -> master\n\n5. 若要查看你的应用，请在 Azure 管理门户的“Web 应用”部分中单击“浏览”按钮。\n\n## 发布对应用程序所做的更改\n\n1. 在文本编辑器中打开 **server.js** 文件，将“Hello World\\\\n”更改为“Hello Azure\\\\n”。 \n\n2. 保存文件。\n\n2. 从命令行中，将目录更改为 **helloworld** 目录，然后运行以下命令：\n\n        git add .\n        git commit -m \"changing to hello azure\"\n        git push azure master\n\n    系统将再次提示你输入密码。\n\n3. 刷新你从中导航到 Web 应用 URL 的浏览器窗口。\n\n    ![显示“Hello Azure”的网页][helloworld-completed]\n4. 要恢复到以前的部署，可以在“部署”中选择该部署。\n\n## 后续步骤\n\n你已将 Node.js 应用程序部署到 Azure 中的 Web 应用。若要详细了解 Azure Web 应用如何运行 Node.js 应用程序，请参阅 [Azure Web Apps：Node.js](http://blogs.msdn.com/b/silverlining/archive/2012/06/14/windows-azure-websites-node-js.aspx) 和[在 Azure 应用程序中指定 Node.js 版本](/documentation/articles/nodejs-specify-node-version-azure-apps)。\n\nNode.js 提供可由您的应用程序使用的丰富的模块生态系统。若要了解 Web Apps 是如何使用模块的，请参阅[将 Node.js 模块与 Azure 应用程序一起使用](/documentation/articles/nodejs-use-node-modules-azure-apps)。\n\n如果你将应用程序部署到 Azure 后遇到问题，请参阅[如何在 Azure Web 应用中调试 Node.js 应用程序](/documentation/articles/web-sites-nodejs-debug)，以了解有关诊断问题的信息。\n\n本文将使用 Azure 管理门户来创建 Web 应用。你也可以使用 [Azure 命令行界面](/documentation/articles/xplat-cli-install)或 [Azure PowerShell](/documentation/articles/powershell-install-configure) 执行相同的操作。\n\n有关如何在 Azure 上开发 Node.js 应用程序的详细信息，请参阅 [Node.js 开发人员中心](/develop/nodejs/)。\n\n[Azure 管理门户]: http://manage.windowsazure.cn\n[Azure Command-Line Tools for Mac and Linux]: /documentation/articles/xplat-cli\n[Azure PowerShell]: /documentation/articles/powershell-install-configure\n[portal-new-website]: ./media/web-sites-nodejs-develop-deploy-mac/plus-new.png\n[portal-git-username-password]: ./media/web-sites-nodejs-develop-deploy-mac/git-deployment-credentials.png\n[git-instructions]: ./media/web-sites-nodejs-develop-deploy-mac/git-instructions.png\n[git-deployments-first]: ./media/web-sites-nodejs-develop-deploy-mac/git_deployments_first.png\n[git-deployments-second]: ./media/web-sites-nodejs-develop-deploy-mac/git_deployments_second.png\n[where-is-code]: ./media/web-sites-nodejs-develop-deploy-mac/where_is_code.png\n[helloworld-completed]: ./media/web-sites-nodejs-develop-deploy-mac/helloazure.png\n[helloworld-localhost]: ./media/web-sites-nodejs-develop-deploy-mac/helloworldlocal.png\n[portal-quick-create]: ./media/web-sites-nodejs-develop-deploy-mac/create-quick-website.png\n[portal-quick-create2]: ./media/web-sites-nodejs-develop-deploy-mac/create-quick-website2.png\n[setup-git-publishing]: ./media/web-sites-nodejs-develop-deploy-mac/setup_git_publishing.png\n[go-to-dashboard]: ./media/web-sites-nodejs-develop-deploy-mac/go_to_dashboard.png\n[deployment-part]: ./media/web-sites-nodejs-develop-deploy-mac/deployment-part.png\n[deployment-credentials]: ./media/web-sites-nodejs-develop-deploy-mac/deployment-credentials.png\n[git-url]: ./media/web-sites-nodejs-develop-deploy-mac/git-url.png\n\n<!---HONumber=Mooncake_0215_2016-->"}