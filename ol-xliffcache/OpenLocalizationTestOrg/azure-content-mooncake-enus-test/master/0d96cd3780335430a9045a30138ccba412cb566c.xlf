<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="md" source-language="en-US" target-language="en-us">
    <header>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">ht</xliffext:oltranslationpriority>
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">0d96cd3780335430a9045a30138ccba412cb566c</xliffext:olfilehash>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-02a95cf" tool-company="Microsoft" />
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve">
          <source>联合迁移 | Azure</source>
          <target state="new">联合迁移 | Azure</target>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>概述了将使用“联合”功能构建的现有应用迁移到弹性数据库模型的步骤。</source>
          <target state="new">概述了将使用“联合”功能构建的现有应用迁移到弹性数据库模型的步骤。</target>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>联合迁移</source>
          <target state="new">联合迁移</target>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>Azure SQL 数据库联合功能以及 Web/Business Edition 将于 2015 年 9 月停用。到那时，使用联合功能的应用程序将停止工作。为了确保迁移成功，强烈建议您尽快开始迁移工作，以便充分计划和执行。</source>
          <target state="new">Azure SQL 数据库联合功能以及 Web/Business Edition 将于 2015 年 9 月停用。到那时，使用联合功能的应用程序将停止工作。为了确保迁移成功，强烈建议您尽快开始迁移工作，以便充分计划和执行。</target>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>如果你的应用程序尚未做好失去联合功能的准备，请使用<bpt id="p1">[</bpt>此处<ept id="p1">](https://support.microsoft.com/zh-cn/kb/3087180)</ept>提到的说明联系 Microsoft 支持部门。</source>
          <target state="new">如果你的应用程序尚未做好失去联合功能的准备，请使用<bpt id="p1">[</bpt>此处<ept id="p1">](https://support.microsoft.com/zh-cn/kb/3087180)</ept>提到的说明联系 Microsoft 支持部门。</target>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>本文档提供了联合迁移实用工具的上下文、示例和介绍，说明了如何成功地将当前联合应用程序无缝迁移到用于分片的<bpt id="p1">[</bpt>弹性数据库客户端库<ept id="p1">](http://go.microsoft.com/?linkid=9862592)</ept> API。该文档的目标是引导您完成建议的步骤来迁移联合应用程序，而无需任何数据移动。</source>
          <target state="new">本文档提供了联合迁移实用工具的上下文、示例和介绍，说明了如何成功地将当前联合应用程序无缝迁移到用于分片的<bpt id="p1">[</bpt>弹性数据库客户端库<ept id="p1">](http://go.microsoft.com/?linkid=9862592)</ept> API。该文档的目标是引导您完成建议的步骤来迁移联合应用程序，而无需任何数据移动。</target>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>将现有联合应用程序迁移到使用弹性数据库工具的应用程序需要三个主要步骤。</source>
          <target state="new">将现有联合应用程序迁移到使用弹性数据库工具的应用程序需要三个主要步骤。</target>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>从联合根创建分片映射管理器</source>
          <target state="new">从联合根创建分片映射管理器</target>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>修改现有应用程序</source>
          <target state="new">修改现有应用程序</target>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>断开现有联合成员</source>
          <target state="new">断开现有联合成员</target>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>迁移示例工具</source>
          <target state="new">迁移示例工具</target>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>为协助此过程，我们已创建<bpt id="p1">[</bpt>联合迁移实用工具<ept id="p1">](http://go.microsoft.com/?linkid=9862613)</ept>。该工具将完成步骤 1 和 3。</source>
          <target state="new">为协助此过程，我们已创建<bpt id="p1">[</bpt>联合迁移实用工具<ept id="p1">](http://go.microsoft.com/?linkid=9862613)</ept>。该工具将完成步骤 1 和 3。</target>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>从联合根创建分片映射管理器</source>
          <target state="new">从联合根创建分片映射管理器</target>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>迁移联合应用程序的第一步是将联合根的元数据克隆到分片映射管理器的结构中。</source>
          <target state="new">迁移联合应用程序的第一步是将联合根的元数据克隆到分片映射管理器的结构中。</target>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>将联合根克隆到分片映射管理器</source>
          <target state="new">将联合根克隆到分片映射管理器</target>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>在测试环境中，从现有的联合应用程序开始。</source>
          <target state="new">在测试环境中，从现有的联合应用程序开始。</target>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>使用<bpt id="p1">**</bpt>联合迁移实用工具<ept id="p1">**</ept>将联合根元数据克隆到弹性数据库客户端库的<bpt id="p2">[</bpt>分片映射管理器<ept id="p2">](/documentation/articles/sql-database-elastic-scale-shard-map-management)</ept>的结构中。与联合根类似，分片映射管理器数据库是独立数据库，它包含了分片映射（即联合）、对分片的引用（即联合成员）以及各自的范围映射。</source>
          <target state="new">使用<bpt id="p1">**</bpt>联合迁移实用工具<ept id="p1">**</ept>将联合根元数据克隆到弹性数据库客户端库的<bpt id="p2">[</bpt>分片映射管理器<ept id="p2">](/documentation/articles/sql-database-elastic-scale-shard-map-management)</ept>的结构中。与联合根类似，分片映射管理器数据库是独立数据库，它包含了分片映射（即联合）、对分片的引用（即联合成员）以及各自的范围映射。</target>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>从联合根到分片映射管理器的克隆是元数据的复制和转换。不会在联合根上更改任何元数据。请注意，使用联合迁移实用工具克隆联合根是一项时间点操作，并且对联合根或分片映射进行的任何更改将不会反映在其他相应的数据存储中。如果在测试新 API 期间对联合根进行了更改，则联合迁移实用工具可用于刷新分片映射以表示当前状态。</source>
          <target state="new">从联合根到分片映射管理器的克隆是元数据的复制和转换。不会在联合根上更改任何元数据。请注意，使用联合迁移实用工具克隆联合根是一项时间点操作，并且对联合根或分片映射进行的任何更改将不会反映在其他相应的数据存储中。如果在测试新 API 期间对联合根进行了更改，则联合迁移实用工具可用于刷新分片映射以表示当前状态。</target>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>迁移现有应用以使用弹性数据库工具 API</source>
          <target state="new">迁移现有应用以使用弹性数据库工具 API</target>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>修改现有应用程序</source>
          <target state="new">修改现有应用程序</target>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>在分片映射管理器到位且已使用分片映射管理器注册联合成员和范围（通过迁移实用工具完成）后，开发人员可以修改现有联合应用程序以使用弹性数据库客户端库。如上图所示，通过这些 API 的应用程序连接将通过分片映射管理器路由到相应的联合成员（现在也是分片）。将联合成员映射到分片映射管理器使一个应用程序的两个版本（一个使用联合，另一个使用弹性数据库客户端库）能够并行执行以验证功能。</source>
          <target state="new">在分片映射管理器到位且已使用分片映射管理器注册联合成员和范围（通过迁移实用工具完成）后，开发人员可以修改现有联合应用程序以使用弹性数据库客户端库。如上图所示，通过这些 API 的应用程序连接将通过分片映射管理器路由到相应的联合成员（现在也是分片）。将联合成员映射到分片映射管理器使一个应用程序的两个版本（一个使用联合，另一个使用弹性数据库客户端库）能够并行执行以验证功能。</target>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>在迁移应用程序期间，将需要对现有应用程序进行两项核心修改。</source>
          <target state="new">在迁移应用程序期间，将需要对现有应用程序进行两项核心修改。</target>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>变化 1：实例化分片映射管理器对象：</source>
          <target state="new">变化 1：实例化分片映射管理器对象：</target>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>与联合不同，弹性数据库工具 API 通过 <bpt id="p1">**</bpt>ShardMapManager<ept id="p1">**</ept> 类与分片映射管理器进行交互。<bpt id="p2">**</bpt>ShardMapManager<ept id="p2">**</ept> 对象和分片映射的实例可按照如下所示来完成：</source>
          <target state="new">与联合不同，弹性数据库工具 API 通过 <bpt id="p1">**</bpt>ShardMapManager<ept id="p1">**</ept> 类与分片映射管理器进行交互。<bpt id="p2">**</bpt>ShardMapManager<ept id="p2">**</ept> 对象和分片映射的实例可按照如下所示来完成：</target>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>变化 2：将连接路由到相应的分片</source>
          <target state="new">变化 2：将连接路由到相应的分片</target>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>对于联合，将使用 USE FEDERATION 命令建立与特定联合成员的连接，如下所示：</source>
          <target state="new">对于联合，将使用 USE FEDERATION 命令建立与特定联合成员的连接，如下所示：</target>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>对于弹性数据库工具 API，将使用 <bpt id="p1">**</bpt>RangeShardMap<ept id="p1">**</ept> 类中的 <bpt id="p2">**</bpt>OpenConnectionForKey<ept id="p2">**</ept> 方法，通过<bpt id="p3">[</bpt>数据相关路由<ept id="p3">](/documentation/articles/sql-database-elastic-scale-data-dependent-routing)</ept>建立与特定分片的连接。</source>
          <target state="new">对于弹性数据库工具 API，将使用 <bpt id="p1">**</bpt>RangeShardMap<ept id="p1">**</ept> 类中的 <bpt id="p2">**</bpt>OpenConnectionForKey<ept id="p2">**</ept> 方法，通过<bpt id="p3">[</bpt>数据相关路由<ept id="p3">](/documentation/articles/sql-database-elastic-scale-data-dependent-routing)</ept>建立与特定分片的连接。</target>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source>本部分中的这些步骤是必要的，但是可能不适用于出现的所有迁移方案。有关详细信息，请参阅<bpt id="p1">[</bpt>弹性数据库工具的概念性概述<ept id="p1">](/documentation/articles/sql-database-elastic-scale-introduction)</ept>和 <bpt id="p2">[</bpt>API 参考<ept id="p2">](http://go.microsoft.com/?linkid=9862604)</ept>。</source>
          <target state="new">本部分中的这些步骤是必要的，但是可能不适用于出现的所有迁移方案。有关详细信息，请参阅<bpt id="p1">[</bpt>弹性数据库工具的概念性概述<ept id="p1">](/documentation/articles/sql-database-elastic-scale-introduction)</ept>和 <bpt id="p2">[</bpt>API 参考<ept id="p2">](http://go.microsoft.com/?linkid=9862604)</ept>。</target>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>断开现有联合成员</source>
          <target state="new">断开现有联合成员</target>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>断开分片的联合成员</source>
          <target state="new">断开分片的联合成员</target>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>将应用程序修改为包含弹性数据库工具 API 后，迁移联合应用程序的最后一步是 <bpt id="p1">**</bpt>SWITCH OUT<ept id="p1">**</ept> 联合成员（有关详细信息，请参阅 [ALTER FEDERATION（Azure SQL 数据库）] 的 MSDN 参考(http://msdn.microsoft.com/zh-cn/library/dn269988(v=sql.120).aspx))。针对特定联合成员发出 <bpt id="p2">**</bpt>SWITCH OUT<ept id="p2">**</ept> 的最终结果将导致删除所有联合约束和元数据，从而将联合成员呈现为常规 Azure SQL 数据库，与其他任何 Azure SQL 数据库无异。</source>
          <target state="new">将应用程序修改为包含弹性数据库工具 API 后，迁移联合应用程序的最后一步是 <bpt id="p1">**</bpt>SWITCH OUT<ept id="p1">**</ept> 联合成员（有关详细信息，请参阅 [ALTER FEDERATION（Azure SQL 数据库）] 的 MSDN 参考(http://msdn.microsoft.com/zh-cn/library/dn269988(v=sql.120).aspx))。针对特定联合成员发出 <bpt id="p2">**</bpt>SWITCH OUT<ept id="p2">**</ept> 的最终结果将导致删除所有联合约束和元数据，从而将联合成员呈现为常规 Azure SQL 数据库，与其他任何 Azure SQL 数据库无异。</target>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>请注意，针对联合成员发出 <bpt id="p1">**</bpt>SWITCH OUT<ept id="p1">**</ept> 是一个单向操作，无法撤消。执行后，无法将产生的数据库添加回联合，并且 USE FEDERATION 命令将不再适用于此数据库。</source>
          <target state="new">请注意，针对联合成员发出 <bpt id="p1">**</bpt>SWITCH OUT<ept id="p1">**</ept> 是一个单向操作，无法撤消。执行后，无法将产生的数据库添加回联合，并且 USE FEDERATION 命令将不再适用于此数据库。</target>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>为了执行该切换，其他参数已添加到 ALTER FEDERATION 命令，以 SWITCH OUT 联合成员。虽然可对单个联合成员发出该命令，但是联合迁移实用工具提供了以编程方式遍历每个联合成员并执行切换操作的功能。</source>
          <target state="new">为了执行该切换，其他参数已添加到 ALTER FEDERATION 命令，以 SWITCH OUT 联合成员。虽然可对单个联合成员发出该命令，但是联合迁移实用工具提供了以编程方式遍历每个联合成员并执行切换操作的功能。</target>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>对所有现有联合成员执行切换后，便完成了应用程序的迁移。断开所有联合成员后，建议在根位置执行 DROP FEDERATION 操作。这不会影响以前的任何成员，但允许根数据库轻松地迁出 Web 和 Business Edition。</source>
          <target state="new">对所有现有联合成员执行切换后，便完成了应用程序的迁移。断开所有联合成员后，建议在根位置执行 DROP FEDERATION 操作。这不会影响以前的任何成员，但允许根数据库轻松地迁出 Web 和 Business Edition。</target>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>联合迁移实用工具提供了以下功能：</source>
          <target state="new">联合迁移实用工具提供了以下功能：</target>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>执行联合根到分片映射管理器的克隆。开发人员可选择将现有的分片映射管理器放置在新 Azure SQL 数据库上（推荐）或放置在现有联合根数据库上。</source>
          <target state="new">执行联合根到分片映射管理器的克隆。开发人员可选择将现有的分片映射管理器放置在新 Azure SQL 数据库上（推荐）或放置在现有联合根数据库上。</target>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>针对联合中的所有联合成员发出 SWITCH OUT。</source>
          <target state="new">针对联合中的所有联合成员发出 SWITCH OUT。</target>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>功能比较</source>
          <target state="new">功能比较</target>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>虽然弹性数据库工具提供了许多附加功能（例如，<bpt id="p1">[</bpt>多分片查询<ept id="p1">](/documentation/articles/sql-database-elastic-scale-multishard-querying)</ept>、<bpt id="p2">[</bpt>拆分和合并分片<ept id="p2">](/documentation/articles/sql-database-elastic-scale-overview-split-and-merge)</ept>、分片弹性、<bpt id="p3">[</bpt>客户端缓存<ept id="p3">](/documentation/articles/sql-database-elastic-scale-shard-map-management)</ept>等），但是有几个在弹性数据库工具中不受支持的联合功能值得注意。</source>
          <target state="new">虽然弹性数据库工具提供了许多附加功能（例如，<bpt id="p1">[</bpt>多分片查询<ept id="p1">](/documentation/articles/sql-database-elastic-scale-multishard-querying)</ept>、<bpt id="p2">[</bpt>拆分和合并分片<ept id="p2">](/documentation/articles/sql-database-elastic-scale-overview-split-and-merge)</ept>、分片弹性、<bpt id="p3">[</bpt>客户端缓存<ept id="p3">](/documentation/articles/sql-database-elastic-scale-shard-map-management)</ept>等），但是有几个在弹性数据库工具中不受支持的联合功能值得注意。</target>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>FILTERING=ON<ept id="p1">**</ept> 的使用。建立使用行级安全性 (RLS) 来执行行筛选。与联合中的筛选一样，RLS 会自动将一个谓词添加到对分片表执行的所有查询。有关详细信息，请参阅<bpt id="p2">[</bpt>具有弹性数据库工具和行级安全性的多租户应用程序<ept id="p2">](/documentation/articles/sql-database-elastic-tools-multi-tenant-row-level-security)</ept>。</source>
          <target state="new"><bpt id="p1">**</bpt>FILTERING=ON<ept id="p1">**</ept> 的使用。建立使用行级安全性 (RLS) 来执行行筛选。与联合中的筛选一样，RLS 会自动将一个谓词添加到对分片表执行的所有查询。有关详细信息，请参阅<bpt id="p2">[</bpt>具有弹性数据库工具和行级安全性的多租户应用程序<ept id="p2">](/documentation/articles/sql-database-elastic-tools-multi-tenant-row-level-security)</ept>。</target>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>或者，你可以在针对分片发出的查询中生成筛选逻辑。例如：</source>
          <target state="new">或者，你可以在针对分片发出的查询中生成筛选逻辑。例如：</target>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>产生的结果如下：</source>
          <target state="new">产生的结果如下：</target>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>弹性数据库工具<bpt id="p1">**</bpt>拆分<ept id="p1">**</ept>功能并不完全处于联机状态。在进行拆分操作期间，必须使每个单独的 shardlet 在移动期间处于脱机状态。</source>
          <target state="new">弹性数据库工具<bpt id="p1">**</bpt>拆分<ept id="p1">**</ept>功能并不完全处于联机状态。在进行拆分操作期间，必须使每个单独的 shardlet 在移动期间处于脱机状态。</target>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>拆分功能要求手动预配数据库和手动管理架构。</source>
          <target state="new">拆分功能要求手动预配数据库和手动管理架构。</target>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>其他注意事项</source>
          <target state="new">其他注意事项</target>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>Web 版和 Business Edition 以及联合功能将于 2015 年秋季停用。在联合应用程序迁移过程中，强烈建议对 Basic、Standard 和 Premium Edition 执行性能测试。</source>
          <target state="new">Web 版和 Business Edition 以及联合功能将于 2015 年秋季停用。在联合应用程序迁移过程中，强烈建议对 Basic、Standard 和 Premium Edition 执行性能测试。</target>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>对联合成员执行 SWITCH OUT 语句将使生成的数据库能够利用所有 Azure SQL 数据库功能（即新版本、备份、PITR、审核等）。</source>
          <target state="new">对联合成员执行 SWITCH OUT 语句将使生成的数据库能够利用所有 Azure SQL 数据库功能（即新版本、备份、PITR、审核等）。</target>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>迁移需要更多时间吗？</source>
          <target state="new">迁移需要更多时间吗？</target>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>如果你的应用程序尚未做好失去联合功能的准备，请使用<bpt id="p1">[</bpt>此处<ept id="p1">](https://support.microsoft.com/zh-cn/kb/3087180)</ept>提到的说明联系 Microsoft 支持部门。</source>
          <target state="new">如果你的应用程序尚未做好失去联合功能的准备，请使用<bpt id="p1">[</bpt>此处<ept id="p1">](https://support.microsoft.com/zh-cn/kb/3087180)</ept>提到的说明联系 Microsoft 支持部门。</target>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>