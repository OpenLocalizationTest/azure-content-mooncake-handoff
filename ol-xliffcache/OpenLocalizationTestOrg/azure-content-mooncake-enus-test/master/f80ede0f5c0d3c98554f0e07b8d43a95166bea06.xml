{
  "nodes": [
    {
      "content": "资源锁的资源管理器模板 | Azure",
      "pos": [
        26,
        45
      ]
    },
    {
      "content": "显示资源锁的资源管理器架构。",
      "pos": [
        63,
        77
      ]
    },
    {
      "content": "资源锁 - 模板架构",
      "pos": [
        304,
        314
      ]
    },
    {
      "content": "在资源及其子资源上创建新锁。",
      "pos": [
        316,
        330
      ]
    },
    {
      "content": "架构格式",
      "pos": [
        335,
        339
      ]
    },
    {
      "content": "若要创建锁，请将以下架构添加到模板的资源节中。",
      "pos": [
        341,
        364
      ]
    },
    {
      "content": "值",
      "pos": [
        606,
        607
      ]
    },
    {
      "content": "下表描述了需要在架构中设置的值。",
      "pos": [
        609,
        625
      ]
    },
    {
      "content": "Name",
      "pos": [
        629,
        633
      ]
    },
    {
      "content": "类型",
      "pos": [
        636,
        638
      ]
    },
    {
      "content": "必选",
      "pos": [
        641,
        643
      ]
    },
    {
      "content": "允许的值",
      "pos": [
        646,
        650
      ]
    },
    {
      "content": "说明",
      "pos": [
        653,
        655
      ]
    },
    {
      "content": "type",
      "pos": [
        720,
        724
      ]
    },
    {
      "content": "枚举",
      "pos": [
        727,
        729
      ]
    },
    {
      "content": "是",
      "pos": [
        732,
        733
      ]
    },
    {
      "content": "对于资源：",
      "pos": [
        736,
        741
      ]
    },
    {
      "content": "{namespace}/{type}/providers/locks",
      "pos": [
        749,
        783
      ]
    },
    {
      "content": "对于资源组：",
      "pos": [
        797,
        803
      ]
    },
    {
      "content": "Microsoft.Authorization/locks",
      "pos": [
        811,
        840
      ]
    },
    {
      "content": "要创建的资源类型。",
      "pos": [
        845,
        854
      ]
    },
    {
      "content": "apiVersion",
      "pos": [
        859,
        869
      ]
    },
    {
      "content": "枚举",
      "pos": [
        872,
        874
      ]
    },
    {
      "content": "是",
      "pos": [
        877,
        878
      ]
    },
    {
      "content": "2015-01-01",
      "pos": [
        883,
        893
      ]
    },
    {
      "content": "要用于创建该资源的 API 版本。",
      "pos": [
        898,
        915
      ]
    },
    {
      "content": "name",
      "pos": [
        922,
        926
      ]
    },
    {
      "content": "字符串",
      "pos": [
        929,
        932
      ]
    },
    {
      "content": "是",
      "pos": [
        935,
        936
      ]
    },
    {
      "content": "对于资源：",
      "pos": [
        939,
        944
      ]
    },
    {
      "content": "{resouce}/Microsoft.Authorization/{lockname}",
      "pos": [
        952,
        996
      ]
    },
    {
      "content": "对于资源组：",
      "pos": [
        1010,
        1016
      ]
    },
    {
      "content": "**{lockname}****",
      "pos": [
        1022,
        1038
      ]
    },
    {
      "content": "最多为 64 个字符",
      "pos": [
        1050,
        1060
      ]
    },
    {
      "content": "不能包含 &lt;、&gt;、%、&amp;、?",
      "pos": [
        1066,
        1080
      ]
    },
    {
      "content": "或任何控制字符。",
      "pos": [
        1081,
        1089
      ]
    },
    {
      "content": "一个值，同时指定要锁定的资源和锁的名称。",
      "pos": [
        1091,
        1111
      ]
    },
    {
      "content": "dependsOn",
      "pos": [
        1115,
        1124
      ]
    },
    {
      "content": "数组",
      "pos": [
        1127,
        1129
      ]
    },
    {
      "content": "否",
      "pos": [
        1132,
        1133
      ]
    },
    {
      "content": "资源名称或资源唯一标识符的逗号分隔列表。",
      "pos": [
        1136,
        1156
      ]
    },
    {
      "content": "此锁所依赖的资源的集合。如果要锁定的资源部署在同一模板中，请在此元素中包含该资源名称以确保该资源先部署。",
      "pos": [
        1158,
        1210
      ]
    },
    {
      "content": "属性",
      "pos": [
        1214,
        1216
      ]
    },
    {
      "content": "对象",
      "pos": [
        1219,
        1221
      ]
    },
    {
      "content": "是",
      "pos": [
        1224,
        1225
      ]
    },
    {
      "content": "（下面显示）",
      "pos": [
        1227,
        1233
      ]
    },
    {
      "content": "一个对象，用于标识锁的类型，以及有关锁的说明。",
      "pos": [
        1235,
        1258
      ]
    },
    {
      "content": "属性对象",
      "pos": [
        1266,
        1270
      ]
    },
    {
      "content": "Name",
      "pos": [
        1274,
        1278
      ]
    },
    {
      "content": "类型",
      "pos": [
        1281,
        1283
      ]
    },
    {
      "content": "必选",
      "pos": [
        1286,
        1288
      ]
    },
    {
      "content": "允许的值",
      "pos": [
        1291,
        1295
      ]
    },
    {
      "content": "说明",
      "pos": [
        1298,
        1300
      ]
    },
    {
      "content": "级别",
      "pos": [
        1368,
        1370
      ]
    },
    {
      "content": "枚举",
      "pos": [
        1373,
        1375
      ]
    },
    {
      "content": "是",
      "pos": [
        1378,
        1379
      ]
    },
    {
      "content": "CannotDelete",
      "pos": [
        1384,
        1396
      ]
    },
    {
      "content": "ReadOnly",
      "pos": [
        1408,
        1416
      ]
    },
    {
      "content": "要应用于作用域的锁的类型。CanNotDelete 允许修改，但不能删除；ReadOnly 可防止修改或删除操作。",
      "pos": [
        1421,
        1478
      ]
    },
    {
      "content": "说明",
      "pos": [
        1483,
        1485
      ]
    },
    {
      "content": "字符串",
      "pos": [
        1488,
        1491
      ]
    },
    {
      "content": "否",
      "pos": [
        1494,
        1495
      ]
    },
    {
      "content": "512 个字符",
      "pos": [
        1498,
        1505
      ]
    },
    {
      "content": "该锁的说明。",
      "pos": [
        1508,
        1514
      ]
    },
    {
      "content": "如何使用锁资源",
      "pos": [
        1522,
        1529
      ]
    },
    {
      "content": "将此资源添加到你的模板可防止对资源执行指定的操作。该锁将应用于所有用户和组。通常情况下，你只在有限的持续时间内应用锁，例如，当某个进程正在运行时，你想要确保组织中的某人不会无意中修改或删除某个资源。",
      "pos": [
        1531,
        1630
      ]
    },
    {
      "pos": [
        1632,
        1835
      ],
      "content": "若要创建或删除管理锁，你必须有权访问 <bpt id=\"p1\">**</bpt>Microsoft.Authorization/<ept id=\"p1\">**</ept>* 或 <bpt id=\"p2\">**</bpt>Microsoft.Authorization/locks/<ept id=\"p2\">**</ept>* 操作。在内置角色中，只有<bpt id=\"p3\">**</bpt>所有者<ept id=\"p3\">**</ept>和<bpt id=\"p4\">**</bpt>用户访问管理员<ept id=\"p4\">**</ept>有权执行这些操作。有关基于角色的访问控制的信息，请参阅<bpt id=\"p5\">[</bpt>管理对资源的访问权限<ept id=\"p5\">](/documentation/articles/resource-group-rbac)</ept>。"
    },
    {
      "content": "锁将应用于指定的资源和任何子资源。如果你将多个锁应用于一个资源，则限制性最强的锁将具有最高优先级。例如，如果你在父级（例如资源组）应用 ReadOnly 并对该组中的资源应用 CanNotDelete，则将会优先应用父级中限制性较强的锁 (ReadOnly)。",
      "pos": [
        1837,
        1967
      ]
    },
    {
      "pos": [
        1969,
        2104
      ],
      "content": "你可以使用 PowerShell 命令 <bpt id=\"p1\">**</bpt>Remove-AzureRmResourceLock<ept id=\"p1\">**</ept> 或 REST API 的<bpt id=\"p2\">[</bpt>删除操作<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/azure/mt204562.aspx)</ept>删除锁。"
    },
    {
      "content": "示例",
      "pos": [
        2109,
        2111
      ]
    },
    {
      "content": "以下示例将只读锁应用于 Web 应用。",
      "pos": [
        2113,
        2132
      ]
    },
    {
      "content": "下一个示例将只读锁应用于资源组。",
      "pos": [
        3357,
        3373
      ]
    },
    {
      "content": "后续步骤",
      "pos": [
        3952,
        3956
      ]
    },
    {
      "pos": [
        3960,
        4052
      ],
      "content": "有关模板结构的信息，请参阅<bpt id=\"p1\">[</bpt>创作 Azure 资源管理器模板<ept id=\"p1\">](/documentation/articles/resource-group-authoring-templates)</ept>。"
    },
    {
      "pos": [
        4055,
        4143
      ],
      "content": "有关锁的详细信息，请参阅<bpt id=\"p1\">[</bpt>使用 Azure 资源管理器锁定资源<ept id=\"p1\">](/documentation/articles/resource-group-lock-resources)</ept>。"
    }
  ],
  "content": "<properties\n   pageTitle=\"资源锁的资源管理器模板 | Azure\"\n   description=\"显示资源锁的资源管理器架构。\"\n   services=\"azure-resource-manager\"\n   documentationCenter=\"na\"\n   authors=\"tfitzmac\"\n   manager=\"wpickett\"\n   editor=\"\"/>\n\n<tags\n   ms.service=\"azure-resource-manager\"\n   ms.date=\"10/25/2015\"\n   wacn.date=\"12/17/2015\"/>\n\n# 资源锁 - 模板架构\n\n在资源及其子资源上创建新锁。\n\n## 架构格式\n\n若要创建锁，请将以下架构添加到模板的资源节中。\n    \n    {\n        \"type\": enum,\n        \"apiVersion\": \"2015-01-01\",\n        \"name\": string,\n        \"dependsOn\": [ array values ],\n        \"properties\":\n        {\n            \"level\": enum,\n            \"notes\": string\n        }\n    }\n\n\n\n## 值\n\n下表描述了需要在架构中设置的值。\n\n| Name | 类型 | 必选 | 允许的值 | 说明 |\n| ---- | ---- | -------- | ---------------- | ----------- |\n| type | 枚举 | 是 | 对于资源：<br />**{namespace}/{type}/providers/locks**<br /><br />对于资源组：<br />**Microsoft.Authorization/locks** | 要创建的资源类型。 |\n| apiVersion | 枚举 | 是 | **2015-01-01** | 要用于创建该资源的 API 版本。 |  \n| name | 字符串 | 是 | 对于资源：<br />**{resouce}/Microsoft.Authorization/{lockname}**<br /><br />对于资源组：<br />**{lockname}****<br /><br />最多为 64 个字符<br />不能包含 <、>、%、&、? 或任何控制字符。| 一个值，同时指定要锁定的资源和锁的名称。|\n| dependsOn | 数组 | 否 | 资源名称或资源唯一标识符的逗号分隔列表。| 此锁所依赖的资源的集合。如果要锁定的资源部署在同一模板中，请在此元素中包含该资源名称以确保该资源先部署。|\n| 属性 | 对象 | 是 |（下面显示）| 一个对象，用于标识锁的类型，以及有关锁的说明。| \n\n### 属性对象\n\n| Name | 类型 | 必选 | 允许的值 | 说明 |\n| ------- | ---- | ---------------- | -------- | ----------- |\n| 级别 | 枚举 | 是 | **CannotDelete** <br /> **ReadOnly** | 要应用于作用域的锁的类型。CanNotDelete 允许修改，但不能删除；ReadOnly 可防止修改或删除操作。 |\n| 说明 | 字符串 | 否 | 512 个字符 | 该锁的说明。 |\n\n\n## 如何使用锁资源\n\n将此资源添加到你的模板可防止对资源执行指定的操作。该锁将应用于所有用户和组。通常情况下，你只在有限的持续时间内应用锁，例如，当某个进程正在运行时，你想要确保组织中的某人不会无意中修改或删除某个资源。\n\n若要创建或删除管理锁，你必须有权访问 **Microsoft.Authorization/*** 或 **Microsoft.Authorization/locks/*** 操作。在内置角色中，只有**所有者**和**用户访问管理员**有权执行这些操作。有关基于角色的访问控制的信息，请参阅[管理对资源的访问权限](/documentation/articles/resource-group-rbac)。\n\n锁将应用于指定的资源和任何子资源。如果你将多个锁应用于一个资源，则限制性最强的锁将具有最高优先级。例如，如果你在父级（例如资源组）应用 ReadOnly 并对该组中的资源应用 CanNotDelete，则将会优先应用父级中限制性较强的锁 (ReadOnly)。\n\n你可以使用 PowerShell 命令 **Remove-AzureRmResourceLock** 或 REST API 的[删除操作](https://msdn.microsoft.com/zh-cn/library/azure/mt204562.aspx)删除锁。\n\n## 示例\n\n以下示例将只读锁应用于 Web 应用。\n\n    {\n        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n        \"contentVersion\": \"1.0.0.0\",\n        \"parameters\": {\n            \"hostingPlanName\": {\n                \"type\": \"string\"\n            }\n        },\n        \"variables\": {\n            \"siteName\": \"[concat('site',uniqueString(resourceGroup().id))]\"\n        },\n        \"resources\": [\n            {\n                \"apiVersion\": \"2015-08-01\",\n                \"name\": \"[variables('siteName')]\",\n                \"type\": \"Microsoft.Web/sites\",\n                \"location\": \"[resourceGroup().location]\",\n                \"properties\": {\n                    \"serverFarmId\": \"[parameters('hostingPlanName')]\"\n                },\n            },\n            {\n                \"type\": \"Microsoft.Web/sites/providers/locks\",\n                \"apiVersion\": \"2015-01-01\",\n                \"name\": \"[concat(variables('siteName'),'/Microsoft.Authorization/MySiteLock')]\",\n                \"dependsOn\": [ \"[variables('siteName')]\" ],\n                \"properties\":\n                {\n                    \"level\": \"ReadOnly\",\n                    \"notes\": \"my notes\"\n                }\n             }\n        ],\n        \"outputs\": {}\n    }\n\n下一个示例将只读锁应用于资源组。\n\n    {\n        \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n        \"contentVersion\": \"1.0.0.0\",\n        \"parameters\": {},\n        \"variables\": {},\n        \"resources\": [\n            {\n                \"type\": \"Microsoft.Authorization/locks\",\n                \"apiVersion\": \"2015-01-01\",\n                \"name\": \"MyGroupLock\",\n                \"properties\":\n                {\n                    \"level\": \"ReadOnly\",\n                    \"notes\": \"my notes\"\n                }\n            }\n        ],\n        \"outputs\": {}\n    }\n\n## 后续步骤\n\n- 有关模板结构的信息，请参阅[创作 Azure 资源管理器模板](/documentation/articles/resource-group-authoring-templates)。\n- 有关锁的详细信息，请参阅[使用 Azure 资源管理器锁定资源](/documentation/articles/resource-group-lock-resources)。\n\n<!---HONumber=Mooncake_1207_2015-->"
}