{"nodes":[{"content":"在 Azure Web 应用中配置 PHP | Azure","pos":[27,56]},{"content":"了解如何在 Azure 中为 Web 应用配置默认 PHP 安装或添加自定义 PHP 安装。","pos":[75,121]},{"content":"在 Azure Web 应用中配置 PHP","pos":[334,355]},{"pos":[381,383],"content":"介绍"},{"content":"本指南将向你演示如何执行以下操作：在 <bpt id=\"p1\">[</bpt>Azure Web 应用<ept id=\"p1\">](/documentation/services/web-sites/)</ept>中配置 Web 应用的内置 PHP 运行时，提供自定义 PHP 运行时，以及启用扩展。","pos":[385,497],"source":"本指南将向你演示如何执行以下操作：在 [Azure Web 应用](/documentation/services/web-sites/)中配置 Web 应用的内置 PHP 运行时，提供自定义 PHP 运行时，以及启用扩展。"},{"content":"若要使用 Azure Web 应用，请注册<bpt id=\"p1\">[</bpt>试用版<ept id=\"p1\">]</ept>。","pos":[497,524],"source":"若要使用 Azure Web 应用，请注册[试用版]。"},{"content":"若要充分利用本指南，你应先在 Azure 中创建一个 PHP Web 应用。","pos":[524,562]},{"content":"如何：更改内置 PHP 版本","pos":[567,581]},{"content":"默认情况下，将安装 PHP 5.4 并且在创建 Azure Web 应用时该版本立即可用。","pos":[582,627]},{"content":"查看可用发行版、其默认配置以及已启用的扩展的最佳方式是部署调用 <bpt id=\"p1\">[</bpt>phpinfo()<ept id=\"p1\">]</ept> 函数的脚本。","pos":[627,677],"source":"查看可用发行版、其默认配置以及已启用的扩展的最佳方式是部署调用 [phpinfo()] 函数的脚本。"},{"content":"PHP 5.5 和 PHP 5.6 也可用，但它们在默认情况下不启用。","pos":[679,714]},{"content":"若要更新 PHP 版本，请使用下列方法之一：","pos":[714,736]},{"content":"Azure 管理门户","pos":[742,752]},{"content":"浏览到 Azure 管理门户中 Web 应用的仪表板，单击“配置”。","pos":[757,791]},{"content":"Web 应用仪表板上的“配置”选项卡","pos":[800,818]},{"content":"单击“PHP 5.5”。","pos":[835,847]},{"content":"选择 PHP 版本","pos":[855,864]},{"content":"单击页面底部的“保存”。","pos":[890,902]},{"content":"保存配置设置","pos":[910,916]},{"content":"Azure PowerShell (Windows)","pos":[936,962]},{"content":"打开 Azure PowerShell 并登录到你的帐户：","pos":[967,996]},{"content":"设置 Web 应用的 PHP 版本。","pos":[1072,1090]},{"content":"现已设置 PHP 版本。","pos":[1177,1189]},{"content":"你可以确认这些设置：","pos":[1189,1199]},{"content":"Azure 命令行界面（Linux、Mac、Windows）","pos":[1278,1308]},{"pos":[1310,1350],"content":"若要使用 Azure 命令行界面，必须已在计算机上安装 <bpt id=\"p1\">**</bpt>Node.js<ept id=\"p1\">**</ept>。","source":"若要使用 Azure 命令行界面，必须已在计算机上安装 **Node.js**。"},{"content":"打开终端，并登录到你的帐户。","pos":[1355,1369]},{"content":"设置 Web 应用的 PHP 版本。","pos":[1432,1450]},{"content":"现已设置 PHP 版本。","pos":[1517,1529]},{"content":"你可以确认这些设置：","pos":[1529,1539]},{"content":"如何：更改内置 PHP 配置","pos":[1581,1595]},{"content":"对于任何内置 PHP 运行时，你都可以通过执行以下步骤更改任何配置选项。","pos":[1597,1633]},{"content":"（有关 php.ini 指令的信息，请参阅 <bpt id=\"p1\">[</bpt>php.ini 指令的列表<ept id=\"p1\">]</ept>。","pos":[1633,1671],"source":"（有关 php.ini 指令的信息，请参阅 [php.ini 指令的列表]。"},{"content":"）","pos":[1671,1672]},{"content":"更改 PHP<ph id=\"ph1\">\\_</ph>INI<ph id=\"ph2\">\\_</ph>USER、PHP<ph id=\"ph3\">\\_</ph>INI<ph id=\"ph4\">\\_</ph>PERDIR、PHP<ph id=\"ph5\">\\_</ph>INI<ph id=\"ph6\">\\_</ph>ALL 配置设置","pos":[1678,1731],"source":"更改 PHP\\_INI\\_USER、PHP\\_INI\\_PERDIR、PHP\\_INI\\_ALL 配置设置"},{"pos":[1736,1759],"content":"将 <bpt id=\"p1\">[</bpt>.user.ini<ept id=\"p1\">]</ept> 文件添加到根目录。","source":"将 [.user.ini] 文件添加到根目录。"},{"content":"使用你将在 <bpt id=\"p1\">**</bpt>php.ini<ept id=\"p1\">**</ept> 文件中使用的同一语法，将配置设置添加到 <ph id=\"ph1\">`.user.ini`</ph> 文件。","pos":[1763,1816],"source":"使用你将在 **php.ini** 文件中使用的同一语法，将配置设置添加到 `.user.ini` 文件。"},{"content":"例如，如果你希望打开 <ph id=\"ph1\">`display_errors`</ph> 设置，并将 <ph id=\"ph2\">`upload_max_filesize`</ph> 设置设为 10 分钟，你的 <ph id=\"ph3\">`.user.ini`</ph> 文件将包含此文本：","pos":[1816,1907],"source":"例如，如果你希望打开 `display_errors` 设置，并将 `upload_max_filesize` 设置设为 10 分钟，你的 `.user.ini` 文件将包含此文本："},{"content":"部署你的 Web 应用。","pos":[1998,2010]},{"content":"重新启动 Web 应用（需要进行重新启动，因为 PHP 读取 <ph id=\"ph1\">`.user.ini`</ph> 文件的频率受 <ph id=\"ph2\">`user_ini.cache_ttl`</ph> 设置的约束，该设置是一个系统级别设置且默认值为 300 秒（5 分钟）。","pos":[2014,2121],"source":"重新启动 Web 应用（需要进行重新启动，因为 PHP 读取 `.user.ini` 文件的频率受 `user_ini.cache_ttl` 设置的约束，该设置是一个系统级别设置且默认值为 300 秒（5 分钟）。"},{"content":"重新启动 Web 应用会强制 PHP 读取 <ph id=\"ph1\">`.user.ini`</ph> 文件中的新设置。","pos":[2121,2163],"source":"重新启动 Web 应用会强制 PHP 读取 `.user.ini` 文件中的新设置。"},{"content":"）","pos":[2163,2164]},{"pos":[2166,2233],"content":"作为使用 <ph id=\"ph1\">`.user.ini`</ph> 文件的替代方法，你可以使用脚本中的 <bpt id=\"p1\">[</bpt>ini<ph id=\"ph2\">\\_</ph>set()<ept id=\"p1\">]</ept> 函数来设置不是系统级别指令的配置选项。","source":"作为使用 `.user.ini` 文件的替代方法，你可以使用脚本中的 [ini\\_set()] 函数来设置不是系统级别指令的配置选项。"},{"content":"更改 PHP<ph id=\"ph1\">\\_</ph>INI<ph id=\"ph2\">\\_</ph>SYSTEM 配置设置","pos":[2239,2263],"source":"更改 PHP\\_INI\\_SYSTEM 配置设置"},{"pos":[2268,2335],"content":"使用键 <ph id=\"ph1\">`PHP_INI_SCAN_DIR`</ph> 和值 <bpt id=\"p1\">**</bpt>d:<ph id=\"ph2\">\\\\</ph>home<ph id=\"ph3\">\\\\</ph>site<ph id=\"ph4\">\\\\</ph>ini<ept id=\"p1\">**</ept> 将应用设置添加到你的 Web 应用","source":"使用键 `PHP_INI_SCAN_DIR` 和值 **d:\\\\home\\\\site\\\\ini** 将应用设置添加到你的 Web 应用"},{"pos":[2339,2396],"content":"使用 FTP 在 <bpt id=\"p1\">**</bpt>d:<ph id=\"ph1\">\\\\</ph>home<ph id=\"ph2\">\\\\</ph>site<ph id=\"ph3\">\\\\</ph>ini<ept id=\"p1\">**</ept> 目录中创建 <ph id=\"ph4\">`settings.ini`</ph> 文件。","source":"使用 FTP 在 **d:\\\\home\\\\site\\\\ini** 目录中创建 `settings.ini` 文件。"},{"content":"使用你将在 php.ini 文件中使用的语法，将配置设置添加到 <ph id=\"ph1\">`settings.ini`</ph> 文件。","pos":[2400,2450],"source":"使用你将在 php.ini 文件中使用的语法，将配置设置添加到 `settings.ini` 文件。"},{"content":"例如，如果你希望将 <ph id=\"ph1\">`curl.cainfo`</ph> 设置指向 <ph id=\"ph2\">`*.crt`</ph> 文件并将“wincache.maxfilesize”设置为 512K，则 <ph id=\"ph3\">`settings.ini`</ph> 文件将包含此文本：","pos":[2450,2548],"source":"例如，如果你希望将 `curl.cainfo` 设置指向 `*.crt` 文件并将“wincache.maxfilesize”设置为 512K，则 `settings.ini` 文件将包含此文本："},{"content":"重新启动 Web 应用以加载更改。","pos":[2682,2699]},{"content":"如何：在默认 PHP 运行时中启用扩展","pos":[2704,2723]},{"content":"如上一部分所述，查看默认 PHP 版本、其默认配置以及已启用的扩展的最佳方式是部署调用 <bpt id=\"p1\">[</bpt>phpinfo()<ept id=\"p1\">]</ept> 的脚本。","pos":[2724,2784],"source":"如上一部分所述，查看默认 PHP 版本、其默认配置以及已启用的扩展的最佳方式是部署调用 [phpinfo()] 的脚本。"},{"content":"若要启用其他扩展，请执行下列步骤：","pos":[2784,2801]},{"content":"通过 ini 设置进行配置","pos":[2807,2820]},{"pos":[2825,2861],"content":"将 <ph id=\"ph1\">`ext`</ph> 目录添加到 <bpt id=\"p1\">**</bpt>d:<ph id=\"ph2\">\\\\</ph>home<ph id=\"ph3\">\\\\</ph>site<ept id=\"p1\">**</ept> 目录。","source":"将 `ext` 目录添加到 **d:\\\\home\\\\site** 目录。"},{"content":"将 <ph id=\"ph1\">`.dll`</ph> 扩展文件置于 <ph id=\"ph2\">`ext`</ph> 目录中（例如 <bpt id=\"p1\">**</bpt>php<ph id=\"ph3\">\\_</ph>mongo.dll<ept id=\"p1\">**</ept> 和 <bpt id=\"p2\">**</bpt>php<ph id=\"ph4\">\\_</ph>xdebug.dll<ept id=\"p2\">**</ept>）。","pos":[2865,2936],"source":"将 `.dll` 扩展文件置于 `ext` 目录中（例如 **php\\_mongo.dll** 和 **php\\_xdebug.dll**）。"},{"content":"确保扩展与默认版本的 PHP（撰写本文时为 PHP 5.4）兼容，并且是 VC9 版本且与非线程安全 (nts) 兼容。","pos":[2936,2996]},{"pos":[3000,3072],"content":"使用键 <bpt id=\"p1\">**</bpt>PHP<ph id=\"ph1\">\\_</ph>INI<ph id=\"ph2\">\\_</ph>SCAN<ph id=\"ph3\">\\_</ph>DIR<ept id=\"p1\">**</ept> 和值 <bpt id=\"p2\">**</bpt>d:<ph id=\"ph4\">\\\\</ph>home<ph id=\"ph5\">\\\\</ph>site<ph id=\"ph6\">\\\\</ph>ini<ept id=\"p2\">**</ept> 将应用设置添加到你的 Web 应用","source":"使用键 **PHP\\_INI\\_SCAN\\_DIR** 和值 **d:\\\\home\\\\site\\\\ini** 将应用设置添加到你的 Web 应用"},{"pos":[3076,3140],"content":"在 <bpt id=\"p1\">**</bpt>d:<ph id=\"ph1\">\\\\</ph>home<ph id=\"ph2\">\\\\</ph>site<ph id=\"ph3\">\\\\</ph>ini<ept id=\"p1\">**</ept> 中创建一个名为 <ph id=\"ph4\">`extensions.ini`</ph> 的 <bpt id=\"p2\">**</bpt>ini<ept id=\"p2\">**</ept> 文件。","source":"在 **d:\\\\home\\\\site\\\\ini** 中创建一个名为 `extensions.ini` 的 **ini** 文件。"},{"content":"使用你将在 php.ini 文件中使用的语法，将配置设置添加到 <ph id=\"ph1\">`extensions.ini`</ph> 文件。","pos":[3144,3196],"source":"使用你将在 php.ini 文件中使用的语法，将配置设置添加到 `extensions.ini` 文件。"},{"content":"例如，如果你想要启用 MongoDB 和 XDebug 扩展，则 <ph id=\"ph1\">`extensions.ini`</ph> 文件将包含此文本：","pos":[3196,3255],"source":"例如，如果你想要启用 MongoDB 和 XDebug 扩展，则 `extensions.ini` 文件将包含此文本："},{"content":"重新启动 Web 应用以加载更改。","pos":[3392,3409]},{"content":"通过应用设置进行配置","pos":[3415,3425]},{"pos":[3430,3447],"content":"将 <ph id=\"ph1\">`bin`</ph> 目录添加到根目录。","source":"将 `bin` 目录添加到根目录。"},{"content":"将 <ph id=\"ph1\">`.dll`</ph> 扩展文件置于 <ph id=\"ph2\">`bin`</ph> 目录中（例如 <bpt id=\"p1\">**</bpt>php<ph id=\"ph3\">\\_</ph>mongo.dll<ept id=\"p1\">**</ept>）。","pos":[3451,3500],"source":"将 `.dll` 扩展文件置于 `bin` 目录中（例如 **php\\_mongo.dll**）。"},{"content":"确保扩展与默认版本的 PHP（撰写本文时为 PHP 5.4）兼容，并且是 VC9 版本且与非线程安全 (nts) 兼容。","pos":[3500,3560]},{"content":"部署你的 Web 应用。","pos":[3564,3576]},{"content":"导航到 Azure 管理门户中站点的仪表板，然后单击“配置”。","pos":[3581,3612]},{"content":"Web 应用仪表板上的“配置”选项卡","pos":[3621,3639]},{"content":"在“应用设置”部分，创建密钥 <bpt id=\"p1\">**</bpt>PHP<ph id=\"ph1\">\\_</ph>EXTENSIONS<ept id=\"p1\">**</ept> 和值 <bpt id=\"p2\">**</bpt>bin<ph id=\"ph2\">\\\\</ph>your-ext-file<ept id=\"p2\">**</ept>。","pos":[3656,3717],"source":"在“应用设置”部分，创建密钥 **PHP\\_EXTENSIONS** 和值 **bin\\\\your-ext-file**。"},{"content":"若要启用多个扩展，请包括 <ph id=\"ph1\">`.dll`</ph> 文件的逗号分隔列表。","pos":[3717,3747],"source":"若要启用多个扩展，请包括 `.dll` 文件的逗号分隔列表。"},{"content":"启用应用程序设置中的扩展","pos":[3755,3767]},{"content":"单击页面底部的“保存”。","pos":[3787,3799]},{"content":"保存配置设置","pos":[3807,3813]},{"content":"通过使用 <bpt id=\"p1\">**</bpt>PHP<ph id=\"ph1\">\\_</ph>ZENDEXTENSIONS<ept id=\"p1\">**</ept> 键也支持 Zend 扩展。","pos":[3829,3871],"source":"通过使用 **PHP\\_ZENDEXTENSIONS** 键也支持 Zend 扩展。"},{"content":"若要启用多个扩展，请包括应用设置值的 <ph id=\"ph1\">`.dll`</ph> 文件的逗号分隔列表。","pos":[3871,3907],"source":"若要启用多个扩展，请包括应用设置值的 `.dll` 文件的逗号分隔列表。"},{"pos":[3940,3956],"content":"如何：使用自定义 PHP 运行时"},{"content":"Azure Web 应用可以使用提供的 PHP 运行时（而非默认 PHP 运行时）来执行 PHP 脚本。","pos":[3957,4009]},{"content":"提供的运行时可由同时提供的 <bpt id=\"p1\">**</bpt>php.ini<ept id=\"p1\">**</ept> 文件配置。","pos":[4009,4040],"source":"提供的运行时可由同时提供的 **php.ini** 文件配置。"},{"content":"若要在 Web 应用中使用自定义 PHP 运行时，请执行下列步骤。","pos":[4040,4073]},{"content":"获取非线程安全、VC9 或 VC11 兼容版本的 PHP for Windows。","pos":[4078,4119]},{"content":"可在此处找到 PHP for Windows 最新版本：<bpt id=\"p1\">[</bpt>http://windows.php.net/download/<ept id=\"p1\">]</ept>。","pos":[4119,4182],"source":"可在此处找到 PHP for Windows 最新版本：[http://windows.php.net/download/]。"},{"content":"可在此处的存档中找到旧版本：<bpt id=\"p1\">[</bpt>http://windows.php.net/downloads/releases/archives/<ept id=\"p1\">]</ept>。","pos":[4182,4250],"source":"可在此处的存档中找到旧版本：[http://windows.php.net/downloads/releases/archives/]。"},{"content":"修改运行时的 <bpt id=\"p1\">**</bpt>php.ini<ept id=\"p1\">**</ept> 文件。","pos":[4254,4276],"source":"修改运行时的 **php.ini** 文件。"},{"content":"请注意， Web 应用将忽略作为任何仅在系统级别使用的指令的配置设置。","pos":[4276,4311]},{"content":"（有关仅在系统级别使用的指令的信息，请参阅 <bpt id=\"p1\">[</bpt>php.ini 指令的列表<ept id=\"p1\">]</ept>。","pos":[4311,4349],"source":"（有关仅在系统级别使用的指令的信息，请参阅 [php.ini 指令的列表]。"},{"content":"）","pos":[4349,4350]},{"pos":[4354,4397],"content":"（可选）将扩展添加到 PHP 运行时并在 <bpt id=\"p1\">**</bpt>php.ini<ept id=\"p1\">**</ept> 文件中启用这些扩展。","source":"（可选）将扩展添加到 PHP 运行时并在 **php.ini** 文件中启用这些扩展。"},{"pos":[4401,4454],"content":"将 <ph id=\"ph1\">`bin`</ph> 目录添加到根目录，并将包含 PHP 运行时的目录置于该目录中（例如 <ph id=\"ph2\">`bin\\php`</ph>）。","source":"将 `bin` 目录添加到根目录，并将包含 PHP 运行时的目录置于该目录中（例如 `bin\\php`）。"},{"content":"部署你的 Web 应用。","pos":[4458,4470]},{"content":"导航到 Azure 管理门户中站点的仪表板，然后单击“配置”。","pos":[4474,4505]},{"content":"Web 应用仪表板上的“配置”选项卡","pos":[4514,4532]},{"content":"在“处理程序映射”部分中，将 <ph id=\"ph1\">`*.php`</ph> 添加到 EXTENSION，并添加指向 <bpt id=\"p1\">**</bpt>php-cgi.exe<ept id=\"p1\">**</ept> 可执行文件的路径。","pos":[4549,4617],"source":"在“处理程序映射”部分中，将 `*.php` 添加到 EXTENSION，并添加指向 **php-cgi.exe** 可执行文件的路径。"},{"content":"如果你将 PHP 运行时放在应用程序的根目录中的 <ph id=\"ph1\">`bin`</ph> 目录下，路径将为 <ph id=\"ph2\">`D:\\home\\site\\wwwroot\\bin\\php\\php-cgi.exe`</ph>。","pos":[4617,4700],"source":"如果你将 PHP 运行时放在应用程序的根目录中的 `bin` 目录下，路径将为 `D:\\home\\site\\wwwroot\\bin\\php\\php-cgi.exe`。"},{"content":"指定处理程序映射中的处理程序","pos":[4708,4722]},{"content":"单击页面底部的“保存”。","pos":[4746,4758]},{"content":"保存配置设置","pos":[4766,4772]},{"content":"试用版","pos":[5265,5268]},{"content":"phpinfo()","pos":[5293,5302]},{"content":"php.ini 指令的列表","pos":[5429,5442]},{"content":".user.ini","pos":[5488,5497]},{"content":"ini<ph id=\"ph1\">\\_</ph>set()","pos":[5562,5572],"source":"ini\\_set()"},{"content":"http://windows.php.net/download/","pos":[5983,6015]},{"content":"http://windows.php.net/downloads/releases/archives/","pos":[6052,6103]}],"content":"<properties\n    pageTitle=\"在 Azure Web 应用中配置 PHP | Azure\"\n    description=\"了解如何在 Azure 中为 Web 应用配置默认 PHP 安装或添加自定义 PHP 安装。\"\n    services=\"app-service\"\n    documentationCenter=\"php\"\n    authors=\"tfitzmac\"\n    manager=\"wpickett\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"app-service\"\n    ms.date=\"12/16/2015\"\n    wacn.date=\"01/29/2016\"/>\n\n#在 Azure Web 应用中配置 PHP\n\n##<a name=\"WhatIs\"></a> 介绍\n\n本指南将向你演示如何执行以下操作：在 [Azure Web 应用](/documentation/services/web-sites/)中配置 Web 应用的内置 PHP 运行时，提供自定义 PHP 运行时，以及启用扩展。若要使用 Azure Web 应用，请注册[试用版]。若要充分利用本指南，你应先在 Azure 中创建一个 PHP Web 应用。\n\n## 如何：更改内置 PHP 版本\n默认情况下，将安装 PHP 5.4 并且在创建 Azure Web 应用时该版本立即可用。查看可用发行版、其默认配置以及已启用的扩展的最佳方式是部署调用 [phpinfo()] 函数的脚本。\n\nPHP 5.5 和 PHP 5.6 也可用，但它们在默认情况下不启用。若要更新 PHP 版本，请使用下列方法之一：\n\n### Azure 管理门户\n\n1. 浏览到 Azure 管理门户中 Web 应用的仪表板，单击“配置”。\n\n    ![ Web 应用仪表板上的“配置”选项卡][configure]\n\n1. 单击“PHP 5.5”。\n\n    ![选择 PHP 版本][select-php-version]\n\n1. 单击页面底部的“保存”。\n\n    ![保存配置设置][save-button]\n\n### Azure PowerShell (Windows)\n\n1. 打开 Azure PowerShell 并登录到你的帐户：\n\n        PS C:\\> Login-AzureRmAccount -EnvironmentName AzureChinaCloud\n\n2. 设置 Web 应用的 PHP 版本。\n\n        PS C:\\> Set-AzureWebsite -PhpVersion [5.4 | 5.5 | 5.6] -Name {site-name}\n\n3. 现已设置 PHP 版本。你可以确认这些设置：\n\n        PS C:\\> Get-AzureWebsite -Name {site-name} | findstr PhpVersion\n\n### Azure 命令行界面（Linux、Mac、Windows）\n\n若要使用 Azure 命令行界面，必须已在计算机上安装 **Node.js**。\n\n1. 打开终端，并登录到你的帐户。\n\n        azure login -e AzureChinaCloud -u <your account>\n\n2. 设置 Web 应用的 PHP 版本。\n\n        azure site set --php-version [5.4 | 5.5] {site-name}\n\n3. 现已设置 PHP 版本。你可以确认这些设置：\n\n        azure site show {site-name}\n\n## 如何：更改内置 PHP 配置\n\n对于任何内置 PHP 运行时，你都可以通过执行以下步骤更改任何配置选项。（有关 php.ini 指令的信息，请参阅 [php.ini 指令的列表]。）\n\n### 更改 PHP\\_INI\\_USER、PHP\\_INI\\_PERDIR、PHP\\_INI\\_ALL 配置设置\n\n1. 将 [.user.ini] 文件添加到根目录。\n2. 使用你将在 **php.ini** 文件中使用的同一语法，将配置设置添加到 `.user.ini` 文件。例如，如果你希望打开 `display_errors` 设置，并将 `upload_max_filesize` 设置设为 10 分钟，你的 `.user.ini` 文件将包含此文本：\n\n        ; Example Settings\n        display_errors=On\n        upload_max_filesize=10M\n\n3. 部署你的 Web 应用。\n4. 重新启动 Web 应用（需要进行重新启动，因为 PHP 读取 `.user.ini` 文件的频率受 `user_ini.cache_ttl` 设置的约束，该设置是一个系统级别设置且默认值为 300 秒（5 分钟）。重新启动 Web 应用会强制 PHP 读取 `.user.ini` 文件中的新设置。）\n\n作为使用 `.user.ini` 文件的替代方法，你可以使用脚本中的 [ini\\_set()] 函数来设置不是系统级别指令的配置选项。\n\n### 更改 PHP\\_INI\\_SYSTEM 配置设置\n\n1. 使用键 `PHP_INI_SCAN_DIR` 和值 **d:\\\\home\\\\site\\\\ini** 将应用设置添加到你的 Web 应用\n2. 使用 FTP 在 **d:\\\\home\\\\site\\\\ini** 目录中创建 `settings.ini` 文件。\n3. 使用你将在 php.ini 文件中使用的语法，将配置设置添加到 `settings.ini` 文件。例如，如果你希望将 `curl.cainfo` 设置指向 `*.crt` 文件并将“wincache.maxfilesize”设置为 512K，则 `settings.ini` 文件将包含此文本：\n\n        ; Example Settings\n        curl.cainfo=\"%ProgramFiles(x86)%\\Git\\bin\\curl-ca-bundle.crt\"\n        wincache.maxfilesize=512\n4. 重新启动 Web 应用以加载更改。\n\n## 如何：在默认 PHP 运行时中启用扩展\n如上一部分所述，查看默认 PHP 版本、其默认配置以及已启用的扩展的最佳方式是部署调用 [phpinfo()] 的脚本。若要启用其他扩展，请执行下列步骤：\n\n### 通过 ini 设置进行配置\n\n1. 将 `ext` 目录添加到 **d:\\\\home\\\\site** 目录。\n2. 将 `.dll` 扩展文件置于 `ext` 目录中（例如 **php\\_mongo.dll** 和 **php\\_xdebug.dll**）。确保扩展与默认版本的 PHP（撰写本文时为 PHP 5.4）兼容，并且是 VC9 版本且与非线程安全 (nts) 兼容。\n3. 使用键 **PHP\\_INI\\_SCAN\\_DIR** 和值 **d:\\\\home\\\\site\\\\ini** 将应用设置添加到你的 Web 应用\n4. 在 **d:\\\\home\\\\site\\\\ini** 中创建一个名为 `extensions.ini` 的 **ini** 文件。\n5. 使用你将在 php.ini 文件中使用的语法，将配置设置添加到 `extensions.ini` 文件。例如，如果你想要启用 MongoDB 和 XDebug 扩展，则 `extensions.ini` 文件将包含此文本：\n\n        ; Enable Extensions\n        extension=d:\\home\\site\\ext\\php_mongo.dll\n        zend_extension=d:\\home\\site\\ext\\php_xdebug.dll\n6. 重新启动 Web 应用以加载更改。\n\n### 通过应用设置进行配置\n\n1. 将 `bin` 目录添加到根目录。\n2. 将 `.dll` 扩展文件置于 `bin` 目录中（例如 **php\\_mongo.dll**）。确保扩展与默认版本的 PHP（撰写本文时为 PHP 5.4）兼容，并且是 VC9 版本且与非线程安全 (nts) 兼容。\n3. 部署你的 Web 应用。\n\n1. 导航到 Azure 管理门户中站点的仪表板，然后单击“配置”。\n\n    ![ Web 应用仪表板上的“配置”选项卡][configure]\n\n1. 在“应用设置”部分，创建密钥 **PHP\\_EXTENSIONS** 和值 **bin\\\\your-ext-file**。若要启用多个扩展，请包括 `.dll` 文件的逗号分隔列表。\n\n    ![启用应用程序设置中的扩展][app-settings]\n\n1. 单击页面底部的“保存”。\n\n    ![保存配置设置][save-button]\n\n通过使用 **PHP\\_ZENDEXTENSIONS** 键也支持 Zend 扩展。若要启用多个扩展，请包括应用设置值的 `.dll` 文件的逗号分隔列表。\n\n\n##<a name=\"UseCustomPHP\"></a> 如何：使用自定义 PHP 运行时\nAzure Web 应用可以使用提供的 PHP 运行时（而非默认 PHP 运行时）来执行 PHP 脚本。提供的运行时可由同时提供的 **php.ini** 文件配置。若要在 Web 应用中使用自定义 PHP 运行时，请执行下列步骤。\n\n1. 获取非线程安全、VC9 或 VC11 兼容版本的 PHP for Windows。可在此处找到 PHP for Windows 最新版本：[http://windows.php.net/download/]。可在此处的存档中找到旧版本：[http://windows.php.net/downloads/releases/archives/]。\n2. 修改运行时的 **php.ini** 文件。请注意， Web 应用将忽略作为任何仅在系统级别使用的指令的配置设置。（有关仅在系统级别使用的指令的信息，请参阅 [php.ini 指令的列表]。）\n3. （可选）将扩展添加到 PHP 运行时并在 **php.ini** 文件中启用这些扩展。\n4. 将 `bin` 目录添加到根目录，并将包含 PHP 运行时的目录置于该目录中（例如 `bin\\php`）。\n5. 部署你的 Web 应用。\n1. 导航到 Azure 管理门户中站点的仪表板，然后单击“配置”。\n\n    ![ Web 应用仪表板上的“配置”选项卡][configure]\n\n1. 在“处理程序映射”部分中，将 `*.php` 添加到 EXTENSION，并添加指向 **php-cgi.exe** 可执行文件的路径。如果你将 PHP 运行时放在应用程序的根目录中的 `bin` 目录下，路径将为 `D:\\home\\site\\wwwroot\\bin\\php\\php-cgi.exe`。\n\n    ![指定处理程序映射中的处理程序][handler-mappings]\n\n1. 单击页面底部的“保存”。\n\n    ![保存配置设置][save-button]\n\n[PHP Developer Center Tutorials]: /develop/php/\n[How to Configure  Websites]: /documentation/articles/web-sites-configure\n[configure]: ./media/web-sites-php-configure/configure.png\n[app-settings]: ./media/web-sites-php-configure/app-settings.png\n[handler-mappings]: ./media/web-sites-php-configure/handler-mappings.png\n[Configure, monitor, and scale your  Websites in Azure]: /zh-cn/documentation/services/web-sites\n[Download the Azure SDK for PHP]: /zh-cn/downloads/?sdk=php\n[试用版]: /pricing/1rmb-trial/\n[phpinfo()]: http://php.net/manual/en/function.phpinfo.php\n[select-php-version]: ./media/web-sites-php-configure/select-php-version.png\n[php.ini 指令的列表]: http://www.php.net/manual/en/ini.list.php\n[.user.ini]: http://www.php.net/manual/en/configuration.file.per-user.php\n[ini\\_set()]: http://www.php.net/manual/en/function.ini-set.php\n[application-settings]: ./media/web-sites-php-configure/application-settings.png\n[settings-button]: ./media/web-sites-php-configure/settings-button.png\n[save-button]: ./media/web-sites-php-configure/save-button.png\n[php-extensions]: ./media/web-sites-php-configure/php-extensions.png\n[handler-mappings]: ./media/web-sites-php-configure/handler-mappings.png\n[http://windows.php.net/download/]: http://windows.php.net/download/\n[http://windows.php.net/downloads/releases/archives/]: http://windows.php.net/downloads/releases/archives/\n[SETPHPVERCLI]: ./media/web-sites-php-configure/ChangePHPVersion-XPlatCLI.png\n[GETPHPVERCLI]: ./media/web-sites-php-configure/ShowPHPVersion-XplatCLI.png\n[SETPHPVERPS]: ./media/web-sites-php-configure/ChangePHPVersion-PS.png\n[GETPHPVERPS]: ./media/web-sites-php-configure/ShowPHPVersion-PS.png\n \n\n<!---HONumber=Mooncake_0118_2016-->"}