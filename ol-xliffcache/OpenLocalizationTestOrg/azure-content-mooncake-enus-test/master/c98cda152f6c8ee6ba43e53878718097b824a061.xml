{
  "nodes": [
    {
      "content": "Azure 应用程序网关的运行状况监视概述 | Azure",
      "pos": [
        28,
        57
      ]
    },
    {
      "content": "了解 Azure 应用程序网关中的监视功能",
      "pos": [
        75,
        96
      ]
    },
    {
      "content": "应用程序网关运行状况监视概述",
      "pos": [
        350,
        364
      ]
    },
    {
      "content": "默认情况下，Azure 应用程序网关会监视其后端池中所有资源的运行状况，并自动从池中删除任何被视为不正常的资源。应用程序网关持续监视不正常的实例，一旦这些实例恢复可用状态并能响应运行状况探测，应用程序网关就会将它们添加回到正常的后端池中。",
      "pos": [
        367,
        486
      ]
    },
    {
      "content": "除了使用默认的运行状况探测监视以外，还可以根据应用程序的要求自定义运行状况探测。本文将介绍默认和自定义的运行状况探测。",
      "pos": [
        488,
        547
      ]
    },
    {
      "content": "默认的运行状况探测",
      "pos": [
        552,
        561
      ]
    },
    {
      "content": "如果你未设置任何自定义探测配置，应用程序网关将自动配置默认运行状况探测。监视行为是向针对后端池配置的 IP 地址发出 HTTP 请求。",
      "pos": [
        563,
        630
      ]
    },
    {
      "pos": [
        632,
        813
      ],
      "content": "例如：你将应用程序网关配置为使用 A、B 和 C 后端服务器来接收端口 80 上的 HTTP 网络流量。默认运行状况监视每隔 30 秒对三台服务器进行测试，以获取正常的 HTTP 响应。正常的 HTTP 响应具有 200 到 399 的<bpt id=\"p1\">[</bpt>状态代码<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/aa287675.aspx)</ept>。"
    },
    {
      "content": "如果服务器 A 的默认探测检查失败，应用程序网关会从后端池删除该服务器，并且网络流量不再流向此服务器。默认探测仍继续每隔 30 秒检查服务器 A。当服务器 A 成功响应默认运行状况探测发出的请求时，将变为正常状态并重新加回到后端池，而流量也开始再次流向该服务器。",
      "pos": [
        815,
        946
      ]
    },
    {
      "content": "默认探测只查看 http://127.0.0.1:",
      "pos": [
        948,
        973
      ]
    },
    {
      "content": "来判断运行状况。如果需要配置运行状况探测以使其转到自定义 URL 或修改任何其他设置，你必须使用如下所述的自定义探测。",
      "pos": [
        980,
        1039
      ]
    },
    {
      "content": "默认的运行状况探测设置",
      "pos": [
        1045,
        1056
      ]
    },
    {
      "content": "探测属性",
      "pos": [
        1059,
        1063
      ]
    },
    {
      "content": "值",
      "pos": [
        1066,
        1067
      ]
    },
    {
      "content": "说明",
      "pos": [
        1070,
        1072
      ]
    },
    {
      "content": "探测 URL",
      "pos": [
        1090,
        1096
      ]
    },
    {
      "content": "http://127.0.0.1/",
      "pos": [
        1098,
        1115
      ]
    },
    {
      "content": "URL 路径",
      "pos": [
        1118,
        1124
      ]
    },
    {
      "content": "时间间隔",
      "pos": [
        1129,
        1133
      ]
    },
    {
      "content": "30",
      "pos": [
        1136,
        1138
      ]
    },
    {
      "content": "探测间隔（秒）",
      "pos": [
        1141,
        1148
      ]
    },
    {
      "content": "超时",
      "pos": [
        1153,
        1155
      ]
    },
    {
      "content": "30",
      "pos": [
        1158,
        1160
      ]
    },
    {
      "content": "探测超时（秒）",
      "pos": [
        1163,
        1170
      ]
    },
    {
      "content": "不正常阈值",
      "pos": [
        1175,
        1180
      ]
    },
    {
      "content": "3",
      "pos": [
        1183,
        1184
      ]
    },
    {
      "content": "探测重试计数。连续探测失败计数达到不正常阈值后，将后端服务器标记为故障。",
      "pos": [
        1187,
        1223
      ]
    },
    {
      "content": "自定义的运行状况探测",
      "pos": [
        1231,
        1241
      ]
    },
    {
      "content": "自定义探测可让你更精细地控制运行状况监视。使用自定义探测时，你可以配置探测间隔、要测试的 URL 和路径，以及在将后端池实例标记为不正常之前可接受的失败响应次数。",
      "pos": [
        1243,
        1324
      ]
    },
    {
      "content": "自定义的运行状况探测设置",
      "pos": [
        1331,
        1343
      ]
    },
    {
      "content": "探测属性",
      "pos": [
        1346,
        1350
      ]
    },
    {
      "content": "说明",
      "pos": [
        1352,
        1354
      ]
    },
    {
      "content": "Name",
      "pos": [
        1368,
        1372
      ]
    },
    {
      "content": "探测的名称。此名称用于在后端 HTTP 设置中引用探测。",
      "pos": [
        1375,
        1403
      ]
    },
    {
      "content": "协议",
      "pos": [
        1408,
        1410
      ]
    },
    {
      "content": "用于发送探测的协议。HTTP 是唯一有效的协议。",
      "pos": [
        1413,
        1437
      ]
    },
    {
      "content": "主机",
      "pos": [
        1442,
        1444
      ]
    },
    {
      "content": "用于发送探测的主机名。",
      "pos": [
        1447,
        1458
      ]
    },
    {
      "content": "路径",
      "pos": [
        1463,
        1465
      ]
    },
    {
      "content": "探测的相对路径。有效路径以“/”开头。探测将发送到",
      "pos": [
        1468,
        1493
      ]
    },
    {
      "content": "://",
      "pos": [
        1504,
        1507
      ]
    },
    {
      "content": ":",
      "pos": [
        1513,
        1514
      ]
    },
    {
      "content": "时间间隔",
      "pos": [
        1531,
        1535
      ]
    },
    {
      "content": "探测间隔（秒）。这是每两次连续探测之间的时间间隔。",
      "pos": [
        1538,
        1563
      ]
    },
    {
      "content": "超时",
      "pos": [
        1567,
        1569
      ]
    },
    {
      "content": "探测超时（秒）。如果在此超时期间内未收到有效响应，则将探测标记为失败。",
      "pos": [
        1572,
        1607
      ]
    },
    {
      "content": "不正常阈值",
      "pos": [
        1612,
        1617
      ]
    },
    {
      "content": "探测重试计数。连续探测失败计数达到不正常阈值后，将后端服务器标记为故障。",
      "pos": [
        1620,
        1656
      ]
    },
    {
      "content": "后续步骤",
      "pos": [
        1663,
        1667
      ]
    },
    {
      "pos": [
        1669,
        1877
      ],
      "content": "在了解应用程序网关的运行状况监视之后，可以为 Azure 资源管理器配置<bpt id=\"p1\">[</bpt>自定义运行状况探测<ept id=\"p1\">](/documentation/articles/application-gateway-create-probe-ps)</ept>，或者为 Azure 经典部署模型配置<bpt id=\"p2\">[</bpt>自定义运行状况探测<ept id=\"p2\">](/documentation/articles/application-gateway-create-probe-classic-ps)</ept>。"
    }
  ],
  "content": "\n\n<properties\n   pageTitle=\"Azure 应用程序网关的运行状况监视概述 | Azure\"\n   description=\"了解 Azure 应用程序网关中的监视功能\"\n   services=\"application-gateway\"\n   documentationCenter=\"na\"\n   authors=\"joaoma\"\n   manager=\"carmonm\"\n   editor=\"\"\n   tags=\"azure-resource-manager\"\n/>\n<tags  \n   ms.service=\"application-gateway\"\n   ms.date=\"12/17/2015\"\n   wacn.date=\"02/26/2016\" />\n\n# 应用程序网关运行状况监视概述\n\n\n默认情况下，Azure 应用程序网关会监视其后端池中所有资源的运行状况，并自动从池中删除任何被视为不正常的资源。应用程序网关持续监视不正常的实例，一旦这些实例恢复可用状态并能响应运行状况探测，应用程序网关就会将它们添加回到正常的后端池中。\n\n除了使用默认的运行状况探测监视以外，还可以根据应用程序的要求自定义运行状况探测。本文将介绍默认和自定义的运行状况探测。\n\n## 默认的运行状况探测\n\n如果你未设置任何自定义探测配置，应用程序网关将自动配置默认运行状况探测。监视行为是向针对后端池配置的 IP 地址发出 HTTP 请求。\n\n例如：你将应用程序网关配置为使用 A、B 和 C 后端服务器来接收端口 80 上的 HTTP 网络流量。默认运行状况监视每隔 30 秒对三台服务器进行测试，以获取正常的 HTTP 响应。正常的 HTTP 响应具有 200 到 399 的[状态代码](https://msdn.microsoft.com/zh-cn/library/aa287675.aspx)。\n\n如果服务器 A 的默认探测检查失败，应用程序网关会从后端池删除该服务器，并且网络流量不再流向此服务器。默认探测仍继续每隔 30 秒检查服务器 A。当服务器 A 成功响应默认运行状况探测发出的请求时，将变为正常状态并重新加回到后端池，而流量也开始再次流向该服务器。\n\n默认探测只查看 http://127.0.0.1:<port> 来判断运行状况。如果需要配置运行状况探测以使其转到自定义 URL 或修改任何其他设置，你必须使用如下所述的自定义探测。\n\n### 默认的运行状况探测设置\n\n|探测属性 | 值 | 说明|\n|---|---|---|\n| 探测 URL| http://127.0.0.1/ | URL 路径 |\n| 时间间隔 | 30 | 探测间隔（秒） |\n| 超时 | 30 | 探测超时（秒） |\n| 不正常阈值 | 3 | 探测重试计数。连续探测失败计数达到不正常阈值后，将后端服务器标记为故障。 |\n\n\n## 自定义的运行状况探测\n\n自定义探测可让你更精细地控制运行状况监视。使用自定义探测时，你可以配置探测间隔、要测试的 URL 和路径，以及在将后端池实例标记为不正常之前可接受的失败响应次数。\n\n\n### 自定义的运行状况探测设置\n\n|探测属性| 说明|\n|---|---|\n| Name | 探测的名称。此名称用于在后端 HTTP 设置中引用探测。 |\n| 协议 | 用于发送探测的协议。HTTP 是唯一有效的协议。 |\n| 主机 | 用于发送探测的主机名。 |\n| 路径 | 探测的相对路径。有效路径以“/”开头。探测将发送到 <protocol>://<host>:<port><path> |\n| 时间间隔 | 探测间隔（秒）。这是每两次连续探测之间的时间间隔。|\n| 超时 | 探测超时（秒）。如果在此超时期间内未收到有效响应，则将探测标记为失败。 |\n| 不正常阈值 | 探测重试计数。连续探测失败计数达到不正常阈值后，将后端服务器标记为故障。 |\n\n## 后续步骤\n\n在了解应用程序网关的运行状况监视之后，可以为 Azure 资源管理器配置[自定义运行状况探测](/documentation/articles/application-gateway-create-probe-ps)，或者为 Azure 经典部署模型配置[自定义运行状况探测](/documentation/articles/application-gateway-create-probe-classic-ps)。\n\n<!---HONumber=Mooncake_0215_2016-->\n"
}