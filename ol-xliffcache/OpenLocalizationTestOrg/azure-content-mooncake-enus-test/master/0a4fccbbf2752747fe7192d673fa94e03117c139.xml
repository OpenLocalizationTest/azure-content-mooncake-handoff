{
  "nodes": [
    {
      "content": "Azure SQL 数据库 T-SQL 不支持的语句 | Azure",
      "pos": [
        26,
        60
      ]
    },
    {
      "content": "在 Azure SQL 数据库中不完全支持的 Transact-SQL 语句",
      "pos": [
        78,
        116
      ]
    },
    {
      "content": "Azure SQL 数据库 Transact-SQL 的差异",
      "pos": [
        329,
        359
      ]
    },
    {
      "content": "Microsoft SQL Server 和 Azure SQL 数据库都支持应用程序依赖的大多数 Transact-SQL 功能。下面是应用程序支持的功能的不完整列表：",
      "pos": [
        362,
        447
      ]
    },
    {
      "content": "数据类型。",
      "pos": [
        451,
        456
      ]
    },
    {
      "content": "运算符。",
      "pos": [
        459,
        463
      ]
    },
    {
      "content": "字符串、算术、逻辑和游标函数。",
      "pos": [
        466,
        481
      ]
    },
    {
      "pos": [
        483,
        595
      ],
      "content": "但是，Azure SQL 数据库会将功能与 <bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> 数据库上的任何依赖项相隔离。因此，许多服务器级活动并不适用于 SQL 数据库，也不受 SQL 数据库的支持。本主题将详细说明 SQL 数据库不完全支持的功能。"
    },
    {
      "content": "此外，在 SQL Server 中弃用的功能一般不受 SQL 数据库的支持。",
      "pos": [
        597,
        635
      ]
    },
    {
      "content": "升级到 SQL 数据库 V12",
      "pos": [
        640,
        655
      ]
    },
    {
      "pos": [
        657,
        852
      ],
      "content": "本主题介绍 SQL 数据库升级到免费版 SQL 数据库 V12 后可用的功能。有关 V12 的详细信息，请参阅 <bpt id=\"p1\">[</bpt>SQL 数据库 V12 新增功能<ept id=\"p1\">](/documentation/articles/sql-database-v12-whats-new)</ept>。SQL 数据库 V12 增加了性能和可管理性改进功能，以及对其他功能的支持。增加的功能在下面列出，分为完全支持的功能以及部分支持的功能。"
    },
    {
      "content": "SQL 数据库 V12 部分支持的功能",
      "pos": [
        857,
        876
      ]
    },
    {
      "content": "SQL 数据库 V12 支持相应 SQL Server 2016 Transact-SQL 语句中存在的某些（但不是所有）参数。例如，CREATE PROCEDURE 语句可用，但 CREATE PROCEDURE 的 WITH ENCRYPTION 选项不可用。请参阅链接的语法主题，以了解有关每个语句的受支持区域的详细信息。",
      "pos": [
        878,
        1042
      ]
    },
    {
      "pos": [
        1046,
        1178
      ],
      "content": "数据库：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/dn268335.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms174269.aspx)</ept>"
    },
    {
      "content": "DMV 通常适用于可用的功能",
      "pos": [
        1181,
        1195
      ]
    },
    {
      "pos": [
        1198,
        1338
      ],
      "content": "函数：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/ms186755.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER FUNCTION<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms186967.aspx)</ept>"
    },
    {
      "content": "KILL",
      "pos": [
        1342,
        1346
      ]
    },
    {
      "pos": [
        1407,
        1545
      ],
      "content": "登录名：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/ms189751.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER LOGIN<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms189828.aspx)</ept>"
    },
    {
      "pos": [
        1548,
        1691
      ],
      "content": "存储过程：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/ms187926.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER PROCEDURE<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms189762.aspx)</ept>"
    },
    {
      "pos": [
        1694,
        1824
      ],
      "content": "表：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/dn305849.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms190273.aspx)</ept>"
    },
    {
      "pos": [
        1827,
        1904
      ],
      "content": "类型（自定义）：<bpt id=\"p1\">[</bpt>CREATE TYPE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/ms175007.aspx)</ept>"
    },
    {
      "pos": [
        1907,
        2043
      ],
      "content": "用户：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/ms173463.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER USER<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms176060.aspx)</ept>"
    },
    {
      "pos": [
        2046,
        2182
      ],
      "content": "视图：<bpt id=\"p1\">[</bpt>CREATE<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/ms187956.aspx)</ept>/<bpt id=\"p2\">[</bpt>ALTER VIEW<ept id=\"p2\">](https://msdn.microsoft.com/zh-cn/library/ms173846.aspx)</ept>"
    },
    {
      "content": "SQL 数据库不支持的功能",
      "pos": [
        2187,
        2200
      ]
    },
    {
      "content": "系统对象的排序规则",
      "pos": [
        2204,
        2213
      ]
    },
    {
      "content": "连接相关：终结点语句、ORIGINAL\\_DB\\_NAME。Windows 身份验证不可用于登录名或包含的数据库用户。",
      "pos": [
        2216,
        2275
      ]
    },
    {
      "content": "跨数据库查询、跨数据库所有权链接、TRUSTWORTHY 设置",
      "pos": [
        2278,
        2309
      ]
    },
    {
      "content": "数据收集器",
      "pos": [
        2312,
        2317
      ]
    },
    {
      "content": "数据库关系图",
      "pos": [
        2320,
        2326
      ]
    },
    {
      "content": "数据库邮件",
      "pos": [
        2329,
        2334
      ]
    },
    {
      "content": "DATABASEPROPERTY（改用 DATABASEPROPERTYEX）",
      "pos": [
        2337,
        2376
      ]
    },
    {
      "content": "EXECUTE AS 登录名",
      "pos": [
        2379,
        2393
      ]
    },
    {
      "content": "加密：可扩展密钥管理",
      "pos": [
        2396,
        2406
      ]
    },
    {
      "content": "事件：事件、事件通知、查询通知",
      "pos": [
        2409,
        2424
      ]
    },
    {
      "content": "与数据库文件定位、大小以及 Azure 自动管理的数据库文件相关的功能。",
      "pos": [
        2427,
        2463
      ]
    },
    {
      "content": "与通过 Azure 帐户管理的高可用性相关的功能：备份、还原、AlwaysOn、数据库镜像、日志传送、恢复模式。有关详细信息，请参阅“Azure SQL 数据库备份和还原”。",
      "pos": [
        2466,
        2553
      ]
    },
    {
      "content": "依赖于日志读取器的功能：复制、更改数据捕获。",
      "pos": [
        2556,
        2578
      ]
    },
    {
      "content": "依赖于 SQL Server 代理或 MSDB 数据库的功能：作业、警报、运算符、基于策略的管理、数据库邮件、中心管理服务器。",
      "pos": [
        2581,
        2644
      ]
    },
    {
      "content": "FILESTREAM",
      "pos": [
        2647,
        2657
      ]
    },
    {
      "content": "函数：fn\\_get\\_sql、fn\\_virtualfilestats、fn\\_virtualservernodes",
      "pos": [
        2660,
        2719
      ]
    },
    {
      "content": "全局临时表",
      "pos": [
        2722,
        2727
      ]
    },
    {
      "content": "硬件相关的服务器设置：内存、工作线程、CPU 相关性、跟踪标志，等等。改用服务级别。",
      "pos": [
        2730,
        2772
      ]
    },
    {
      "content": "HAS\\_DBACCESS",
      "pos": [
        2775,
        2788
      ]
    },
    {
      "content": "KILL STATS JOB",
      "pos": [
        2791,
        2805
      ]
    },
    {
      "content": "链接的服务器、OPENQUERY、OPENROWSET、OPENDATASOURCE、BULK INSERT、包含 3 个和 4 个部分的名称",
      "pos": [
        2808,
        2879
      ]
    },
    {
      "content": "主/目标服务器",
      "pos": [
        2882,
        2889
      ]
    },
    {
      "content": "与 SQL Server 的 .NET Framework CLR 集成",
      "pos": [
        2893,
        2929
      ]
    },
    {
      "content": "资源调控器",
      "pos": [
        2988,
        2993
      ]
    },
    {
      "content": "语义搜索",
      "pos": [
        2996,
        3000
      ]
    },
    {
      "content": "服务器凭据",
      "pos": [
        3003,
        3008
      ]
    },
    {
      "content": "服务器级项：服务器角色，IS\\_SRVROLEMEMBER、sys.login\\_token。服务器级权限不可用，有些权限已替换为数据库级权限。某些服务器级 DMV 不可用，有些 DMV 已替换为数据库级 DMV。",
      "pos": [
        3011,
        3118
      ]
    },
    {
      "content": "Serverless express：localdb、用户实例",
      "pos": [
        3121,
        3152
      ]
    },
    {
      "content": "服务代理",
      "pos": [
        3155,
        3159
      ]
    },
    {
      "content": "SET REMOTE\\_PROC\\_TRANSACTIONS",
      "pos": [
        3162,
        3192
      ]
    },
    {
      "content": "关机",
      "pos": [
        3195,
        3197
      ]
    },
    {
      "content": "sp\\_addmessage",
      "pos": [
        3200,
        3214
      ]
    },
    {
      "content": "sp\\_configure 选项和 RECONFIGURE",
      "pos": [
        3217,
        3246
      ]
    },
    {
      "content": "sp\\_helpuser",
      "pos": [
        3249,
        3261
      ]
    },
    {
      "content": "sp\\_migrate\\_user\\_to\\_contained",
      "pos": [
        3264,
        3296
      ]
    },
    {
      "content": "SQL Server 审核（改用 SQL 数据库审核）",
      "pos": [
        3299,
        3326
      ]
    },
    {
      "content": "SQL Server 事件探查器",
      "pos": [
        3329,
        3345
      ]
    },
    {
      "content": "SQL Server 跟踪",
      "pos": [
        3348,
        3361
      ]
    },
    {
      "content": "跟踪标志",
      "pos": [
        3364,
        3368
      ]
    },
    {
      "content": "Transact-SQL 调试",
      "pos": [
        3371,
        3386
      ]
    },
    {
      "content": "触发器：服务器作用域或登录触发器",
      "pos": [
        3389,
        3405
      ]
    },
    {
      "content": "USE 语句",
      "pos": [
        3408,
        3414
      ]
    },
    {
      "content": "完整 Transact-SQL 参考",
      "pos": [
        3419,
        3437
      ]
    },
    {
      "pos": [
        3439,
        3572
      ],
      "content": "有关 Transact-SQL 语法、用法和示例的详细信息，请参阅 SQL Server 联机丛书中的 <bpt id=\"p1\">[</bpt>Transact-SQL 参考（数据库引擎）<ept id=\"p1\">](https://msdn.microsoft.com/zh-cn/library/bb510741.aspx)</ept>。"
    },
    {
      "content": "有关“适用于”标记",
      "pos": [
        3578,
        3587
      ]
    },
    {
      "content": "Transact-SQL 参考包含从 SQL Server 2008 到最新版本的相关主题。主题标题下面通常有一个“适用于”行，其中列出了 SQL Server 版本，此外也可能列出了其他产品名称。通常，相同的“适用于”标记也会列出 Azure SQL 数据库。如果“适用于”中未列出 Azure SQL 数据库，则表示该主题内容不适用于 Azure SQL 数据库。有时你可能会看到“适用于”行列出了多个产品，每个产品都附带一个小图标用于指示该主题是否适用于每个产品。",
      "pos": [
        3589,
        3824
      ]
    },
    {
      "pos": [
        3827,
        3971
      ],
      "content": "例如，SQL Server 2012 中引入了可用性组。<bpt id=\"p1\">**</bpt>创建可用性组<ept id=\"p1\">**</ept>主题表示它适用于 <bpt id=\"p2\">**</bpt>SQL Server（SQL Server 2012 至当前版本）<ept id=\"p2\">**</ept>，因为它不适用于 SQL Server 2008、SQL Server 2008 R2 或 Azure SQL 数据库。"
    },
    {
      "content": "在某些情况下，产品中可能使用了某个主题的常规主旨，但产品之间存在细微的差异。在适当的情况下，我们会在主题的中间位置指出差异。",
      "pos": [
        3973,
        4035
      ]
    }
  ],
  "content": "<properties\n   pageTitle=\"Azure SQL 数据库 T-SQL 不支持的语句 | Azure\"\n   description=\"在 Azure SQL 数据库中不完全支持的 Transact-SQL 语句\"\n   services=\"sql-database\"\n   documentationCenter=\"\"\n   authors=\"BYHAM\"\n   manager=\"jeffreyg\"\n   editor=\"\"\n   tags=\"\"/>\n\n<tags\n   ms.service=\"sql-database\"\n   ms.date=\"01/15/2016\"\n   wacn.date=\"02/26/2016\"/>\n\n# Azure SQL 数据库 Transact-SQL 的差异\n\n\nMicrosoft SQL Server 和 Azure SQL 数据库都支持应用程序依赖的大多数 Transact-SQL 功能。下面是应用程序支持的功能的不完整列表：\n\n- 数据类型。\n- 运算符。\n- 字符串、算术、逻辑和游标函数。\n\n但是，Azure SQL 数据库会将功能与 **master** 数据库上的任何依赖项相隔离。因此，许多服务器级活动并不适用于 SQL 数据库，也不受 SQL 数据库的支持。本主题将详细说明 SQL 数据库不完全支持的功能。\n\n此外，在 SQL Server 中弃用的功能一般不受 SQL 数据库的支持。\n\n## 升级到 SQL 数据库 V12\n\n本主题介绍 SQL 数据库升级到免费版 SQL 数据库 V12 后可用的功能。有关 V12 的详细信息，请参阅 [SQL 数据库 V12 新增功能](/documentation/articles/sql-database-v12-whats-new)。SQL 数据库 V12 增加了性能和可管理性改进功能，以及对其他功能的支持。增加的功能在下面列出，分为完全支持的功能以及部分支持的功能。\n\n## SQL 数据库 V12 部分支持的功能\n\nSQL 数据库 V12 支持相应 SQL Server 2016 Transact-SQL 语句中存在的某些（但不是所有）参数。例如，CREATE PROCEDURE 语句可用，但 CREATE PROCEDURE 的 WITH ENCRYPTION 选项不可用。请参阅链接的语法主题，以了解有关每个语句的受支持区域的详细信息。\n\n- 数据库：[CREATE](https://msdn.microsoft.com/zh-cn/library/dn268335.aspx)/[ALTER](https://msdn.microsoft.com/zh-cn/library/ms174269.aspx)\n- DMV 通常适用于可用的功能\n- 函数：[CREATE](https://msdn.microsoft.com/zh-cn/library/ms186755.aspx)/[ALTER FUNCTION](https://msdn.microsoft.com/zh-cn/library/ms186967.aspx)\n- [KILL](https://msdn.microsoft.com/zh-cn/library/ms173730.aspx) \n- 登录名：[CREATE](https://msdn.microsoft.com/zh-cn/library/ms189751.aspx)/[ALTER LOGIN](https://msdn.microsoft.com/zh-cn/library/ms189828.aspx)\n- 存储过程：[CREATE](https://msdn.microsoft.com/zh-cn/library/ms187926.aspx)/[ALTER PROCEDURE](https://msdn.microsoft.com/zh-cn/library/ms189762.aspx)\n- 表：[CREATE](https://msdn.microsoft.com/zh-cn/library/dn305849.aspx)/[ALTER](https://msdn.microsoft.com/zh-cn/library/ms190273.aspx)\n- 类型（自定义）：[CREATE TYPE](https://msdn.microsoft.com/zh-cn/library/ms175007.aspx)\n- 用户：[CREATE](https://msdn.microsoft.com/zh-cn/library/ms173463.aspx)/[ALTER USER](https://msdn.microsoft.com/zh-cn/library/ms176060.aspx)\n- 视图：[CREATE](https://msdn.microsoft.com/zh-cn/library/ms187956.aspx)/[ALTER VIEW](https://msdn.microsoft.com/zh-cn/library/ms173846.aspx)\n\n## SQL 数据库不支持的功能\n\n- 系统对象的排序规则\n- 连接相关：终结点语句、ORIGINAL\\_DB\\_NAME。Windows 身份验证不可用于登录名或包含的数据库用户。\n- 跨数据库查询、跨数据库所有权链接、TRUSTWORTHY 设置\n- 数据收集器\n- 数据库关系图\n- 数据库邮件\n- DATABASEPROPERTY（改用 DATABASEPROPERTYEX）\n- EXECUTE AS 登录名\n- 加密：可扩展密钥管理\n- 事件：事件、事件通知、查询通知\n- 与数据库文件定位、大小以及 Azure 自动管理的数据库文件相关的功能。\n- 与通过 Azure 帐户管理的高可用性相关的功能：备份、还原、AlwaysOn、数据库镜像、日志传送、恢复模式。有关详细信息，请参阅“Azure SQL 数据库备份和还原”。\n- 依赖于日志读取器的功能：复制、更改数据捕获。\n- 依赖于 SQL Server 代理或 MSDB 数据库的功能：作业、警报、运算符、基于策略的管理、数据库邮件、中心管理服务器。\n- FILESTREAM\n- 函数：fn\\_get\\_sql、fn\\_virtualfilestats、fn\\_virtualservernodes\n- 全局临时表\n- 硬件相关的服务器设置：内存、工作线程、CPU 相关性、跟踪标志，等等。改用服务级别。\n- HAS\\_DBACCESS\n- KILL STATS JOB\n- 链接的服务器、OPENQUERY、OPENROWSET、OPENDATASOURCE、BULK INSERT、包含 3 个和 4 个部分的名称\n- 主/目标服务器\n- [与 SQL Server 的 .NET Framework CLR 集成](http://msdn.microsoft.com/zh-cn/library/ms254963.aspx)\n- 资源调控器\n- 语义搜索\n- 服务器凭据\n- 服务器级项：服务器角色，IS\\_SRVROLEMEMBER、sys.login\\_token。服务器级权限不可用，有些权限已替换为数据库级权限。某些服务器级 DMV 不可用，有些 DMV 已替换为数据库级 DMV。\n- Serverless express：localdb、用户实例\n- 服务代理\n- SET REMOTE\\_PROC\\_TRANSACTIONS\n- 关机\n- sp\\_addmessage\n- sp\\_configure 选项和 RECONFIGURE\n- sp\\_helpuser\n- sp\\_migrate\\_user\\_to\\_contained\n- SQL Server 审核（改用 SQL 数据库审核）\n- SQL Server 事件探查器\n- SQL Server 跟踪\n- 跟踪标志\n- Transact-SQL 调试\n- 触发器：服务器作用域或登录触发器\n- USE 语句\n\n## 完整 Transact-SQL 参考\n\n有关 Transact-SQL 语法、用法和示例的详细信息，请参阅 SQL Server 联机丛书中的 [Transact-SQL 参考（数据库引擎）](https://msdn.microsoft.com/zh-cn/library/bb510741.aspx)。\n\n### 有关“适用于”标记\n\nTransact-SQL 参考包含从 SQL Server 2008 到最新版本的相关主题。主题标题下面通常有一个“适用于”行，其中列出了 SQL Server 版本，此外也可能列出了其他产品名称。通常，相同的“适用于”标记也会列出 Azure SQL 数据库。如果“适用于”中未列出 Azure SQL 数据库，则表示该主题内容不适用于 Azure SQL 数据库。有时你可能会看到“适用于”行列出了多个产品，每个产品都附带一个小图标用于指示该主题是否适用于每个产品。\n\n 例如，SQL Server 2012 中引入了可用性组。**创建可用性组**主题表示它适用于 **SQL Server（SQL Server 2012 至当前版本）**，因为它不适用于 SQL Server 2008、SQL Server 2008 R2 或 Azure SQL 数据库。\n\n在某些情况下，产品中可能使用了某个主题的常规主旨，但产品之间存在细微的差异。在适当的情况下，我们会在主题的中间位置指出差异。\n\n<!---HONumber=Mooncake_0215_2016-->\n"
}