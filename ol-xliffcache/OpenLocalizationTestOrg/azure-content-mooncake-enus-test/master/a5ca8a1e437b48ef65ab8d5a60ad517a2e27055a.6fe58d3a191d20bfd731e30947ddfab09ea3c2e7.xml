{"nodes":[{"content":"在 Azure 中使用 Bottle 创建 Python Web 应用","pos":[28,63]},{"content":"本教程介绍如何在 Azure Web 应用中运行 Python Web 应用。","pos":[83,122]},{"content":"在 Azure 中使用 Bottle 创建 Web 应用","pos":[370,398]},{"content":"本教程介绍如何开始在 Azure Web 应用中运行 Python。","pos":[400,434]},{"content":"Web 应用提供有限的免费托管和快速部署功能，并且你可以使用 Python！","pos":[435,473]},{"content":"随着您的应用增长，可以切换到付费托管，并且还可以与所有其他 Azure 服务集成。","pos":[474,515]},{"content":"你将使用 Bottle Web 框架创建 Web 应用（请参阅本教程针对 <bpt id=\"p1\">[</bpt>Django<ept id=\"p1\">](/documentation/articles/web-sites-python-create-deploy-django-app)</ept> 和 <bpt id=\"p2\">[</bpt>Flask<ept id=\"p2\">](/documentation/articles/web-sites-python-create-deploy-flask-app)</ept> 的备选版本）。","pos":[517,713],"source":"你将使用 Bottle Web 框架创建 Web 应用（请参阅本教程针对 [Django](/documentation/articles/web-sites-python-create-deploy-django-app) 和 [Flask](/documentation/articles/web-sites-python-create-deploy-flask-app) 的备选版本）。"},{"content":"你将从 Azure 创建 Web 应用，设置 Git 部署并在本地克隆存储库。","pos":[713,752]},{"content":"然后在本地运行 Web 应用，对其进行更改并将其提交和推送到 <bpt id=\"p1\">[</bpt>Azure Web 应用<ept id=\"p1\">](/documentation/services/web-sites/)</ept>。","pos":[752,834],"source":"然后在本地运行 Web 应用，对其进行更改并将其提交和推送到 [Azure Web 应用](/documentation/services/web-sites/)。"},{"content":"本教程演示如何从 Windows 或 Mac/Linux 执行此操作。","pos":[834,869]},{"content":"先决条件","pos":[975,979]},{"content":"Windows、 Mac 或 Linux","pos":[983,1003]},{"content":"Python 2.7 或 3.4","pos":[1006,1022]},{"content":"setuptools, pip, virtualenv（仅限 Python 2.7）","pos":[1025,1067]},{"content":"Git","pos":[1070,1073]},{"pos":[1076,1132],"content":"<bpt id=\"p1\">[</bpt>Python Tools 2.2 for Visual Studio<ept id=\"p1\">][]</ept> (PTVS) - 注意：这是可选的","source":"[Python Tools 2.2 for Visual Studio][] (PTVS) - 注意：这是可选的"},{"pos":[1134,1163],"content":"<bpt id=\"p1\">**</bpt>注意<ept id=\"p1\">**</ept>：Python 项目目前不支持 TFS 发布。","source":"**注意**：Python 项目目前不支持 TFS 发布。"},{"content":"Windows","pos":[1169,1176]},{"content":"如果您还没有 Python 2.7 或 3.4 安装（32 位），我们建议使用 Web 平台安装程序来安装 <bpt id=\"p1\">[</bpt>Azure SDK for Python 2.7<ept id=\"p1\">]</ept> 或 <bpt id=\"p2\">[</bpt>Azure SDK for Python 3.4<ept id=\"p2\">]</ept>。","pos":[1178,1288],"source":"如果您还没有 Python 2.7 或 3.4 安装（32 位），我们建议使用 Web 平台安装程序来安装 [Azure SDK for Python 2.7] 或 [Azure SDK for Python 3.4]。"},{"content":"这将安装 32 位版本的 Python、setuptools、pip、virtualenv 等（32 位 Python 是在 Azure 主机计算机上安装的）。","pos":[1288,1368]},{"content":"或者，您可以从 <bpt id=\"p1\">[</bpt>python.org<ept id=\"p1\">]</ept> 获取 Python。","pos":[1368,1399],"source":"或者，您可以从 [python.org] 获取 Python。"},{"content":"对于 Git，我们建议 <bpt id=\"p1\">[</bpt>Git for Windows<ept id=\"p1\">]</ept> 或 <bpt id=\"p2\">[</bpt>GitHub for Windows<ept id=\"p2\">]</ept>。","pos":[1401,1454],"source":"对于 Git，我们建议 [Git for Windows] 或 [GitHub for Windows]。"},{"content":"如果您使用 Visual Studio，可以使用集成的 Git 支持。","pos":[1454,1489]},{"content":"我们还建议你安装 <bpt id=\"p1\">[</bpt>Python Tools 2.2 for Visual Studio<ept id=\"p1\">]</ept>。","pos":[1491,1537],"source":"我们还建议你安装 [Python Tools 2.2 for Visual Studio]。"},{"content":"这是可选的，但是如果您有 <bpt id=\"p1\">[</bpt>Visual Studio<ept id=\"p1\">]</ept>（包括免费 Visual Studio Community 2013 或 Visual Studio Express 2013 for Web），则这将为您提供很好的 Python IDE。","pos":[1537,1660],"source":"这是可选的，但是如果您有 [Visual Studio]（包括免费 Visual Studio Community 2013 或 Visual Studio Express 2013 for Web），则这将为您提供很好的 Python IDE。"},{"content":"Mac/Linux","pos":[1666,1675]},{"content":"您应安装了 Python 和 Git ，但请确保您具有 Python 2.7 或 3.4。","pos":[1677,1722]},{"content":"在 Azure 管理门户中创建 Web 应用","pos":[1728,1750]},{"pos":[1752,1820],"content":"创建你的应用的第一步是通过 <bpt id=\"p1\">[</bpt>Azure 管理门户<ept id=\"p1\">](https://manage.windowsazure.cn)</ept>创建 Web 应用。","source":"创建你的应用的第一步是通过 [Azure 管理门户](https://manage.windowsazure.cn)创建 Web 应用。"},{"content":"登录到 [Azure 管理门户]。","pos":[1825,1842]},{"content":"在页面底部，依次单击“新建”、“计算”、“ Web 应用”和“快速创建”。","pos":[1846,1883]},{"content":"提供 Web 应用的“URL”，并选择 Web 应用的“区域”。","pos":[1883,1915]},{"content":"最后，单击“创建 Web 应用”。","pos":[1915,1932]},{"content":"选择“快速创建” Web 应用","pos":[1940,1955]},{"pos":[2032,2147],"content":"按照<bpt id=\"p1\">[</bpt>在 Azure Web 应用中使用 GIT 进行连续部署<ept id=\"p1\">](/documentation/articles/web-sites-publish-source-control)</ept>的说明为新创建的 Web 应用配置 Git 发布。","source":"按照[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)的说明为新创建的 Web 应用配置 Git 发布。"},{"content":"应用程序概述","pos":[2153,2159]},{"content":"Git 存储库内容","pos":[2165,2174]},{"content":"下面是您会在初始 Git 存储库找到的文件的概览，我们将在下一节中予以克隆。","pos":[2176,2214]},{"content":"应用程序的的主要来源。","pos":[2380,2391]},{"content":"包含具有母版布局的 3 页（索引、关于、联系人）。","pos":[2391,2416]},{"content":"静态内容和脚本包括启动、 jquery、 modernizr 和响应。","pos":[2416,2451]},{"content":"本地开发服务器支持。","pos":[2466,2476]},{"content":"使用此选项以在本地运行应用程序。","pos":[2476,2492]},{"pos":[2550,2592],"content":"用于 <bpt id=\"p1\">[</bpt>Python Tools for Visual Studio<ept id=\"p1\">]</ept> 的项目文件。","source":"用于 [Python Tools for Visual Studio] 的项目文件。"},{"content":"虚拟环境的 IIS 代理和 PTVS 远程调试支持。","pos":[2625,2651]},{"content":"此应用程序所需的外部软件包。","pos":[2676,2690]},{"content":"部署脚本将对在此文件中列出的包进行 pip 安装。","pos":[2690,2715]},{"content":"IIS 配置文件。","pos":[2759,2768]},{"content":"部署脚本将使用适当的 web.x.y.config，并将其复制为 web.config。","pos":[2768,2812]},{"content":"可选文件 - 自定义部署","pos":[2818,2830]},{"content":"可选文件 - Python 运行时","pos":[2951,2968]},{"content":"服务器上的其他文件","pos":[3083,3092]},{"content":"某些文件存在于服务器上，但不会添加到 git 存储库。","pos":[3094,3121]},{"content":"这些是由部署脚本创建的。","pos":[3121,3133]},{"content":"IIS 配置文件。","pos":[3152,3161]},{"content":"每次部署中从 web.x.y.config 创建","pos":[3161,3185]},{"content":"Python 虚拟环境。","pos":[3198,3210]},{"content":"如果在 Web 应用上尚不存在兼容的虚拟环境，请在部署期间创建。","pos":[3210,3242]},{"content":"在 requirements.txt 中列出的软件包是 pip 安装的，但如果已安装软件包，pip 将跳过安装。","pos":[3242,3298]},{"content":"后续 3 节描述如何在 3 个不同的环境下继续进行 Web 应用开发：","pos":[3300,3335]},{"content":"Windows，具有 Python Tools for Visual Studio","pos":[3339,3380]},{"content":"Windows，具有命令行","pos":[3383,3396]},{"content":"Mac/Linux，具有命令行","pos":[3399,3414]},{"content":"Web 应用开发 - Windows - Python Tools for Visual Studio","pos":[3420,3471]},{"content":"克隆存储库","pos":[3477,3482]},{"content":"首先，使用 Azure 管理门户上提供的 URL 来克隆存储库。","pos":[3484,3516]},{"content":"有关详细信息，请参阅<bpt id=\"p1\">[</bpt>在 Azure Web 应用中使用 GIT 进行连续部署<ept id=\"p1\">](/documentation/articles/web-sites-publish-source-control)</ept>。","pos":[3516,3615],"source":"有关详细信息，请参阅[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)。"},{"content":"打开包含在存储库根中的解决方案文件 (.sln) 。","pos":[3617,3643]},{"content":"创建虚拟环境","pos":[3730,3736]},{"content":"现在，我们将创建本地开发的虚拟环境。","pos":[3738,3756]},{"content":"右键单击 <bpt id=\"p1\">**</bpt>Python 环境<ept id=\"p1\">**</ept>，选择<bpt id=\"p2\">**</bpt>添加虚拟环境...<ept id=\"p2\">**</ept>。","pos":[3756,3791],"source":"右键单击 **Python 环境**，选择**添加虚拟环境...**。"},{"pos":[3795,3811],"content":"请确保环境的名称是 <ph id=\"ph1\">`env`</ph>。","source":"请确保环境的名称是 `env`。"},{"content":"选择基解释器。","pos":[3815,3822]},{"content":"请确保使用为你的 Web 应用选择的相同版本 Python（在 runtime.txt 或 Azure 管理门户的站点中）。","pos":[3822,3884]},{"content":"请确保选中此选项以下载并安装软件包。","pos":[3888,3906]},{"content":"单击“创建”。","pos":[3992,3999]},{"content":"这会创建虚拟环境，并安装 requirements.txt 中列出的依赖项。","pos":[3999,4037]},{"content":"使用开发服务器运行","pos":[4043,4052]},{"content":"按 F5 开始调试，您的 web 浏览器会自动打开到本地运行的页面。","pos":[4054,4088]},{"content":"您可以在源中设置断点，使用监视窗口等。","pos":[4173,4192]},{"content":"请参阅 <bpt id=\"p1\">[</bpt>Python Tools for Visual Studio 文档<ept id=\"p1\">]</ept>以了解有关各种功能的更多信息。","pos":[4192,4246],"source":"请参阅 [Python Tools for Visual Studio 文档]以了解有关各种功能的更多信息。"},{"content":"进行更改","pos":[4252,4256]},{"content":"现在您可以通过更改应用程序源和/或模板进行试验。","pos":[4258,4282]},{"content":"您测试您的更改后，将其提交到 Git 存储库：","pos":[4284,4307]},{"content":"安装多个软件包","pos":[4392,4399]},{"content":"您的应用程序可能具有除 Python 和 Bottle 以外的依赖关系。","pos":[4401,4437]},{"content":"您可以使用 pip 安装其他软件包。","pos":[4439,4457]},{"content":"要安装包，请右键单击虚拟环境，然后选择<bpt id=\"p1\">**</bpt>安装 Python 软件包<ept id=\"p1\">**</ept>。","pos":[4457,4494],"source":"要安装包，请右键单击虚拟环境，然后选择**安装 Python 软件包**。"},{"pos":[4496,4570],"content":"例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、服务总线和其他 Azure 服务），请输入 <ph id=\"ph1\">`azure`</ph>：","source":"例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、服务总线和其他 Azure 服务），请输入 `azure`："},{"pos":[4660,4718],"content":"在虚拟环境上右键单击并选择<bpt id=\"p1\">**</bpt>生成 requirements.txt<ept id=\"p1\">**</ept> 以更新 requirements.txt。","source":"在虚拟环境上右键单击并选择**生成 requirements.txt** 以更新 requirements.txt。"},{"content":"然后，将 requirements.txt 的更改落实到 Git 存储库。","pos":[4720,4757]},{"content":"部署到 Azure","pos":[4763,4772]},{"content":"要触发部署操作，请单击<bpt id=\"p1\">**</bpt>同步<ept id=\"p1\">**</ept>或<bpt id=\"p2\">**</bpt>推送<ept id=\"p2\">**</ept>。","pos":[4774,4799],"source":"要触发部署操作，请单击**同步**或**推送**。"},{"content":"同步执行推送和拉取。","pos":[4799,4809]},{"content":"首次部署将需要一些时间，因为它将创建虚拟环境、 安装包等。","pos":[4885,4914]},{"content":"Visual Studio 不会显示部署的进度。","pos":[4916,4940]},{"content":"浏览到 Azure URL 要查看您的更改。","pos":[4942,4964]},{"content":"Web 应用开发 - Windows - 命令行","pos":[4970,4994]},{"content":"克隆存储库","pos":[5000,5005]},{"content":"首先，使用在 Azure 管理门户中提供的 URL 来克隆存储库，并将 Azure 存储库添加为远程。","pos":[5007,5058]},{"content":"有关详细信息，请参阅<bpt id=\"p1\">[</bpt>在 Azure Web 应用中使用 GIT 进行连续部署<ept id=\"p1\">](/documentation/articles/web-sites-publish-source-control)</ept>。","pos":[5058,5157],"source":"有关详细信息，请参阅[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)。"},{"content":"创建虚拟环境","pos":[5247,5253]},{"content":"我们将为开发目的创建新的虚拟环境 （不要将其添加到存储库）。","pos":[5255,5285]},{"content":"Python 中的虚拟环境是可重定位，因此使用该应用程序的每个开发人员将在本地创建自己的环境。","pos":[5285,5332]},{"content":"请确保使用为你的 Web 应用选择的相同版本 Python（在 runtime.txt 或 Azure 管理门户的站点中）","pos":[5334,5395]},{"content":"对于 Python 2.7：","pos":[5397,5411]},{"content":"对于 Python 3.4：","pos":[5459,5473]},{"content":"安装应用程序所需的任何外部软件包。","pos":[5515,5532]},{"content":"可以使用该存储库的根处 requirements.txt 文件在虚拟环境中安装软件包：","pos":[5532,5575]},{"content":"使用开发服务器运行","pos":[5630,5639]},{"content":"您可以使用以下命令在开发服务器下启用应用程序：","pos":[5641,5664]},{"content":"控制台将显示服务器侦听的 URL 和端口：","pos":[5697,5718]},{"content":"然后，将 web 浏览器打开到该 URL。","pos":[5805,5826]},{"content":"进行更改","pos":[5915,5919]},{"content":"现在您可以通过更改应用程序源和/或模板进行试验。","pos":[5921,5945]},{"content":"您测试您的更改后，将其提交到 Git 存储库：","pos":[5947,5970]},{"content":"安装多个软件包","pos":[6042,6049]},{"content":"您的应用程序可能具有除 Python 和 Bottle 以外的依赖关系。","pos":[6051,6087]},{"content":"您可以使用 pip 安装其他软件包。","pos":[6089,6107]},{"content":"例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、 服务总线和其他 Azure 服务），请输入：","pos":[6107,6174]},{"content":"请确保更新 requirements.txt：","pos":[6211,6234]},{"content":"落实更改：","pos":[6283,6288]},{"content":"部署到 Azure","pos":[6364,6373]},{"content":"要触发部署，请将更改推送到 Azure：","pos":[6375,6395]},{"content":"您将看到部署脚本的输出，包括虚拟环境创建，安装软件包，创建 web.config。","pos":[6424,6465]},{"content":"浏览到 Azure URL 要查看您的更改。","pos":[6467,6489]},{"content":"Web 应用开发 - Mac/Linux - 命令行","pos":[6495,6521]},{"content":"克隆存储库","pos":[6527,6532]},{"content":"首先，使用在 Azure 管理门户中提供的 URL 来克隆存储库，并将 Azure 存储库添加为远程。","pos":[6534,6585]},{"content":"有关详细信息，请参阅<bpt id=\"p1\">[</bpt>在 Azure Web 应用中使用 GIT 进行连续部署<ept id=\"p1\">](/documentation/articles/web-sites-publish-source-control)</ept>。","pos":[6585,6684],"source":"有关详细信息，请参阅[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)。"},{"content":"创建虚拟环境","pos":[6774,6780]},{"content":"我们将为开发目的创建新的虚拟环境 （不要将其添加到存储库）。","pos":[6782,6812]},{"content":"Python 中的虚拟环境是可重定位，因此使用该应用程序的每个开发人员将在本地创建自己的环境。","pos":[6812,6859]},{"content":"请确保使用为你的 Web 应用选择的相同版本 Python（在 runtime.txt 或 Azure 管理门户的站点中）。","pos":[6861,6923]},{"content":"对于 Python 2.7：","pos":[6925,6939]},{"content":"对于 Python 3.4：","pos":[6971,6985]},{"pos":[7010,7026],"content":"或 pyvenv env","source":"或\n    pyvenv env"},{"content":"安装应用程序所需的任何外部软件包。","pos":[7028,7045]},{"content":"可以使用该存储库的根处 requirements.txt 文件在虚拟环境中安装软件包：","pos":[7045,7088]},{"content":"使用开发服务器运行","pos":[7139,7148]},{"content":"您可以使用以下命令在开发服务器下启用应用程序：","pos":[7150,7173]},{"content":"控制台将显示服务器侦听的 URL 和端口：","pos":[7202,7223]},{"content":"然后，将 web 浏览器打开到该 URL。","pos":[7306,7327]},{"content":"进行更改","pos":[7412,7416]},{"content":"现在您可以通过更改应用程序源和/或模板进行试验。","pos":[7418,7442]},{"content":"您测试您的更改后，将其提交到 Git 存储库：","pos":[7444,7467]},{"content":"安装多个软件包","pos":[7539,7546]},{"content":"您的应用程序可能具有除 Python 和 Bottle 以外的依赖关系。","pos":[7548,7584]},{"content":"您可以使用 pip 安装其他软件包。","pos":[7586,7604]},{"content":"例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、 服务总线和其他 Azure 服务），请输入：","pos":[7604,7671]},{"content":"请确保更新 requirements.txt：","pos":[7704,7727]},{"content":"落实更改：","pos":[7772,7777]},{"content":"部署到 Azure","pos":[7853,7862]},{"content":"要触发部署，请将更改推送到 Azure：","pos":[7864,7884]},{"content":"您将看到部署脚本的输出，包括虚拟环境创建，安装软件包，创建 web.config。","pos":[7913,7954]},{"content":"浏览到 Azure URL 要查看您的更改。","pos":[7956,7978]},{"content":"故障排除 - 软件包安装","pos":[7984,7996]},{"content":"故障排除 - 虚拟环境","pos":[8145,8156]},{"content":"后续步骤","pos":[8303,8307]},{"content":"请遵循下面链接以了解有关 Bottle 和 Python Tools for Visual Studio 的更多信息：","pos":[8309,8368]},{"content":"Bottle 文档","pos":[8374,8383]},{"content":"Python Tools for Visual Studio 文档","pos":[8388,8421]},{"content":"有关使用 Azure 表存储和 MongoDB 的信息：","pos":[8424,8452]},{"content":"具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 MongoDB","pos":[8457,8518]},{"content":"具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 Azure 表存储","pos":[8523,8586]},{"content":"具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 MongoDB","pos":[8614,8675]},{"content":"具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 Azure 表存储","pos":[8746,8809]},{"content":"Azure SDK for Python 2.7","pos":[8913,8937]},{"content":"Azure SDK for Python 3.4","pos":[8987,9011]},{"content":"python.org","pos":[9061,9071]},{"content":"Git for Windows","pos":[9098,9113]},{"content":"GitHub for Windows","pos":[9143,9161]},{"content":"Python Tools for Visual Studio","pos":[9193,9223]},{"content":"Python Tools 2.2 for Visual Studio","pos":[9281,9315]},{"content":"Visual Studio","pos":[9365,9378]},{"content":"Python Tools for Visual Studio 文档","pos":[9411,9444]},{"content":"Bottle 文档","pos":[9471,9480]}],"content":"<properties \n    pageTitle=\"在 Azure 中使用 Bottle 创建 Python Web 应用\" \n    description=\"本教程介绍如何在 Azure Web 应用中运行 Python Web 应用。\" \n    services=\"app-service\\web\" \n    documentationCenter=\"python\" \n    tags=\"python\"\n    authors=\"huguesv\" \n    manager=\"wpickett\" \n    editor=\"\"/>\n\n<tags\n    ms.service=\"app-service-web\"\n    ms.date=\"11/17/2015\"\n    wacn.date=\"02/17/2016\"/>\n\n\n# 在 Azure 中使用 Bottle 创建 Web 应用\n\n本教程介绍如何开始在 Azure Web 应用中运行 Python。 Web 应用提供有限的免费托管和快速部署功能，并且你可以使用 Python！ 随着您的应用增长，可以切换到付费托管，并且还可以与所有其他 Azure 服务集成。\n\n你将使用 Bottle Web 框架创建 Web 应用（请参阅本教程针对 [Django](/documentation/articles/web-sites-python-create-deploy-django-app) 和 [Flask](/documentation/articles/web-sites-python-create-deploy-flask-app) 的备选版本）。你将从 Azure 创建 Web 应用，设置 Git 部署并在本地克隆存储库。然后在本地运行 Web 应用，对其进行更改并将其提交和推送到 [Azure Web 应用](/documentation/services/web-sites/)。本教程演示如何从 Windows 或 Mac/Linux 执行此操作。\n\n[AZURE.INCLUDE [create-account-and-websites-note](../includes/create-account-and-websites-note.md)]\n\n## 先决条件\n\n- Windows、 Mac 或 Linux\n- Python 2.7 或 3.4\n- setuptools, pip, virtualenv（仅限 Python 2.7）\n- Git\n- [Python Tools 2.2 for Visual Studio][] (PTVS) - 注意：这是可选的\n\n**注意**：Python 项目目前不支持 TFS 发布。\n\n### Windows\n\n如果您还没有 Python 2.7 或 3.4 安装（32 位），我们建议使用 Web 平台安装程序来安装 [Azure SDK for Python 2.7] 或 [Azure SDK for Python 3.4]。这将安装 32 位版本的 Python、setuptools、pip、virtualenv 等（32 位 Python 是在 Azure 主机计算机上安装的）。或者，您可以从 [python.org] 获取 Python。\n\n对于 Git，我们建议 [Git for Windows] 或 [GitHub for Windows]。如果您使用 Visual Studio，可以使用集成的 Git 支持。\n\n我们还建议你安装 [Python Tools 2.2 for Visual Studio]。这是可选的，但是如果您有 [Visual Studio]（包括免费 Visual Studio Community 2013 或 Visual Studio Express 2013 for Web），则这将为您提供很好的 Python IDE。\n\n### Mac/Linux\n\n您应安装了 Python 和 Git ，但请确保您具有 Python 2.7 或 3.4。\n\n\n## 在 Azure 管理门户中创建 Web 应用\n\n创建你的应用的第一步是通过 [Azure 管理门户](https://manage.windowsazure.cn)创建 Web 应用。\n\n1. 登录到 [Azure 管理门户]。\n1. 在页面底部，依次单击“新建”、“计算”、“ Web 应用”和“快速创建”。提供 Web 应用的“URL”，并选择 Web 应用的“区域”。最后，单击“创建 Web 应用”。\n\n    ![选择“快速创建” Web 应用](./media/web-sites-php-create-web-sites/select-quickcreate-Website.png)\n\n6. 按照[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)的说明为新创建的 Web 应用配置 Git 发布。\n \n## 应用程序概述\n\n### Git 存储库内容\n\n下面是您会在初始 Git 存储库找到的文件的概览，我们将在下一节中予以克隆。\n\n    \\routes.py\n    \\static\\content\\\n    \\static\\fonts\\\n    \\static\\scripts\\\n    \\views\\about.tpl\n    \\views\\contact.tpl\n    \\views\\index.tpl\n    \\views\\layout.tpl\n\n应用程序的的主要来源。包含具有母版布局的 3 页（索引、关于、联系人）。静态内容和脚本包括启动、 jquery、 modernizr 和响应。\n\n    \\app.py\n\n本地开发服务器支持。使用此选项以在本地运行应用程序。\n\n    \\BottleWebProject.pyproj\n    \\BottleWebProject.sln\n\n用于 [Python Tools for Visual Studio] 的项目文件。\n\n    \\ptvs_virtualenv_proxy.py\n\n虚拟环境的 IIS 代理和 PTVS 远程调试支持。\n\n    \\requirements.txt\n\n此应用程序所需的外部软件包。部署脚本将对在此文件中列出的包进行 pip 安装。\n \n    \\web.2.7.config\n    \\web.3.4.config\n\nIIS 配置文件。部署脚本将使用适当的 web.x.y.config，并将其复制为 web.config。\n\n### 可选文件 - 自定义部署\n\n[AZURE.INCLUDE [web-sites-python-customizing-deployment](../includes/web-sites-python-customizing-deployment.md)]\n\n### 可选文件 - Python 运行时\n\n[AZURE.INCLUDE [web-sites-python-customizing-runtime](../includes/web-sites-python-customizing-runtime.md)]\n\n### 服务器上的其他文件\n\n某些文件存在于服务器上，但不会添加到 git 存储库。这些是由部署脚本创建的。\n\n    \\web.config\n\nIIS 配置文件。每次部署中从 web.x.y.config 创建\n\n    \\env\\\n\nPython 虚拟环境。如果在 Web 应用上尚不存在兼容的虚拟环境，请在部署期间创建。在 requirements.txt 中列出的软件包是 pip 安装的，但如果已安装软件包，pip 将跳过安装。\n\n后续 3 节描述如何在 3 个不同的环境下继续进行 Web 应用开发：\n\n- Windows，具有 Python Tools for Visual Studio\n- Windows，具有命令行\n- Mac/Linux，具有命令行\n\n\n## Web 应用开发 - Windows - Python Tools for Visual Studio\n\n### 克隆存储库\n\n首先，使用 Azure 管理门户上提供的 URL 来克隆存储库。有关详细信息，请参阅[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)。\n\n打开包含在存储库根中的解决方案文件 (.sln) 。\n\n![](./media/web-sites-python-create-deploy-bottle-app/ptvs-solution-bottle.png)\n\n### 创建虚拟环境\n\n现在，我们将创建本地开发的虚拟环境。右键单击 **Python 环境**，选择**添加虚拟环境...**。\n\n- 请确保环境的名称是 `env`。\n\n- 选择基解释器。请确保使用为你的 Web 应用选择的相同版本 Python（在 runtime.txt 或 Azure 管理门户的站点中）。\n\n- 请确保选中此选项以下载并安装软件包。\n\n![](./media/web-sites-python-create-deploy-bottle-app/ptvs-add-virtual-env-27.png)\n\n单击“创建”。这会创建虚拟环境，并安装 requirements.txt 中列出的依赖项。\n\n### 使用开发服务器运行\n\n按 F5 开始调试，您的 web 浏览器会自动打开到本地运行的页面。\n\n![](./media/web-sites-python-create-deploy-bottle-app/windows-browser-bottle.png)\n\n您可以在源中设置断点，使用监视窗口等。请参阅 [Python Tools for Visual Studio 文档]以了解有关各种功能的更多信息。\n\n### 进行更改\n\n现在您可以通过更改应用程序源和/或模板进行试验。\n\n您测试您的更改后，将其提交到 Git 存储库：\n\n![](./media/web-sites-python-create-deploy-bottle-app/ptvs-commit-bottle.png)\n\n### 安装多个软件包\n\n您的应用程序可能具有除 Python 和 Bottle 以外的依赖关系。\n\n您可以使用 pip 安装其他软件包。要安装包，请右键单击虚拟环境，然后选择**安装 Python 软件包**。\n\n例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、服务总线和其他 Azure 服务），请输入 `azure`：\n\n![](./media/web-sites-python-create-deploy-bottle-app/ptvs-install-package-dialog.png)\n\n在虚拟环境上右键单击并选择**生成 requirements.txt** 以更新 requirements.txt。\n\n然后，将 requirements.txt 的更改落实到 Git 存储库。\n\n### 部署到 Azure\n\n要触发部署操作，请单击**同步**或**推送**。同步执行推送和拉取。\n\n![](./media/web-sites-python-create-deploy-bottle-app/ptvs-git-push.png)\n\n首次部署将需要一些时间，因为它将创建虚拟环境、 安装包等。\n\nVisual Studio 不会显示部署的进度。\n\n浏览到 Azure URL 要查看您的更改。\n\n\n## Web 应用开发 - Windows - 命令行\n\n### 克隆存储库\n\n首先，使用在 Azure 管理门户中提供的 URL 来克隆存储库，并将 Azure 存储库添加为远程。有关详细信息，请参阅[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)。\n\n    git clone <repo-url>\n    cd <repo-folder>\n    git remote add azure <repo-url> \n\n### 创建虚拟环境\n\n我们将为开发目的创建新的虚拟环境 （不要将其添加到存储库）。Python 中的虚拟环境是可重定位，因此使用该应用程序的每个开发人员将在本地创建自己的环境。\n\n请确保使用为你的 Web 应用选择的相同版本 Python（在 runtime.txt 或 Azure 管理门户的站点中）\n\n对于 Python 2.7：\n\n    c:\\python27\\python.exe -m virtualenv env\n\n对于 Python 3.4：\n\n    c:\\python34\\python.exe -m venv env\n\n安装应用程序所需的任何外部软件包。可以使用该存储库的根处 requirements.txt 文件在虚拟环境中安装软件包：\n\n    env\\scripts\\pip install -r requirements.txt\n\n### 使用开发服务器运行\n\n您可以使用以下命令在开发服务器下启用应用程序：\n\n    env\\scripts\\python app.py\n\n控制台将显示服务器侦听的 URL 和端口：\n\n![](./media/web-sites-python-create-deploy-bottle-app/windows-run-local-bottle.png)\n\n然后，将 web 浏览器打开到该 URL。\n\n![](./media/web-sites-python-create-deploy-bottle-app/windows-browser-bottle.png)\n\n### 进行更改\n\n现在您可以通过更改应用程序源和/或模板进行试验。\n\n您测试您的更改后，将其提交到 Git 存储库：\n\n    git add <modified-file>\n    git commit -m \"<commit-comment>\"\n\n### 安装多个软件包\n\n您的应用程序可能具有除 Python 和 Bottle 以外的依赖关系。\n\n您可以使用 pip 安装其他软件包。例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、 服务总线和其他 Azure 服务），请输入：\n\n    env\\scripts\\pip install azure\n\n请确保更新 requirements.txt：\n\n    env\\scripts\\pip freeze > requirements.txt\n\n落实更改：\n\n    git add requirements.txt\n    git commit -m \"Added azure package\"\n\n### 部署到 Azure\n\n要触发部署，请将更改推送到 Azure：\n\n    git push azure master\n\n您将看到部署脚本的输出，包括虚拟环境创建，安装软件包，创建 web.config。\n\n浏览到 Azure URL 要查看您的更改。\n\n\n## Web 应用开发 - Mac/Linux - 命令行\n\n### 克隆存储库\n\n首先，使用在 Azure 管理门户中提供的 URL 来克隆存储库，并将 Azure 存储库添加为远程。有关详细信息，请参阅[在 Azure Web 应用中使用 GIT 进行连续部署](/documentation/articles/web-sites-publish-source-control)。\n\n    git clone <repo-url>\n    cd <repo-folder>\n    git remote add azure <repo-url> \n\n### 创建虚拟环境\n\n我们将为开发目的创建新的虚拟环境 （不要将其添加到存储库）。Python 中的虚拟环境是可重定位，因此使用该应用程序的每个开发人员将在本地创建自己的环境。\n\n请确保使用为你的 Web 应用选择的相同版本 Python（在 runtime.txt 或 Azure 管理门户的站点中）。\n\n对于 Python 2.7：\n\n    python -m virtualenv env\n\n对于 Python 3.4：\n\n    python -m venv env\n或\n    pyvenv env\n\n安装应用程序所需的任何外部软件包。可以使用该存储库的根处 requirements.txt 文件在虚拟环境中安装软件包：\n\n    env/bin/pip install -r requirements.txt\n\n### 使用开发服务器运行\n\n您可以使用以下命令在开发服务器下启用应用程序：\n\n    env/bin/python app.py\n\n控制台将显示服务器侦听的 URL 和端口：\n\n![](./media/web-sites-python-create-deploy-bottle-app/mac-run-local-bottle.png)\n\n然后，将 web 浏览器打开到该 URL。\n\n![](./media/web-sites-python-create-deploy-bottle-app/mac-browser-bottle.png)\n\n### 进行更改\n\n现在您可以通过更改应用程序源和/或模板进行试验。\n\n您测试您的更改后，将其提交到 Git 存储库：\n\n    git add <modified-file>\n    git commit -m \"<commit-comment>\"\n\n### 安装多个软件包\n\n您的应用程序可能具有除 Python 和 Bottle 以外的依赖关系。\n\n您可以使用 pip 安装其他软件包。例如，要安装 Azure SDK for Python（使您可以访问 Azure 存储、 服务总线和其他 Azure 服务），请输入：\n\n    env/bin/pip install azure\n\n请确保更新 requirements.txt：\n\n    env/bin/pip freeze > requirements.txt\n\n落实更改：\n\n    git add requirements.txt\n    git commit -m \"Added azure package\"\n\n### 部署到 Azure\n\n要触发部署，请将更改推送到 Azure：\n\n    git push azure master\n\n您将看到部署脚本的输出，包括虚拟环境创建，安装软件包，创建 web.config。\n\n浏览到 Azure URL 要查看您的更改。\n\n\n## 故障排除 - 软件包安装\n\n[AZURE.INCLUDE [web-sites-python-troubleshooting-package-installation](../includes/web-sites-python-troubleshooting-package-installation.md)]\n\n\n## 故障排除 - 虚拟环境\n\n[AZURE.INCLUDE [web-sites-python-troubleshooting-virtual-environment](../includes/web-sites-python-troubleshooting-virtual-environment.md)]\n\n\n## 后续步骤\n\n请遵循下面链接以了解有关 Bottle 和 Python Tools for Visual Studio 的更多信息：\n \n- [Bottle 文档]\n- [Python Tools for Visual Studio 文档]\n\n有关使用 Azure 表存储和 MongoDB 的信息：\n\n- [具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 MongoDB]\n- [具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 Azure 表存储]\n\n\n<!--Link references-->\n[具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 MongoDB]: /documentation/articles/web-sites-python-ptvs-bottle-table-storage\n[具有 Python Tools for Visual Studio 的 Azure 上的 Bottle 和 Azure 表存储]: /documentation/articles/web-sites-python-ptvs-bottle-table-storage\n\n<!--External Link references-->\n[Azure SDK for Python 2.7]: http://go.microsoft.com/fwlink/?linkid=254281\n[Azure SDK for Python 3.4]: http://go.microsoft.com/fwlink/?linkid=516990\n[python.org]: http://www.python.org/\n[Git for Windows]: http://msysgit.github.io/\n[GitHub for Windows]: https://windows.github.com/\n[Python Tools for Visual Studio]: https://www.visualstudio.com/zh-cn/features/python-vs\n[Python Tools 2.2 for Visual Studio]: http://go.microsoft.com/fwlink/?LinkID=624025\n[Visual Studio]: http://www.visualstudio.com/\n[Python Tools for Visual Studio 文档]: http://aka.ms/ptvsdocs\n[Bottle 文档]: http://bottlepy.org/docs/dev/index.html\n \n\n<!---HONumber=Mooncake_0118_2016-->"}