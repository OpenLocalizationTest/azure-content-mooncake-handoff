{
  "nodes": [
    {
      "content": "使用能够使用 Azure 媒体服务执行实时编码的频道",
      "pos": [
        28,
        54
      ]
    },
    {
      "content": "本主题介绍如何设置频道，以从本地编码器接收单比特率实时流，然后使用媒体服务执行实时编码以将其转换为自适应比特率流。然后，该流可以使用以下自适应流式处理协议之一通过一个或多个流式处理终结点传递给客户端播放应用程序：HLS、平滑流、MPEG DASH、HDS。",
      "pos": [
        74,
        202
      ]
    },
    {
      "content": "使用能够使用 Azure 媒体服务执行实时编码的频道",
      "pos": [
        429,
        455
      ]
    },
    {
      "content": "概述",
      "pos": [
        459,
        461
      ]
    },
    {
      "pos": [
        463,
        522
      ],
      "content": "在 Azure 媒体服务中，<bpt id=\"p1\">**</bpt>频道<ept id=\"p1\">**</ept>表示用于处理实时流内容的管道。<bpt id=\"p2\">**</bpt>频道<ept id=\"p2\">**</ept>通过以下两种方式之一接收实时输入流："
    },
    {
      "pos": [
        526,
        731
      ],
      "content": "本地实时编码器将多比特率 <bpt id=\"p1\">**</bpt>RTMP<ept id=\"p1\">**</ept> 或 <bpt id=\"p2\">**</bpt>平滑流<ept id=\"p2\">**</ept>（分片 MP4）发送到频道。可以使用以下输出多比特率平滑流的实时编码器：Elemental、Envivio、Cisco。以下实时编码器输出 RTMP：Adobe Flash Live、Telestream Wirecast 和 Tricaster 转码器。引入流将通过<bpt id=\"p3\">**</bpt>频道<ept id=\"p3\">**</ept>，而不会进行任何进一步处理。收到请求时，媒体服务会将该流传递给客户。"
    },
    {
      "pos": [
        734,
        882
      ],
      "content": "将单比特率流（采用以下格式之一：<bpt id=\"p1\">**</bpt>RTP<ept id=\"p1\">**</ept> (MPEG-TS)、<bpt id=\"p2\">**</bpt>RTMP<ept id=\"p2\">**</ept> 或<bpt id=\"p3\">**</bpt>平滑流<ept id=\"p3\">**</ept>（分片 MP4）发送到能够使用媒体服务执行实时编码的<bpt id=\"p4\">**</bpt>频道<ept id=\"p4\">**</ept>。然后，<bpt id=\"p5\">**</bpt>频道<ept id=\"p5\">**</ept>将对传入的单比特率流执行实时编码，使之转换为多比特率（自适应）视频流。收到请求时，媒体服务会将该流传递给客户。"
    },
    {
      "content": "从媒体服务2.10 发行版开始，在创建频道时，可以指定你想要频道接收输入流的方式，以及是否想要频道对流执行实时编码。可以使用两个选项：",
      "pos": [
        884,
        951
      ]
    },
    {
      "pos": [
        955,
        1146
      ],
      "content": "<bpt id=\"p1\">**</bpt>无<ept id=\"p1\">**</ept> - 如果你打算使用输出多比特率流的本地实时编码器，请指定此值。在这种情况下，传入流将传递到输出，而不会进行任何编码。这是 2.10 发行版以前的频道行为。有关使用此类型的频道的更详细信息，请参阅<bpt id=\"p2\">[</bpt>使用从本地编码器接收多比特率实时流的频道<ept id=\"p2\">](/documentation/articles/media-services-manage-channels-overview)</ept>。"
    },
    {
      "content": "标准 - 如果你打算使用媒体服务将单比特率实时流编码为多比特率流，请选择此值。请注意，实时编码会影响计费，你应该记住，将实时编码通道保持为“正在运行”状态会产生费用。建议在实时流式处理事件完成之后立即停止正在运行的通道，以避免产生额外的小时费用。",
      "pos": [
        1150,
        1273
      ]
    },
    {
      "pos": [
        1276,
        1431
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>本主题讨论为执行实时编码（“标准”编码类型）启用的频道的属性。有关使用未为执行实时编码启用的频道的信息，请参阅<bpt id=\"p1\">[</bpt>使用从本地编码器接收多比特率实时流的频道<ept id=\"p1\">](/documentation/articles/media-services-manage-channels-overview)</ept>。"
    },
    {
      "pos": [
        1435,
        1543
      ],
      "content": "请务必仔细阅读<bpt id=\"p1\">[</bpt>注意事项<ept id=\"p1\">](/documentation/articles/media-services-manage-live-encoder-enabled-channels#Considerations)</ept>部分。"
    },
    {
      "content": "计费影响",
      "pos": [
        1549,
        1553
      ]
    },
    {
      "content": "一旦通过 API 将实时编码通道的状态转换为“正在运行”，就会开始计费。你也可以在 Azure 管理门户或 Azure 媒体服务资源管理器工具 (https://github.com/Azure/Azure-Media-Services-Explorer/releases/tag/v3.37.0.0) 中查看状态。",
      "pos": [
        1555,
        1713
      ]
    },
    {
      "content": "下表显示了通道状态如何映射为 API 和 Azure 管理门户中的计费状态。请注意，API 与门户 UX 之间的状态略有不同。一旦通过 API 将通道置于“正在运行”状态，或者在 Azure 管理门户中将它设置为“就绪”或“正在流式处理”状态，就会开始计费。若要阻止通道进一步向你计费，你必须通过 API 或 Azure 管理门户停止通道。在使用完实时编码通道时，你需要亲自停止通道。不停止编码通道会导致持续计费。",
      "pos": [
        1715,
        1922
      ]
    },
    {
      "pos": [
        1927,
        1961
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"states\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>通道状态及其如何映射到计费模式"
    },
    {
      "content": "频道的当前状态。可能的值包括：",
      "pos": [
        1964,
        1979
      ]
    },
    {
      "pos": [
        1983,
        2058
      ],
      "content": "<bpt id=\"p1\">**</bpt>已停止<ept id=\"p1\">**</ept>。这是通道在创建后的初始状态（除非在门户中选择了自动启动）。 此状态下不会发生计费。在此状态下，可以更新频道属性，但不允许进行流式传输。"
    },
    {
      "pos": [
        2061,
        2129
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在启动<ept id=\"p1\">**</ept>。频道正在启动。此状态下不会发生计费。在此状态下，不允许进行更新或流式传输。如果发生错误，则频道会返回到“已停止”状态。"
    },
    {
      "pos": [
        2132,
        2176
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在运行<ept id=\"p1\">**</ept>。频道能够处理实时流。现在会计收使用费。你必须停止通道以防止进一步计费。"
    },
    {
      "pos": [
        2180,
        2229
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在停止<ept id=\"p1\">**</ept>。频道正在停止。此暂时性状态下不会发生计费。在此状态下，不允许进行更新或流式传输。"
    },
    {
      "pos": [
        2232,
        2281
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在删除<ept id=\"p1\">**</ept>。频道正被删除。此暂时性状态下不会发生计费。在此状态下，不允许进行更新或流式传输。"
    },
    {
      "content": "下表显示频道状态如何映射到计费模式。",
      "pos": [
        2283,
        2301
      ]
    },
    {
      "content": "频道状态",
      "pos": [
        2304,
        2308
      ]
    },
    {
      "content": "门户 UI 指示器",
      "pos": [
        2309,
        2318
      ]
    },
    {
      "content": "是否计费？",
      "pos": [
        2319,
        2324
      ]
    },
    {
      "content": "正在启动",
      "pos": [
        2337,
        2341
      ]
    },
    {
      "content": "正在启动",
      "pos": [
        2342,
        2346
      ]
    },
    {
      "content": "否（暂时状态）",
      "pos": [
        2347,
        2354
      ]
    },
    {
      "content": "正在运行",
      "pos": [
        2355,
        2359
      ]
    },
    {
      "content": "准备就绪（没有正在运行的节目）",
      "pos": [
        2360,
        2375
      ]
    },
    {
      "content": "或",
      "pos": [
        2380,
        2381
      ]
    },
    {
      "content": "流式处理（至少有一个正在运行的节目）",
      "pos": [
        2386,
        2404
      ]
    },
    {
      "content": "是",
      "pos": [
        2405,
        2406
      ]
    },
    {
      "content": "正在停止",
      "pos": [
        2407,
        2411
      ]
    },
    {
      "content": "正在停止",
      "pos": [
        2412,
        2416
      ]
    },
    {
      "content": "否（暂时状态）",
      "pos": [
        2417,
        2424
      ]
    },
    {
      "content": "已停止",
      "pos": [
        2425,
        2428
      ]
    },
    {
      "content": "已停止",
      "pos": [
        2429,
        2432
      ]
    },
    {
      "content": "否",
      "pos": [
        2433,
        2434
      ]
    },
    {
      "content": "对未使用的通道自动关闭",
      "pos": [
        2439,
        2450
      ]
    },
    {
      "content": "从 2016 年 1 月 25 日开始，媒体服务推出了一项更新，对于长时间以未使用状态运行的通道，它会自动停止该通道（已启用实时编码）。这适用于没有活动节目且长时间未收到输入贡献源的通道。",
      "pos": [
        2452,
        2546
      ]
    },
    {
      "content": "未使用期限的阈值通常为 12 个小时，但随时会变化。",
      "pos": [
        2548,
        2574
      ]
    },
    {
      "content": "实时编码工作流",
      "pos": [
        2578,
        2585
      ]
    },
    {
      "content": "下图表示了实时流式处理工作流，其中频道通过以下协议之一接收单比特率流：RTMP、平滑流式处理或 RTP (MPEG-TS)；然后，将该流编码为多比特率流。",
      "pos": [
        2586,
        2663
      ]
    },
    {
      "content": "实时工作流",
      "pos": [
        2667,
        2672
      ]
    },
    {
      "content": "本主题内容",
      "pos": [
        2693,
        2698
      ]
    },
    {
      "pos": [
        2702,
        2800
      ],
      "content": "概述<bpt id=\"p1\">[</bpt>常见的实时流方案<ept id=\"p1\">](/documentation/articles/media-services-manage-live-encoder-enabled-channels#scenario)</ept>"
    },
    {
      "content": "频道及其相关组件的说明",
      "pos": [
        2804,
        2815
      ]
    },
    {
      "content": "注意事项",
      "pos": [
        2905,
        2909
      ]
    },
    {
      "pos": [
        3007,
        3036
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"scenario\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>常见的实时流方案"
    },
    {
      "content": "以下是在创建常见的实时流应用程序时涉及的常规步骤。",
      "pos": [
        3038,
        3063
      ]
    },
    {
      "pos": [
        3066,
        3233
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> 目前，实时事件的最大建议持续时间为 8 小时。如果你需要长时间运行某个通道，请通过 WindowsAzure.cn 联系 amslived。请注意，实时编码会影响计费，你应该记住，将实时编码通道保持为“正在运行”状态会产生费用。建议在实时流式处理事件完成之后立即停止正在运行的通道，以避免产生额外的小时费用。"
    },
    {
      "pos": [
        3238,
        3444
      ],
      "content": "将视频摄像机连接到计算机。启动并配置可以通过以下协议之一输出<bpt id=\"p1\">**</bpt>单<ept id=\"p1\">**</ept>比特率流的本地实时编码器：RTMP、平滑流式处理或 RTP (MPEG-TS)。有关详细信息，请参阅 <bpt id=\"p2\">[</bpt>Azure 媒体服务 RTMP 支持和实时编码器<ept id=\"p2\">](https://azure.microsoft.com/zh-cn/blog/azure-media-services-rtmp-support-and-live-encoders/)</ept>。"
    },
    {
      "content": "此步骤也可以在创建频道后执行。",
      "pos": [
        3454,
        3469
      ]
    },
    {
      "content": "创建并启动频道。",
      "pos": [
        3474,
        3482
      ]
    },
    {
      "content": "检索频道引入 URL。",
      "pos": [
        3487,
        3498
      ]
    },
    {
      "content": "实时编码器使用引入 URL 将流发送到频道。",
      "pos": [
        3504,
        3526
      ]
    },
    {
      "content": "检索频道预览 URL。",
      "pos": [
        3530,
        3541
      ]
    },
    {
      "content": "使用此 URL 来验证频道是否正常接收实时流。",
      "pos": [
        3548,
        3571
      ]
    },
    {
      "content": "创建节目。",
      "pos": [
        3576,
        3581
      ]
    },
    {
      "content": "使用 Azure 管理门户时，创建节目的同时还会创建资源。",
      "pos": [
        3587,
        3616
      ]
    },
    {
      "content": "使用 .NET SDK 或 REST 时，你需要创建一个资源并指定在创建节目时要使用该资源。",
      "pos": [
        3622,
        3668
      ]
    },
    {
      "content": "发布与节目关联的资源。",
      "pos": [
        3673,
        3684
      ]
    },
    {
      "content": "确保你要从中以流形式传输内容的流式传输终结点上至少有一个流式传输保留单元。",
      "pos": [
        3693,
        3730
      ]
    },
    {
      "content": "在准备好开始流式传输和存档时，启动节目。",
      "pos": [
        3734,
        3754
      ]
    },
    {
      "content": "（可选）可以向实时编码器发信号，以启动广告。将广告插入到输出流中。",
      "pos": [
        3758,
        3791
      ]
    },
    {
      "content": "在要停止对事件进行流式传输和存档时，停止节目。",
      "pos": [
        3795,
        3818
      ]
    },
    {
      "content": "删除节目（并选择性地删除资产）。",
      "pos": [
        3822,
        3838
      ]
    },
    {
      "pos": [
        3844,
        3958
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>千万不要忘记停止实时编码通道。请注意，实时编码会影响每小时计费，你应该记住，将实时编码通道保持为“正在运行”状态会产生费用。建议在实时流式处理事件完成之后立即停止正在运行的通道，以避免产生额外的小时费用。"
    },
    {
      "pos": [
        3961,
        4062
      ],
      "content": "<bpt id=\"p1\">[</bpt>实时流式处理任务<ept id=\"p1\">](/documentation/articles/media-services-manage-channels-overview#tasks)</ept>部分将链接到演示如何完成上述任务的主题。"
    },
    {
      "pos": [
        4067,
        4097
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"channel\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>频道输入（引入）配置"
    },
    {
      "pos": [
        4102,
        4139
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Ingest_Protocols\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>引入流式传输协议"
    },
    {
      "pos": [
        4141,
        4172
      ],
      "content": "如果<bpt id=\"p1\">**</bpt>“编码器类型”<ept id=\"p1\">**</ept>设为<bpt id=\"p2\">**</bpt>“标准”<ept id=\"p2\">**</ept>，则有效选项为："
    },
    {
      "pos": [
        4176,
        4212
      ],
      "content": "<bpt id=\"p1\">**</bpt>RTP<ept id=\"p1\">**</ept> (MPEG-TS)：RTP 上的 MPEG-2 传输流。"
    },
    {
      "pos": [
        4217,
        4230
      ],
      "content": "单比特率 <bpt id=\"p1\">**</bpt>RTMP<ept id=\"p1\">**</ept>"
    },
    {
      "pos": [
        4233,
        4252
      ],
      "content": "单比特率<bpt id=\"p1\">**</bpt>分片 MP4<ept id=\"p1\">**</ept>（平滑流）"
    },
    {
      "pos": [
        4254,
        4385
      ],
      "content": "有关详细信息，请参阅 <bpt id=\"p1\">[</bpt>Azure 媒体服务 RTMP 支持和实时编码器<ept id=\"p1\">](https://azure.microsoft.com/zh-cn/blog/azure-media-services-rtmp-support-and-live-encoders/)</ept>。"
    },
    {
      "content": "RTP (MPEG-TS) - RTP 上的 MPEG-2 传输流。",
      "pos": [
        4391,
        4425
      ]
    },
    {
      "content": "典型用例：",
      "pos": [
        4429,
        4434
      ]
    },
    {
      "content": "专业广播者通常使用供应商提供的高端本地实时编码器（如 Elemental Technologies、Ericsson、Ateme、Imagine 或 Envivio）来发送流。通常与 IT 部门和专用网络配合使用。",
      "pos": [
        4436,
        4543
      ]
    },
    {
      "content": "注意事项：",
      "pos": [
        4545,
        4550
      ]
    },
    {
      "content": "强烈建议使用单节目传输流 (SPTS) 输入。",
      "pos": [
        4554,
        4577
      ]
    },
    {
      "content": "使用 MPEG-2 TS over RTP 最多可以输入 8 个音频流。",
      "pos": [
        4581,
        4617
      ]
    },
    {
      "content": "视频流应具有小于 15 Mbps 的平均比特率",
      "pos": [
        4621,
        4644
      ]
    },
    {
      "content": "音频流的聚合平均比特率应小于 1 Mbps",
      "pos": [
        4647,
        4668
      ]
    },
    {
      "content": "以下是支持的编解码器：",
      "pos": [
        4671,
        4682
      ]
    },
    {
      "content": "MPEG-2/H.262 Video",
      "pos": [
        4689,
        4707
      ]
    },
    {
      "content": "Main Profile (4:2:0)",
      "pos": [
        4728,
        4748
      ]
    },
    {
      "content": "High Profile (4:2:0, 4:2:2)",
      "pos": [
        4759,
        4786
      ]
    },
    {
      "content": "422 Profile (4:2:0, 4:2:2)",
      "pos": [
        4797,
        4823
      ]
    },
    {
      "content": "MPEG-4 AVC/H.264 Video",
      "pos": [
        4831,
        4853
      ]
    },
    {
      "content": "Baseline、Main、High Profile（8 位 4:2:0）",
      "pos": [
        4869,
        4906
      ]
    },
    {
      "content": "High 10 Profile（10 位 4:2:0）",
      "pos": [
        4917,
        4944
      ]
    },
    {
      "content": "High 422 Profile（10 位 4:2:2）",
      "pos": [
        4955,
        4983
      ]
    },
    {
      "content": "建议的广播编码器包括：",
      "pos": [
        5233,
        5244
      ]
    },
    {
      "content": "Ateme AM2102",
      "pos": [
        5251,
        5263
      ]
    },
    {
      "content": "Ericsson AVP2000",
      "pos": [
        5270,
        5286
      ]
    },
    {
      "content": "eVertz 3480",
      "pos": [
        5293,
        5304
      ]
    },
    {
      "content": "Ericsson RX8200",
      "pos": [
        5311,
        5326
      ]
    },
    {
      "content": "Imagine Communications Selenio ENC 1",
      "pos": [
        5333,
        5369
      ]
    },
    {
      "content": "Imagine Communications Selenio ENC 2",
      "pos": [
        5376,
        5412
      ]
    },
    {
      "content": "AdTec EN-30",
      "pos": [
        5419,
        5430
      ]
    },
    {
      "content": "AdTec EN-91P",
      "pos": [
        5437,
        5449
      ]
    },
    {
      "content": "AdTec EN-100",
      "pos": [
        5456,
        5468
      ]
    },
    {
      "content": "Harmonic ProStream 1000",
      "pos": [
        5475,
        5498
      ]
    },
    {
      "content": "Thor H-2 4HD-EM",
      "pos": [
        5505,
        5520
      ]
    },
    {
      "content": "eVertz 7880 SLKE",
      "pos": [
        5527,
        5543
      ]
    },
    {
      "content": "Cisco Spinnaker",
      "pos": [
        5550,
        5565
      ]
    },
    {
      "content": "Elemental Live",
      "pos": [
        5572,
        5586
      ]
    },
    {
      "pos": [
        5592,
        5633
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"single_bitrate_RTMP\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>单比特率 RTMP"
    },
    {
      "content": "注意事项：",
      "pos": [
        5635,
        5640
      ]
    },
    {
      "content": "传入流不能包含多码率视频",
      "pos": [
        5644,
        5656
      ]
    },
    {
      "content": "视频流应具有小于 15 Mbps 的平均比特率",
      "pos": [
        5659,
        5682
      ]
    },
    {
      "content": "音频流应具有小于 1 Mbps 的平均比特率",
      "pos": [
        5685,
        5707
      ]
    },
    {
      "content": "以下是支持的编解码器：",
      "pos": [
        5710,
        5721
      ]
    },
    {
      "content": "MPEG-4 AVC/H.264 Video",
      "pos": [
        5729,
        5751
      ]
    },
    {
      "content": "Baseline、Main、High Profile（8 位 4:2:0）",
      "pos": [
        5769,
        5806
      ]
    },
    {
      "content": "High 10 Profile（10 位 4:2:0）",
      "pos": [
        5817,
        5844
      ]
    },
    {
      "content": "High 422 Profile（10 位 4:2:2）",
      "pos": [
        5855,
        5883
      ]
    },
    {
      "content": "MPEG-2 AAC-LC Audio",
      "pos": [
        5891,
        5910
      ]
    },
    {
      "content": "Mono、Stereo、Surround (5.1, 7.1)",
      "pos": [
        5922,
        5953
      ]
    },
    {
      "content": "44\\.1 kHz 采样率",
      "pos": [
        5964,
        5977
      ]
    },
    {
      "content": "MPEG-2 样式 ADTS 打包",
      "pos": [
        5988,
        6005
      ]
    },
    {
      "content": "建议的编码器包括：",
      "pos": [
        6013,
        6022
      ]
    },
    {
      "content": "Telestream Wirecast",
      "pos": [
        6030,
        6049
      ]
    },
    {
      "content": "Flash 媒体实时编码器",
      "pos": [
        6056,
        6069
      ]
    },
    {
      "content": "Tricaster",
      "pos": [
        6076,
        6085
      ]
    },
    {
      "content": "单比特率分片 MP4（平滑流）",
      "pos": [
        6091,
        6106
      ]
    },
    {
      "content": "典型用例：",
      "pos": [
        6108,
        6113
      ]
    },
    {
      "content": "使用供应商提供的本地实时编码器（如 Elemental Technologies、Ericsson、Ateme、Envivio）通过开放的 Internet 将输入流发送到附近的 Azure 数据中心。",
      "pos": [
        6115,
        6216
      ]
    },
    {
      "content": "注意事项：",
      "pos": [
        6218,
        6223
      ]
    },
    {
      "pos": [
        6225,
        6340
      ],
      "content": "这同样适用于<bpt id=\"p1\">[</bpt>单比特率 RTMP<ept id=\"p1\">](/documentation/articles/media-services-manage-live-encoder-enabled-channels#single_bitrate_RTMP)</ept>。"
    },
    {
      "content": "其他注意事项",
      "pos": [
        6346,
        6352
      ]
    },
    {
      "content": "当频道或其关联的节目正在运行时，无法更改输入协议。如果你需要不同的协议，应当针对每个输入协议创建单独的频道。",
      "pos": [
        6356,
        6410
      ]
    },
    {
      "content": "传入视频流的最大分辨率为 1920 x 1080，如果隔行扫描，速率最大为 60 个字段/秒，如果渐进式下载，则速度为 30 帧/秒。",
      "pos": [
        6414,
        6481
      ]
    },
    {
      "content": "摄取 URL（终结点）",
      "pos": [
        6487,
        6498
      ]
    },
    {
      "content": "频道提供你在实时编码器中指定的输入终结点（引入 URL），因此编码器可以将流推送到你的频道。",
      "pos": [
        6501,
        6547
      ]
    },
    {
      "pos": [
        6549,
        6662
      ],
      "content": "创建频道后，你可以获得引入 URL。若要获取这些 URL，频道不一定要处于<bpt id=\"p1\">**</bpt>“正在运行”<ept id=\"p1\">**</ept>状态。当准备好开始将数据推送到频道时，频道必须处于<bpt id=\"p2\">**</bpt>“正在运行”<ept id=\"p2\">**</ept>状态。在频道开始引入数据后，你可以通过预览 URL 来预览流。"
    },
    {
      "content": "可以选择通过 SSL 连接引入分片 MP4（平滑流）实时流。若要通过 SSL 进行摄取，请确保将摄取 URL 更新为 HTTPS。",
      "pos": [
        6664,
        6729
      ]
    },
    {
      "content": "允许的 IP 地址",
      "pos": [
        6734,
        6743
      ]
    },
    {
      "content": "你可以定义允许向此频道发布视频的 IP 地址。允许的 IP 地址可以指定为单个 IP 地址（例如 ‘10.0.0.1’）或指定为使用一个 IP 地址和 CIDR 子网掩码的 IP 范围（例如 ‘10.0.0.1/22’）或指定为使用一个 IP 地址和点分十进制子网掩码的 IP 范围（例如 ‘10.0.0.1(255.255.252.0)’）。",
      "pos": [
        6745,
        6917
      ]
    },
    {
      "content": "如果未指定 IP 地址并且没有规则定义，则不会允许任何 IP 地址。若要允许任何 IP 地址，请创建一个规则并设置 0.0.0.0/0。",
      "pos": [
        6919,
        6987
      ]
    },
    {
      "content": "频道预览",
      "pos": [
        6992,
        6996
      ]
    },
    {
      "content": "预览 URL",
      "pos": [
        7002,
        7008
      ]
    },
    {
      "content": "频道还提供了一个预览终结点（预览 URL），你可以使用它在进一步处理和传递流之前预览流并对其进行验证。",
      "pos": [
        7010,
        7061
      ]
    },
    {
      "pos": [
        7063,
        7112
      ],
      "content": "你可以在创建频道时获取预览 URL。若要获取该 URL，频道不一定要处于<bpt id=\"p1\">**</bpt>“正在运行”<ept id=\"p1\">**</ept>状态。"
    },
    {
      "content": "在频道开始摄取数据后，你可以预览流。",
      "pos": [
        7114,
        7132
      ]
    },
    {
      "pos": [
        7135,
        7312
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>当前，不管指定了哪种输入类型，都只能以分片 MP4（平滑流）格式来传送预览流。你可以使用 <bpt id=\"p1\">[</bpt>http://smf.cloudapp.net/healthmonitor<ept id=\"p1\">](http://smf.cloudapp.net/healthmonitor)</ept> 播放器来测试平滑流。你还可以使用 Azure 管理门户中承载的播放器来查看你的流。"
    },
    {
      "content": "允许的 IP 地址",
      "pos": [
        7317,
        7326
      ]
    },
    {
      "content": "你可以定义允许连接到预览终结点的 IP 地址。如果未指定 IP 地址，则将允许任何 IP 地址。允许的 IP 地址可以指定为单个 IP 地址（例如 ‘10.0.0.1’）或指定为使用一个 IP 地址和 CIDR 子网掩码的 IP 范围（例如 ‘10.0.0.1/22’）或指定为使用一个 IP 地址和点分十进制子网掩码的 IP 范围（例如 ‘10.0.0.1(255.255.252.0)’）。",
      "pos": [
        7328,
        7525
      ]
    },
    {
      "content": "实时编码设置",
      "pos": [
        7529,
        7535
      ]
    },
    {
      "pos": [
        7537,
        7585
      ],
      "content": "本部分介绍当频道的<bpt id=\"p1\">**</bpt>“编码类型”<ept id=\"p1\">**</ept>设为<bpt id=\"p2\">**</bpt>“标准”<ept id=\"p2\">**</ept>时，如何调整频道内的实时编码器的设置。"
    },
    {
      "pos": [
        7588,
        7828
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>在 Azure 中输入多个语言轨迹和执行实时编码时，多语言输入仅支持 RTP。使用 MPEG-2 TS over RTP 最多可以定义 8 个音频流。当前不支持使用 RTMP 或平滑流引入多个音频轨迹。使用<bpt id=\"p1\">[</bpt>本地实时编码器<ept id=\"p1\">](/documentation/articles/media-services-manage-channels-overview)</ept>执行实时编码时，将不存在这种限制，因为发送到 AMS 的任何数据都会通过某个通道，而不做进一步的处理。"
    },
    {
      "content": "Ad 标记源",
      "pos": [
        7833,
        7839
      ]
    },
    {
      "pos": [
        7841,
        7901
      ],
      "content": "你可以指定 Ad 标记信号源。默认值是 <bpt id=\"p1\">**</bpt>Api<ept id=\"p1\">**</ept>，它指示频道内的实时编码器应侦听异步 <bpt id=\"p2\">**</bpt>Ad 标记 API<ept id=\"p2\">**</ept>。"
    },
    {
      "pos": [
        7903,
        8006
      ],
      "content": "另一个有效选项是 <bpt id=\"p1\">**</bpt>Scte35<ept id=\"p1\">**</ept>（仅当引入流协议设为 RTP (MPEG-TS) 时允许）。当指定了 Scte35 时，实时编码器将分析输入 RTP (MPEG-TS) 流中的 SCTE-35 信号。"
    },
    {
      "content": "CEA 708 关闭字幕",
      "pos": [
        8011,
        8023
      ]
    },
    {
      "content": "一个可选的标志，它指示实时编码器忽略传入视频中嵌入的任何 CEA 708 字幕数据。当该标志设为 false（默认值）时，编码器将检测 CEA 708 数据并将该数据重新插入到输出视频流中。",
      "pos": [
        8025,
        8120
      ]
    },
    {
      "content": "视频流",
      "pos": [
        8125,
        8128
      ]
    },
    {
      "content": "可选。描述输入视频流。如果未指定此字段，则使用默认值。仅当输入流协议设为 RTP (MPEG-TS) 时，才允许使用此设置。",
      "pos": [
        8130,
        8192
      ]
    },
    {
      "content": "索引",
      "pos": [
        8198,
        8200
      ]
    },
    {
      "content": "一个从零开始的索引，它指定哪个输入视频流应由频道内的实时编码器处理。仅当引入流协议是 RTP (MPEG-TS) 时，此设置才适用。",
      "pos": [
        8202,
        8268
      ]
    },
    {
      "content": "默认值为 0。建议在单节目传输流 (SPTS) 中发送。如果输入流包含多个节目，实时编码器将分析输入中的节目映射表 (PMT)，标识流类型名称为 MPEG-2 Video 或 H.264 的输入并以 PMT 中指定的顺序安排这些输入。然后，将使用从零开始的索引选取该安排中的第 n 个条目。",
      "pos": [
        8270,
        8415
      ]
    },
    {
      "content": "音频流",
      "pos": [
        8420,
        8423
      ]
    },
    {
      "content": "可选。描述输入音频流。如果未指定此字段，则将应用指定的默认值。仅当输入流协议设为 RTP (MPEG-TS) 时，才允许使用此设置。",
      "pos": [
        8425,
        8491
      ]
    },
    {
      "content": "索引",
      "pos": [
        8497,
        8499
      ]
    },
    {
      "content": "建议在单节目传输流 (SPTS) 中发送。如果输入流包含多个节目，频道中的实时编码器将分析输入中的节目映射表 (PMT)，标识流类型名称为 MPEG-2 AAC ADTS、AC-3 System-A、AC-3 System-B、MPEG-2 Private PES、MPEG-1 Audio 或 MPEG-2 Audio 的输入并以 PMT 中指定的顺序安排这些输入。然后，将使用从零开始的索引选取该安排中的第 n 个条目。",
      "pos": [
        8501,
        8713
      ]
    },
    {
      "content": "语言",
      "pos": [
        8719,
        8721
      ]
    },
    {
      "content": "音频流的符合 ISO 639-2 的语言标识符，如 ENG。如果不存在，则默认为 UND（未定义）。",
      "pos": [
        8723,
        8773
      ]
    },
    {
      "content": "如果频道的输入为 MPEG-2 TS over RTP，则最多可以指定 8 个音频流集。但是，不能有两个具有相同索引值的条目。",
      "pos": [
        8775,
        8838
      ]
    },
    {
      "pos": [
        8843,
        8866
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"preset\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>系统预设"
    },
    {
      "pos": [
        8868,
        8919
      ],
      "content": "指定此频道内的实时编码器要使用的预设。目前，唯一允许的值是 <bpt id=\"p1\">**</bpt>Default720p<ept id=\"p1\">**</ept>（默认值）。"
    },
    {
      "content": "请注意，如果你需要自定义预设，应通过 WindowsAzure.cn 联系 amslived。",
      "pos": [
        8921,
        8968
      ]
    },
    {
      "pos": [
        8970,
        9000
      ],
      "content": "<bpt id=\"p1\">**</bpt>Default720p<ept id=\"p1\">**</ept> 会将视频编码为以下 7 层。"
    },
    {
      "content": "输出视频流",
      "pos": [
        9007,
        9012
      ]
    },
    {
      "content": "比特率",
      "pos": [
        9014,
        9017
      ]
    },
    {
      "content": "宽度",
      "pos": [
        9018,
        9020
      ]
    },
    {
      "content": "高度",
      "pos": [
        9021,
        9023
      ]
    },
    {
      "content": "MaxFPS",
      "pos": [
        9024,
        9030
      ]
    },
    {
      "content": "配置文件",
      "pos": [
        9031,
        9035
      ]
    },
    {
      "content": "输出流名称",
      "pos": [
        9036,
        9041
      ]
    },
    {
      "content": "3500",
      "pos": [
        9066,
        9070
      ]
    },
    {
      "content": "1280",
      "pos": [
        9071,
        9075
      ]
    },
    {
      "content": "720",
      "pos": [
        9076,
        9079
      ]
    },
    {
      "content": "30",
      "pos": [
        9080,
        9082
      ]
    },
    {
      "content": "高",
      "pos": [
        9083,
        9084
      ]
    },
    {
      "content": "Video\\_1280x720\\_3500kbps",
      "pos": [
        9085,
        9110
      ]
    },
    {
      "content": "2200",
      "pos": [
        9111,
        9115
      ]
    },
    {
      "content": "960",
      "pos": [
        9116,
        9119
      ]
    },
    {
      "content": "540",
      "pos": [
        9120,
        9123
      ]
    },
    {
      "content": "30",
      "pos": [
        9124,
        9126
      ]
    },
    {
      "content": "主要",
      "pos": [
        9127,
        9129
      ]
    },
    {
      "content": "Video\\_960x540\\_2200kbps",
      "pos": [
        9130,
        9154
      ]
    },
    {
      "content": "1350",
      "pos": [
        9155,
        9159
      ]
    },
    {
      "content": "704",
      "pos": [
        9160,
        9163
      ]
    },
    {
      "content": "396",
      "pos": [
        9164,
        9167
      ]
    },
    {
      "content": "30",
      "pos": [
        9168,
        9170
      ]
    },
    {
      "content": "主要",
      "pos": [
        9171,
        9173
      ]
    },
    {
      "content": "Video\\_704x396\\_1350kbps",
      "pos": [
        9174,
        9198
      ]
    },
    {
      "content": "850",
      "pos": [
        9199,
        9202
      ]
    },
    {
      "content": "512",
      "pos": [
        9203,
        9206
      ]
    },
    {
      "content": "288",
      "pos": [
        9207,
        9210
      ]
    },
    {
      "content": "30",
      "pos": [
        9211,
        9213
      ]
    },
    {
      "content": "主要",
      "pos": [
        9214,
        9216
      ]
    },
    {
      "content": "Video\\_512x288\\_850kbps",
      "pos": [
        9217,
        9240
      ]
    },
    {
      "content": "550",
      "pos": [
        9241,
        9244
      ]
    },
    {
      "content": "384",
      "pos": [
        9245,
        9248
      ]
    },
    {
      "content": "216",
      "pos": [
        9249,
        9252
      ]
    },
    {
      "content": "30",
      "pos": [
        9253,
        9255
      ]
    },
    {
      "content": "主要",
      "pos": [
        9256,
        9258
      ]
    },
    {
      "content": "Video\\_384x216\\_550kbps",
      "pos": [
        9259,
        9282
      ]
    },
    {
      "content": "350",
      "pos": [
        9283,
        9286
      ]
    },
    {
      "content": "340",
      "pos": [
        9287,
        9290
      ]
    },
    {
      "content": "192",
      "pos": [
        9291,
        9294
      ]
    },
    {
      "content": "30",
      "pos": [
        9295,
        9297
      ]
    },
    {
      "content": "基线",
      "pos": [
        9298,
        9300
      ]
    },
    {
      "content": "Video\\_340x192\\_350kbps",
      "pos": [
        9301,
        9324
      ]
    },
    {
      "content": "200",
      "pos": [
        9325,
        9328
      ]
    },
    {
      "content": "340",
      "pos": [
        9329,
        9332
      ]
    },
    {
      "content": "192",
      "pos": [
        9333,
        9336
      ]
    },
    {
      "content": "30",
      "pos": [
        9337,
        9339
      ]
    },
    {
      "content": "基线",
      "pos": [
        9340,
        9342
      ]
    },
    {
      "content": "Video\\_340x192\\_200kbps",
      "pos": [
        9343,
        9366
      ]
    },
    {
      "content": "输出音频流",
      "pos": [
        9373,
        9378
      ]
    },
    {
      "content": "音频以 64 kbps 的速率编码为立体声 AAC-LC，采样率为 44.1 kHz。",
      "pos": [
        9380,
        9423
      ]
    },
    {
      "content": "指示广告",
      "pos": [
        9427,
        9431
      ]
    },
    {
      "pos": [
        9433,
        9714
      ],
      "content": "当频道已启用实时编码时，你在管道中有一个组件正在处理视频，并可以操作它。你可以向频道发出信号，以将清单和/或广告插入到传出自适应比特率流中。清单是在某些情况下（例如，在商业广告期间）可用于覆盖输入实时源的静止图像。广告信号是嵌入到传出流中的时间同步信号，用于指示视频播放机执行特殊操作 - 例如，在适当时间切换到广告。有关用于此目的的 SCTE-35 信号机制的概述，请参阅此<bpt id=\"p1\">[</bpt>博客<ept id=\"p1\">](https://codesequoia.wordpress.com/2014/02/24/understanding-scte-35/)</ept>。下面是可以在实时事件中实现的典型方案。"
    },
    {
      "content": "在事件开始前，让观看者获得事件前图像。",
      "pos": [
        9719,
        9738
      ]
    },
    {
      "content": "在事件结束后，让观看者获得事件后图像。",
      "pos": [
        9742,
        9761
      ]
    },
    {
      "content": "如果在事件期间出现问题（例如，在体育场中出现电源故障，让观看者获得错误事件图像)。",
      "pos": [
        9765,
        9806
      ]
    },
    {
      "content": "在商业广告期间发送广告时间图像以隐藏实时事件源。",
      "pos": [
        9810,
        9834
      ]
    },
    {
      "content": "以下是指示广告时可以设置的属性。",
      "pos": [
        9836,
        9852
      ]
    },
    {
      "content": "Duration",
      "pos": [
        9857,
        9865
      ]
    },
    {
      "content": "商业广告的持续时间（以秒为单位）。这必须是非零正值，才能启动商业广告。当商业广告正在播放时，将持续时间设为 0，并且 CueId 与正在播放的商业广告匹配，则广告将被取消。",
      "pos": [
        9867,
        9953
      ]
    },
    {
      "content": "CueId",
      "pos": [
        9958,
        9963
      ]
    },
    {
      "content": "商业广告的唯一 ID，下游应用程序将使用它来执行相应操作。必须是一个正整数。可以将此值设为任意随机正整数，或使用上游系统跟踪提示 ID。在通过 API 提交之前，请确保将任何 ID 规范化为正整数。",
      "pos": [
        9965,
        10064
      ]
    },
    {
      "content": "显示清单",
      "pos": [
        10069,
        10073
      ]
    },
    {
      "pos": [
        10075,
        10230
      ],
      "content": "可选。指示实时编码器在商业广告期间切换到<bpt id=\"p1\">[</bpt>默认静态<ept id=\"p1\">](/documentation/articles/media-services-manage-live-encoder-enabled-channels#default_slate)</ept>图像并隐藏传入视频源。在清单期间音频也会静音。默认值为 <bpt id=\"p2\">**</bpt>false<ept id=\"p2\">**</ept>。"
    },
    {
      "content": "所用图像将是在创建频道时通过默认清单资源 ID 属性指定的图像。静态图像将进行拉伸以适合显示图像大小。",
      "pos": [
        10233,
        10284
      ]
    },
    {
      "content": "插入清单图像",
      "pos": [
        10289,
        10295
      ]
    },
    {
      "content": "可以向频道中的实时编码器发出信号，以切换到清单图像。它还可以指示实时编码器结束正在显示的清单。",
      "pos": [
        10297,
        10344
      ]
    },
    {
      "content": "在某些情况下（例如，在广告期间）可以配置实时编码器以切换到静态图像，并隐藏传入的视频信号。如果未配置此类清单，则在该广告期间将不会屏蔽输入视频。",
      "pos": [
        10346,
        10418
      ]
    },
    {
      "content": "Duration",
      "pos": [
        10423,
        10431
      ]
    },
    {
      "content": "清单的持续时间（以秒为单位）。这必须是非零正值，才能启动清单。如果正在显示清单，并且指定的持续时间为零，则将终止正在显示的清单。",
      "pos": [
        10433,
        10497
      ]
    },
    {
      "content": "在 Ad 标记上插入清单",
      "pos": [
        10502,
        10514
      ]
    },
    {
      "content": "当设为 true 时，此设置会将实时编码器配置为在广告期间插入清单图像。默认值为 true。",
      "pos": [
        10516,
        10562
      ]
    },
    {
      "pos": [
        10567,
        10604
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"default_slate\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>默认静态图像资产 ID"
    },
    {
      "content": "可选。指定媒体服务资源（包含清单图像）的资源 ID。默认值为 null。",
      "pos": [
        10606,
        10642
      ]
    },
    {
      "pos": [
        10644,
        10694
      ],
      "content": "<bpt id=\"p1\">**</bpt>注意<ept id=\"p1\">**</ept>：在创建频道之前，具有以下约束的静态图像应当作为专用资产上载（该资产中不应有其他文件）。"
    },
    {
      "content": "分辨率最大为 1920x1080。",
      "pos": [
        10698,
        10715
      ]
    },
    {
      "content": "大小最大为 3 MB。",
      "pos": [
        10718,
        10729
      ]
    },
    {
      "content": "文件名必须具有 *.jpg 扩展名。",
      "pos": [
        10732,
        10750
      ]
    },
    {
      "content": "必须将该图像作为资产中的唯一 AssetFile 上载到资产，此 AssetFile 应标记为主文件。资产不能加密存储。",
      "pos": [
        10753,
        10813
      ]
    },
    {
      "pos": [
        10815,
        10905
      ],
      "content": "如果未指定<bpt id=\"p1\">**</bpt>默认清单资源 ID<ept id=\"p1\">**</ept>，并且<bpt id=\"p2\">**</bpt>“在 ad 标记上插入清单”<ept id=\"p2\">**</ept>设为 <bpt id=\"p3\">**</bpt>true<ept id=\"p3\">**</ept>，则将使用默认 Azure 媒体服务图像隐藏输入视频流。在清单期间音频也会静音。"
    },
    {
      "content": "频道的节目",
      "pos": [
        10910,
        10915
      ]
    },
    {
      "content": "频道与节目相关联，使用节目，你可以控制实时流中的段的发布和存储。通道管理节目。通道和节目的关系非常类似于传统媒体，通道具有恒定的内容流，而节目的范围限定为该通道上的一些定时事件。",
      "pos": [
        10917,
        11006
      ]
    },
    {
      "pos": [
        11008,
        11169
      ],
      "content": "可以通过设置<bpt id=\"p1\">**</bpt>存档窗口<ept id=\"p1\">**</ept>长度，指定你希望保留节目录制内容的小时数。此值的设置范围是最短 5 分钟，最长 25 小时。存储时间窗口长度还决定了客户端能够从当前实时位置按时间向后搜索的最长时间。超出指定时间长度后，节目也能够运行，但落在时间窗口长度后面的内容将全部被丢弃。此属性的这个值还决定了客户端清单能够增加多长时间。"
    },
    {
      "content": "每个节目都与存储流式处理内容的资源相关联。资产将映射到 Azure Storage 帐户中的 BLOB 容器，资产中的文件则作为该容器中的 BLOB 存储。若要发布节目，以便客户可以查看该流，必须为关联的资源创建按需定位符。创建此定位符后，你可以生成提供给客户端的流 URL。",
      "pos": [
        11171,
        11309
      ]
    },
    {
      "content": "一个频道最多支持三个同时运行的节目，因此你可以为同一传入流创建多个存档。这样，你便可以根据需要发布和存档事件的不同部分。例如，你的业务要求是存档 6 小时的节目，但只广播过去 10 分钟的内容。为了实现此目的，你需要创建两个同时运行的节目。一个节目设置为存档 6 小时的事件但不发布该节目。另一个节目设置为存档 10 分钟的事件，并且要发布该节目。",
      "pos": [
        11311,
        11485
      ]
    },
    {
      "content": "不应当将现有节目重用于新事件。而是应当为每个事件创建并启动一个新节目，如“对实时流式传输应用程序进行编程”部分中所述。",
      "pos": [
        11487,
        11546
      ]
    },
    {
      "content": "在准备好开始流式传输和存档时，启动节目。在要停止对事件进行流式传输和存档时，停止节目。",
      "pos": [
        11548,
        11591
      ]
    },
    {
      "content": "若要删除存档的内容，请停止并删除节目，然后删除关联的资产。如果资产被某个节目使用，则无法将其删除，必须先删除该节目。",
      "pos": [
        11593,
        11651
      ]
    },
    {
      "content": "即使你停止并删除了节目，只要你没有删除资产，用户也将能够按需将你的已存档内容作为视频进行流式传输。",
      "pos": [
        11653,
        11702
      ]
    },
    {
      "content": "如果希望保留已存档的内容但不希望其可供流式传输，请删除流式传输定位符。",
      "pos": [
        11704,
        11739
      ]
    },
    {
      "content": "获取实时源的缩略图预览",
      "pos": [
        11744,
        11755
      ]
    },
    {
      "content": "启用实时编码后，你现在可以在实时源到达频道时获得实时源的预览。这可以是一个很有用的工具，用于检查实时源是否实际到达频道。",
      "pos": [
        11757,
        11817
      ]
    },
    {
      "pos": [
        11821,
        11858
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"states\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>频道状态，以及状态如何映射到计费模式"
    },
    {
      "content": "频道的当前状态。可能的值包括：",
      "pos": [
        11861,
        11876
      ]
    },
    {
      "pos": [
        11880,
        11928
      ],
      "content": "<bpt id=\"p1\">**</bpt>已停止<ept id=\"p1\">**</ept>。这是频道在创建后的初始状态。在此状态下，可以更新频道属性，但不允许进行流式传输。"
    },
    {
      "pos": [
        11931,
        11988
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在启动<ept id=\"p1\">**</ept>。频道正在启动。在此状态下，不允许进行更新或流式传输。如果发生错误，则频道会返回到“已停止”状态。"
    },
    {
      "pos": [
        11991,
        12010
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在运行<ept id=\"p1\">**</ept>。频道能够处理实时流。"
    },
    {
      "pos": [
        12013,
        12048
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在停止<ept id=\"p1\">**</ept>。频道正在停止。在此状态下，不允许进行更新或流式传输。"
    },
    {
      "pos": [
        12051,
        12086
      ],
      "content": "<bpt id=\"p1\">**</bpt>正在删除<ept id=\"p1\">**</ept>。频道正被删除。在此状态下，不允许进行更新或流式传输。"
    },
    {
      "content": "下表显示频道状态如何映射到计费模式。",
      "pos": [
        12088,
        12106
      ]
    },
    {
      "content": "频道状态",
      "pos": [
        12109,
        12113
      ]
    },
    {
      "content": "门户 UI 指示器",
      "pos": [
        12114,
        12123
      ]
    },
    {
      "content": "是否计费？",
      "pos": [
        12124,
        12129
      ]
    },
    {
      "content": "正在启动",
      "pos": [
        12142,
        12146
      ]
    },
    {
      "content": "正在启动",
      "pos": [
        12147,
        12151
      ]
    },
    {
      "content": "否（暂时状态）",
      "pos": [
        12152,
        12159
      ]
    },
    {
      "content": "正在运行",
      "pos": [
        12160,
        12164
      ]
    },
    {
      "content": "准备就绪（没有正在运行的节目）",
      "pos": [
        12165,
        12180
      ]
    },
    {
      "content": "或",
      "pos": [
        12185,
        12186
      ]
    },
    {
      "content": "流式处理（至少有一个正在运行的节目）",
      "pos": [
        12191,
        12209
      ]
    },
    {
      "content": "是",
      "pos": [
        12210,
        12211
      ]
    },
    {
      "content": "正在停止",
      "pos": [
        12212,
        12216
      ]
    },
    {
      "content": "正在停止",
      "pos": [
        12217,
        12221
      ]
    },
    {
      "content": "否（暂时状态）",
      "pos": [
        12222,
        12229
      ]
    },
    {
      "content": "已停止",
      "pos": [
        12230,
        12233
      ]
    },
    {
      "content": "已停止",
      "pos": [
        12234,
        12237
      ]
    },
    {
      "content": "否",
      "pos": [
        12238,
        12239
      ]
    },
    {
      "pos": [
        12243,
        12309
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> 目前，启动通道所需的平均时间为大约 2 分钟，最长可能需要 20 多分钟。通道重置最长可能需要 5 分钟。"
    },
    {
      "pos": [
        12314,
        12345
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Considerations\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>注意事项"
    },
    {
      "pos": [
        12349,
        12544
      ],
      "content": "当某个编码类型为<bpt id=\"p1\">**</bpt>“标准”<ept id=\"p1\">**</ept>的频道出现输入源/贡献源丢失的情况时，该频道会采取相应的补偿措施，将源视频/音频替换为表示错误的静态图像和静音。该频道会持续发出静态图像，直到输入/贡献源恢复。我们建议你不要让实时频道处于此类状态的时间超过 2 小时。如果超出该限制，该频道将无法保证输入重新连接时的行为，也无法保证其响应重置命令时的行为。这种情况下必须停止通道并将其删除，然后创建一个新的。"
    },
    {
      "content": "当频道或其关联的节目正在运行时，无法更改输入协议。如果你需要不同的协议，应当针对每个输入协议创建单独的频道。",
      "pos": [
        12547,
        12601
      ]
    },
    {
      "pos": [
        12605,
        12662
      ],
      "content": "每次重新配置实时编码器后，请对频道调用<bpt id=\"p1\">**</bpt>重置<ept id=\"p1\">**</ept>方法。在重置频道之前，必须停止节目。在重置频道后，重新启动节目。"
    },
    {
      "content": "只有当频道处于“正在运行”状态且频道中的所有节目都已停止时才能停止频道。",
      "pos": [
        12666,
        12702
      ]
    },
    {
      "pos": [
        12705,
        12825
      ],
      "content": "默认情况下，你只能向你的媒体服务帐户添加 5 个频道。这是所有新帐户的软配额。有关详细信息，请参阅<bpt id=\"p1\">[</bpt>配额和限制<ept id=\"p1\">](/documentation/articles/media-services-quotas-and-limitations)</ept>。"
    },
    {
      "content": "当频道或其关联的节目正在运行时，无法更改输入协议。如果你需要不同的协议，应当针对每个输入协议创建单独的频道。",
      "pos": [
        12828,
        12882
      ]
    },
    {
      "pos": [
        12885,
        13013
      ],
      "content": "仅当你的频道处于<bpt id=\"p1\">**</bpt>“正在运行”<ept id=\"p1\">**</ept>状态时才会向你收费。有关详细信息，请参阅<bpt id=\"p2\">[</bpt>此<ept id=\"p2\">](/documentation/articles/media-services-manage-live-encoder-enabled-channels#states)</ept>部分。"
    },
    {
      "content": "目前，实时事件的最大建议持续时间为 8 小时。如果你需要运行一个需要更长时间的频道，请通过 WindowsAzure.cn 联系 amslived。",
      "pos": [
        13016,
        13090
      ]
    },
    {
      "content": "确保你要从中以流形式传输内容的流式传输终结点上至少有一个流式传输保留单元。",
      "pos": [
        13093,
        13130
      ]
    },
    {
      "pos": [
        13133,
        13361
      ],
      "content": "在 Azure 中输入多个语言轨迹和执行实时编码时，多语言输入仅支持 RTP。使用 MPEG-2 TS over RTP 最多可以定义 8 个音频流。当前不支持使用 RTMP 或平滑流引入多个音频轨迹。使用<bpt id=\"p1\">[</bpt>本地实时编码器<ept id=\"p1\">](/documentation/articles/media-services-manage-channels-overview)</ept>执行实时编码时，将不存在这种限制，因为发送到 AMS 的任何数据都会通过某个通道，而不做进一步的处理。"
    },
    {
      "content": "编码预设使用“最大帧速率”30 fps 的思路。因此，如果输入为 60fps/59.97i，则输入帧将修剪/反交错为 30/29.97 fps。因此，如果输入为 50fps/50i，则输入帧将修剪/反交错为 25 fps。如果输入为 25 fps，则输出将保持为 25 fps。",
      "pos": [
        13364,
        13503
      ]
    },
    {
      "content": "完成后请不要忘记关闭你的通道。否则会继续计费。",
      "pos": [
        13506,
        13529
      ]
    },
    {
      "content": "已知问题",
      "pos": [
        13534,
        13538
      ]
    },
    {
      "content": "通道启动时间已改善为平均 2 分钟，但有时因为需求提高，可能仍然需要长达 20 分钟以上的时间。",
      "pos": [
        13542,
        13590
      ]
    },
    {
      "pos": [
        13593,
        13734
      ],
      "content": "RTP 支持迎合专业的广播装置。请查看<bpt id=\"p1\">[</bpt>此<ept id=\"p1\">](https://azure.microsoft.com/blog/2015/04/13/an-introduction-to-live-encoding-with-azure-media-services/)</ept>博客中有关 RTP 的说明。"
    },
    {
      "pos": [
        13737,
        13886
      ],
      "content": "静态图像应符合<bpt id=\"p1\">[</bpt>此处<ept id=\"p1\">](/documentation/articles/media-services-manage-live-encoder-enabled-channels#default_slate)</ept>所述的限制。如果你想要尝试创建默认静态图像大于 1920x1080 的频道，最终请求将会出错。"
    },
    {
      "content": "再次强调，完成流式处理后请不要忘记关闭你的通道。否则会继续计费。",
      "pos": [
        13889,
        13921
      ]
    },
    {
      "content": "如何创建频道以执行从单比特率到自适应比特率流的实时编码",
      "pos": [
        13926,
        13953
      ]
    },
    {
      "pos": [
        13956,
        14005
      ],
      "content": "选择<bpt id=\"p1\">**</bpt>“门户”<ept id=\"p1\">**</ept>、<bpt id=\"p2\">**</bpt>.NET<ept id=\"p2\">**</ept>、<bpt id=\"p3\">**</bpt>REST API<ept id=\"p3\">**</ept> 以了解如何创建和管理频道和节目。"
    },
    {
      "content": "[AZURE.SELECTOR]",
      "pos": [
        14009,
        14025
      ]
    },
    {
      "content": "门户",
      "pos": [
        14029,
        14031
      ]
    },
    {
      "content": ".NET SDK",
      "pos": [
        14121,
        14129
      ]
    },
    {
      "content": "REST API",
      "pos": [
        14219,
        14227
      ]
    },
    {
      "content": "相关主题",
      "pos": [
        14296,
        14300
      ]
    },
    {
      "content": "使用 Azure 媒体服务传递实时流式处理事件",
      "pos": [
        14303,
        14326
      ]
    },
    {
      "content": "媒体服务概念",
      "pos": [
        14394,
        14400
      ]
    },
    {
      "content": "Azure 媒体服务分片 MP4 实时引入规范",
      "pos": [
        14453,
        14476
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"使用能够使用 Azure 媒体服务执行实时编码的频道\" \n    description=\"本主题介绍如何设置频道，以从本地编码器接收单比特率实时流，然后使用媒体服务执行实时编码以将其转换为自适应比特率流。然后，该流可以使用以下自适应流式处理协议之一通过一个或多个流式处理终结点传递给客户端播放应用程序：HLS、平滑流、MPEG DASH、HDS。\" \n    services=\"media-services\" \n    documentationCenter=\"\" \n    authors=\"juliako,anilmur\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags\n    ms.service=\"media-services\"\n    ms.date=\"02/14/2016\" \n    wacn.date=\"03/21/2016\"/>\n\n#使用能够使用 Azure 媒体服务执行实时编码的频道\n\n##概述\n\n在 Azure 媒体服务中，**频道**表示用于处理实时流内容的管道。**频道**通过以下两种方式之一接收实时输入流：\n\n- 本地实时编码器将多比特率 **RTMP** 或 **平滑流**（分片 MP4）发送到频道。可以使用以下输出多比特率平滑流的实时编码器：Elemental、Envivio、Cisco。以下实时编码器输出 RTMP：Adobe Flash Live、Telestream Wirecast 和 Tricaster 转码器。引入流将通过**频道**，而不会进行任何进一步处理。收到请求时，媒体服务会将该流传递给客户。\n- 将单比特率流（采用以下格式之一：**RTP** (MPEG-TS)、**RTMP** 或**平滑流**（分片 MP4）发送到能够使用媒体服务执行实时编码的**频道**。然后，**频道**将对传入的单比特率流执行实时编码，使之转换为多比特率（自适应）视频流。收到请求时，媒体服务会将该流传递给客户。\n\n从媒体服务2.10 发行版开始，在创建频道时，可以指定你想要频道接收输入流的方式，以及是否想要频道对流执行实时编码。可以使用两个选项：\n\n- **无** - 如果你打算使用输出多比特率流的本地实时编码器，请指定此值。在这种情况下，传入流将传递到输出，而不会进行任何编码。这是 2.10 发行版以前的频道行为。有关使用此类型的频道的更详细信息，请参阅[使用从本地编码器接收多比特率实时流的频道](/documentation/articles/media-services-manage-channels-overview)。\n\n- 标准 - 如果你打算使用媒体服务将单比特率实时流编码为多比特率流，请选择此值。请注意，实时编码会影响计费，你应该记住，将实时编码通道保持为“正在运行”状态会产生费用。建议在实时流式处理事件完成之后立即停止正在运行的通道，以避免产生额外的小时费用。\n\n>[AZURE.NOTE]本主题讨论为执行实时编码（“标准”编码类型）启用的频道的属性。有关使用未为执行实时编码启用的频道的信息，请参阅[使用从本地编码器接收多比特率实时流的频道](/documentation/articles/media-services-manage-channels-overview)。\n>\n>请务必仔细阅读[注意事项](/documentation/articles/media-services-manage-live-encoder-enabled-channels#Considerations)部分。\n\n\n\n##计费影响\n\n一旦通过 API 将实时编码通道的状态转换为“正在运行”，就会开始计费。你也可以在 Azure 管理门户或 Azure 媒体服务资源管理器工具 (https://github.com/Azure/Azure-Media-Services-Explorer/releases/tag/v3.37.0.0) 中查看状态。\n\n下表显示了通道状态如何映射为 API 和 Azure 管理门户中的计费状态。请注意，API 与门户 UX 之间的状态略有不同。一旦通过 API 将通道置于“正在运行”状态，或者在 Azure 管理门户中将它设置为“就绪”或“正在流式处理”状态，就会开始计费。若要阻止通道进一步向你计费，你必须通过 API 或 Azure 管理门户停止通道。在使用完实时编码通道时，你需要亲自停止通道。不停止编码通道会导致持续计费。\n\n###<a id=\"states\"></a>通道状态及其如何映射到计费模式 \n\n频道的当前状态。可能的值包括：\n\n- **已停止**。这是通道在创建后的初始状态（除非在门户中选择了自动启动）。 此状态下不会发生计费。在此状态下，可以更新频道属性，但不允许进行流式传输。\n- **正在启动**。频道正在启动。此状态下不会发生计费。在此状态下，不允许进行更新或流式传输。如果发生错误，则频道会返回到“已停止”状态。\n- **正在运行**。频道能够处理实时流。现在会计收使用费。你必须停止通道以防止进一步计费。 \n- **正在停止**。频道正在停止。此暂时性状态下不会发生计费。在此状态下，不允许进行更新或流式传输。\n- **正在删除**。频道正被删除。此暂时性状态下不会发生计费。在此状态下，不允许进行更新或流式传输。\n\n下表显示频道状态如何映射到计费模式。\n \n频道状态|门户 UI 指示器|是否计费？\n---|---|---\n正在启动|正在启动|否（暂时状态）\n正在运行|准备就绪（没有正在运行的节目）<br/>或<br/>流式处理（至少有一个正在运行的节目）|是\n正在停止|正在停止|否（暂时状态）\n已停止|已停止|否\n\n###对未使用的通道自动关闭\n\n从 2016 年 1 月 25 日开始，媒体服务推出了一项更新，对于长时间以未使用状态运行的通道，它会自动停止该通道（已启用实时编码）。这适用于没有活动节目且长时间未收到输入贡献源的通道。\n\n未使用期限的阈值通常为 12 个小时，但随时会变化。\n\n##实时编码工作流\n下图表示了实时流式处理工作流，其中频道通过以下协议之一接收单比特率流：RTMP、平滑流式处理或 RTP (MPEG-TS)；然后，将该流编码为多比特率流。\n\n![实时工作流][live-overview]\n\n\n##本主题内容\n\n- 概述[常见的实时流方案](/documentation/articles/media-services-manage-live-encoder-enabled-channels#scenario)\n- [频道及其相关组件的说明](/documentation/articles/media-services-manage-live-encoder-enabled-channels#channel)\n- [注意事项](/documentation/articles/media-services-manage-live-encoder-enabled-channels#Considerations)\n\n\n##<a id=\"scenario\"></a>常见的实时流方案\n\n以下是在创建常见的实时流应用程序时涉及的常规步骤。\n\n>[AZURE.NOTE] 目前，实时事件的最大建议持续时间为 8 小时。如果你需要长时间运行某个通道，请通过 WindowsAzure.cn 联系 amslived。请注意，实时编码会影响计费，你应该记住，将实时编码通道保持为“正在运行”状态会产生费用。建议在实时流式处理事件完成之后立即停止正在运行的通道，以避免产生额外的小时费用。\n\n1. 将视频摄像机连接到计算机。启动并配置可以通过以下协议之一输出**单**比特率流的本地实时编码器：RTMP、平滑流式处理或 RTP (MPEG-TS)。有关详细信息，请参阅 [Azure 媒体服务 RTMP 支持和实时编码器](https://azure.microsoft.com/zh-cn/blog/azure-media-services-rtmp-support-and-live-encoders/)。\n    \n    此步骤也可以在创建频道后执行。\n\n1. 创建并启动频道。\n\n1. 检索频道引入 URL。\n\n    实时编码器使用引入 URL 将流发送到频道。\n1. 检索频道预览 URL。 \n\n    使用此 URL 来验证频道是否正常接收实时流。\n\n3. 创建节目。\n\n    使用 Azure 管理门户时，创建节目的同时还会创建资源。\n\n    使用 .NET SDK 或 REST 时，你需要创建一个资源并指定在创建节目时要使用该资源。 \n1. 发布与节目关联的资源。   \n\n    确保你要从中以流形式传输内容的流式传输终结点上至少有一个流式传输保留单元。\n1. 在准备好开始流式传输和存档时，启动节目。\n2. （可选）可以向实时编码器发信号，以启动广告。将广告插入到输出流中。\n1. 在要停止对事件进行流式传输和存档时，停止节目。\n1. 删除节目（并选择性地删除资产）。   \n\n>[AZURE.NOTE]千万不要忘记停止实时编码通道。请注意，实时编码会影响每小时计费，你应该记住，将实时编码通道保持为“正在运行”状态会产生费用。建议在实时流式处理事件完成之后立即停止正在运行的通道，以避免产生额外的小时费用。\n\n\n[实时流式处理任务](/documentation/articles/media-services-manage-channels-overview#tasks)部分将链接到演示如何完成上述任务的主题。\n\n\n##<a id=\"channel\"></a>频道输入（引入）配置\n\n###<a id=\"Ingest_Protocols\"></a>引入流式传输协议\n\n如果**“编码器类型”**设为**“标准”**，则有效选项为：\n\n- **RTP** (MPEG-TS)：RTP 上的 MPEG-2 传输流。  \n- 单比特率 **RTMP**\n- 单比特率**分片 MP4**（平滑流）\n\n有关详细信息，请参阅 [Azure 媒体服务 RTMP 支持和实时编码器](https://azure.microsoft.com/zh-cn/blog/azure-media-services-rtmp-support-and-live-encoders/)。\n\n####RTP (MPEG-TS) - RTP 上的 MPEG-2 传输流。  \n\n典型用例：\n\n专业广播者通常使用供应商提供的高端本地实时编码器（如 Elemental Technologies、Ericsson、Ateme、Imagine 或 Envivio）来发送流。通常与 IT 部门和专用网络配合使用。\n\n注意事项：\n\n- 强烈建议使用单节目传输流 (SPTS) 输入。 \n- 使用 MPEG-2 TS over RTP 最多可以输入 8 个音频流。 \n- 视频流应具有小于 15 Mbps 的平均比特率\n- 音频流的聚合平均比特率应小于 1 Mbps\n- 以下是支持的编解码器：\n    - MPEG-2/H.262 Video \n        \n        - Main Profile (4:2:0)\n        - High Profile (4:2:0, 4:2:2)\n        - 422 Profile (4:2:0, 4:2:2)\n\n    - MPEG-4 AVC/H.264 Video\n    \n        - Baseline、Main、High Profile（8 位 4:2:0）\n        - High 10 Profile（10 位 4:2:0）\n        - High 422 Profile（10 位 4:2:2）\n\n\n    - MPEG-2 AAC-LC Audio\n    \n        - Mono、Stereo、Surround (5.1, 7.1)\n        - MPEG-2 样式 ADTS 打包\n\n    - Dolby Digital (AC-3) Audio\n\n        - Mono、Stereo、Surround (5.1, 7.1)\n\n    - MPEG Audio（层 II 和层 III）\n            \n        - Mono、Stereo\n\n- 建议的广播编码器包括：\n    - Ateme AM2102\n    - Ericsson AVP2000\n    - eVertz 3480\n    - Ericsson RX8200\n    - Imagine Communications Selenio ENC 1\n    - Imagine Communications Selenio ENC 2\n    - AdTec EN-30\n    - AdTec EN-91P\n    - AdTec EN-100\n    - Harmonic ProStream 1000\n    - Thor H-2 4HD-EM\n    - eVertz 7880 SLKE\n    - Cisco Spinnaker\n    - Elemental Live\n\n####<a id=\"single_bitrate_RTMP\"></a>单比特率 RTMP\n\n注意事项：\n\n- 传入流不能包含多码率视频\n- 视频流应具有小于 15 Mbps 的平均比特率\n- 音频流应具有小于 1 Mbps 的平均比特率\n- 以下是支持的编解码器：\n\n    - MPEG-4 AVC/H.264 Video  \n    \n        - Baseline、Main、High Profile（8 位 4:2:0）\n        - High 10 Profile（10 位 4:2:0）\n        - High 422 Profile（10 位 4:2:2）\n\n    - MPEG-2 AAC-LC Audio\n\n        - Mono、Stereo、Surround (5.1, 7.1)\n        - 44\\.1 kHz 采样率\n        - MPEG-2 样式 ADTS 打包\n    \n- 建议的编码器包括：\n\n    - Telestream Wirecast\n    - Flash 媒体实时编码器\n    - Tricaster\n\n####单比特率分片 MP4（平滑流）\n\n典型用例：\n\n使用供应商提供的本地实时编码器（如 Elemental Technologies、Ericsson、Ateme、Envivio）通过开放的 Internet 将输入流发送到附近的 Azure 数据中心。\n\n注意事项：\n\n这同样适用于[单比特率 RTMP](/documentation/articles/media-services-manage-live-encoder-enabled-channels#single_bitrate_RTMP)。\n\n####其他注意事项\n\n- 当频道或其关联的节目正在运行时，无法更改输入协议。如果你需要不同的协议，应当针对每个输入协议创建单独的频道。 \n- 传入视频流的最大分辨率为 1920 x 1080，如果隔行扫描，速率最大为 60 个字段/秒，如果渐进式下载，则速度为 30 帧/秒。\n\n\n###摄取 URL（终结点） \n\n频道提供你在实时编码器中指定的输入终结点（引入 URL），因此编码器可以将流推送到你的频道。\n\n创建频道后，你可以获得引入 URL。若要获取这些 URL，频道不一定要处于**“正在运行”**状态。当准备好开始将数据推送到频道时，频道必须处于**“正在运行”**状态。在频道开始引入数据后，你可以通过预览 URL 来预览流。\n\n可以选择通过 SSL 连接引入分片 MP4（平滑流）实时流。若要通过 SSL 进行摄取，请确保将摄取 URL 更新为 HTTPS。\n\n###允许的 IP 地址\n\n你可以定义允许向此频道发布视频的 IP 地址。允许的 IP 地址可以指定为单个 IP 地址（例如 ‘10.0.0.1’）或指定为使用一个 IP 地址和 CIDR 子网掩码的 IP 范围（例如 ‘10.0.0.1/22’）或指定为使用一个 IP 地址和点分十进制子网掩码的 IP 范围（例如 ‘10.0.0.1(255.255.252.0)’）。\n\n如果未指定 IP 地址并且没有规则定义，则不会允许任何 IP 地址。若要允许任何 IP 地址，请创建一个规则并设置 0.0.0.0/0。\n\n\n##频道预览 \n\n###预览 URL\n\n频道还提供了一个预览终结点（预览 URL），你可以使用它在进一步处理和传递流之前预览流并对其进行验证。\n\n你可以在创建频道时获取预览 URL。若要获取该 URL，频道不一定要处于**“正在运行”**状态。\n\n在频道开始摄取数据后，你可以预览流。\n\n>[AZURE.NOTE]当前，不管指定了哪种输入类型，都只能以分片 MP4（平滑流）格式来传送预览流。你可以使用 [http://smf.cloudapp.net/healthmonitor](http://smf.cloudapp.net/healthmonitor) 播放器来测试平滑流。你还可以使用 Azure 管理门户中承载的播放器来查看你的流。\n\n###允许的 IP 地址\n\n你可以定义允许连接到预览终结点的 IP 地址。如果未指定 IP 地址，则将允许任何 IP 地址。允许的 IP 地址可以指定为单个 IP 地址（例如 ‘10.0.0.1’）或指定为使用一个 IP 地址和 CIDR 子网掩码的 IP 范围（例如 ‘10.0.0.1/22’）或指定为使用一个 IP 地址和点分十进制子网掩码的 IP 范围（例如 ‘10.0.0.1(255.255.252.0)’）。\n\n##实时编码设置\n\n本部分介绍当频道的**“编码类型”**设为**“标准”**时，如何调整频道内的实时编码器的设置。\n\n>[AZURE.NOTE]在 Azure 中输入多个语言轨迹和执行实时编码时，多语言输入仅支持 RTP。使用 MPEG-2 TS over RTP 最多可以定义 8 个音频流。当前不支持使用 RTMP 或平滑流引入多个音频轨迹。使用[本地实时编码器](/documentation/articles/media-services-manage-channels-overview)执行实时编码时，将不存在这种限制，因为发送到 AMS 的任何数据都会通过某个通道，而不做进一步的处理。\n\n###Ad 标记源\n\n你可以指定 Ad 标记信号源。默认值是 **Api**，它指示频道内的实时编码器应侦听异步 **Ad 标记 API**。\n\n另一个有效选项是 **Scte35**（仅当引入流协议设为 RTP (MPEG-TS) 时允许）。当指定了 Scte35 时，实时编码器将分析输入 RTP (MPEG-TS) 流中的 SCTE-35 信号。\n\n###CEA 708 关闭字幕\n\n一个可选的标志，它指示实时编码器忽略传入视频中嵌入的任何 CEA 708 字幕数据。当该标志设为 false（默认值）时，编码器将检测 CEA 708 数据并将该数据重新插入到输出视频流中。\n\n###视频流\n\n可选。描述输入视频流。如果未指定此字段，则使用默认值。仅当输入流协议设为 RTP (MPEG-TS) 时，才允许使用此设置。\n\n####索引\n\n一个从零开始的索引，它指定哪个输入视频流应由频道内的实时编码器处理。仅当引入流协议是 RTP (MPEG-TS) 时，此设置才适用。\n\n默认值为 0。建议在单节目传输流 (SPTS) 中发送。如果输入流包含多个节目，实时编码器将分析输入中的节目映射表 (PMT)，标识流类型名称为 MPEG-2 Video 或 H.264 的输入并以 PMT 中指定的顺序安排这些输入。然后，将使用从零开始的索引选取该安排中的第 n 个条目。\n\n###音频流\n\n可选。描述输入音频流。如果未指定此字段，则将应用指定的默认值。仅当输入流协议设为 RTP (MPEG-TS) 时，才允许使用此设置。\n\n####索引\n\n建议在单节目传输流 (SPTS) 中发送。如果输入流包含多个节目，频道中的实时编码器将分析输入中的节目映射表 (PMT)，标识流类型名称为 MPEG-2 AAC ADTS、AC-3 System-A、AC-3 System-B、MPEG-2 Private PES、MPEG-1 Audio 或 MPEG-2 Audio 的输入并以 PMT 中指定的顺序安排这些输入。然后，将使用从零开始的索引选取该安排中的第 n 个条目。\n\n####语言\n\n音频流的符合 ISO 639-2 的语言标识符，如 ENG。如果不存在，则默认为 UND（未定义）。\n\n如果频道的输入为 MPEG-2 TS over RTP，则最多可以指定 8 个音频流集。但是，不能有两个具有相同索引值的条目。\n\n###<a id=\"preset\"></a>系统预设\n\n指定此频道内的实时编码器要使用的预设。目前，唯一允许的值是 **Default720p**（默认值）。\n\n请注意，如果你需要自定义预设，应通过 WindowsAzure.cn 联系 amslived。\n\n**Default720p** 会将视频编码为以下 7 层。\n\n\n####输出视频流\n\n比特率|宽度|高度|MaxFPS|配置文件|输出流名称\n---|---|---|---|---|---\n3500|1280|720|30|高|Video\\_1280x720\\_3500kbps\n2200|960|540|30|主要|Video\\_960x540\\_2200kbps\n1350|704|396|30|主要|Video\\_704x396\\_1350kbps\n850|512|288|30|主要|Video\\_512x288\\_850kbps\n550|384|216|30|主要|Video\\_384x216\\_550kbps\n350|340|192|30|基线|Video\\_340x192\\_350kbps\n200|340|192|30|基线|Video\\_340x192\\_200kbps\n\n\n####输出音频流\n\n音频以 64 kbps 的速率编码为立体声 AAC-LC，采样率为 44.1 kHz。\n\n##指示广告\n\n当频道已启用实时编码时，你在管道中有一个组件正在处理视频，并可以操作它。你可以向频道发出信号，以将清单和/或广告插入到传出自适应比特率流中。清单是在某些情况下（例如，在商业广告期间）可用于覆盖输入实时源的静止图像。广告信号是嵌入到传出流中的时间同步信号，用于指示视频播放机执行特殊操作 - 例如，在适当时间切换到广告。有关用于此目的的 SCTE-35 信号机制的概述，请参阅此[博客](https://codesequoia.wordpress.com/2014/02/24/understanding-scte-35/)。下面是可以在实时事件中实现的典型方案。\n\n1. 在事件开始前，让观看者获得事件前图像。\n1. 在事件结束后，让观看者获得事件后图像。\n1. 如果在事件期间出现问题（例如，在体育场中出现电源故障，让观看者获得错误事件图像)。\n1. 在商业广告期间发送广告时间图像以隐藏实时事件源。\n\n以下是指示广告时可以设置的属性。\n\n###Duration\n\n商业广告的持续时间（以秒为单位）。这必须是非零正值，才能启动商业广告。当商业广告正在播放时，将持续时间设为 0，并且 CueId 与正在播放的商业广告匹配，则广告将被取消。\n\n###CueId\n\n商业广告的唯一 ID，下游应用程序将使用它来执行相应操作。必须是一个正整数。可以将此值设为任意随机正整数，或使用上游系统跟踪提示 ID。在通过 API 提交之前，请确保将任何 ID 规范化为正整数。\n\n###显示清单\n\n可选。指示实时编码器在商业广告期间切换到[默认静态](/documentation/articles/media-services-manage-live-encoder-enabled-channels#default_slate)图像并隐藏传入视频源。在清单期间音频也会静音。默认值为 **false**。\n \n所用图像将是在创建频道时通过默认清单资源 ID 属性指定的图像。静态图像将进行拉伸以适合显示图像大小。\n\n\n##插入清单图像\n\n可以向频道中的实时编码器发出信号，以切换到清单图像。它还可以指示实时编码器结束正在显示的清单。\n\n在某些情况下（例如，在广告期间）可以配置实时编码器以切换到静态图像，并隐藏传入的视频信号。如果未配置此类清单，则在该广告期间将不会屏蔽输入视频。\n\n###Duration\n\n清单的持续时间（以秒为单位）。这必须是非零正值，才能启动清单。如果正在显示清单，并且指定的持续时间为零，则将终止正在显示的清单。\n\n###在 Ad 标记上插入清单\n\n当设为 true 时，此设置会将实时编码器配置为在广告期间插入清单图像。默认值为 true。\n\n###<a id=\"default_slate\"></a>默认静态图像资产 ID\n\n可选。指定媒体服务资源（包含清单图像）的资源 ID。默认值为 null。\n\n**注意**：在创建频道之前，具有以下约束的静态图像应当作为专用资产上载（该资产中不应有其他文件）。\n\n- 分辨率最大为 1920x1080。\n- 大小最大为 3 MB。\n- 文件名必须具有 *.jpg 扩展名。\n- 必须将该图像作为资产中的唯一 AssetFile 上载到资产，此 AssetFile 应标记为主文件。资产不能加密存储。\n\n如果未指定**默认清单资源 ID**，并且**“在 ad 标记上插入清单”**设为 **true**，则将使用默认 Azure 媒体服务图像隐藏输入视频流。在清单期间音频也会静音。\n\n\n##频道的节目\n\n频道与节目相关联，使用节目，你可以控制实时流中的段的发布和存储。通道管理节目。通道和节目的关系非常类似于传统媒体，通道具有恒定的内容流，而节目的范围限定为该通道上的一些定时事件。\n\n可以通过设置**存档窗口**长度，指定你希望保留节目录制内容的小时数。此值的设置范围是最短 5 分钟，最长 25 小时。存储时间窗口长度还决定了客户端能够从当前实时位置按时间向后搜索的最长时间。超出指定时间长度后，节目也能够运行，但落在时间窗口长度后面的内容将全部被丢弃。此属性的这个值还决定了客户端清单能够增加多长时间。\n\n每个节目都与存储流式处理内容的资源相关联。资产将映射到 Azure Storage 帐户中的 BLOB 容器，资产中的文件则作为该容器中的 BLOB 存储。若要发布节目，以便客户可以查看该流，必须为关联的资源创建按需定位符。创建此定位符后，你可以生成提供给客户端的流 URL。\n\n一个频道最多支持三个同时运行的节目，因此你可以为同一传入流创建多个存档。这样，你便可以根据需要发布和存档事件的不同部分。例如，你的业务要求是存档 6 小时的节目，但只广播过去 10 分钟的内容。为了实现此目的，你需要创建两个同时运行的节目。一个节目设置为存档 6 小时的事件但不发布该节目。另一个节目设置为存档 10 分钟的事件，并且要发布该节目。\n\n不应当将现有节目重用于新事件。而是应当为每个事件创建并启动一个新节目，如“对实时流式传输应用程序进行编程”部分中所述。\n\n在准备好开始流式传输和存档时，启动节目。在要停止对事件进行流式传输和存档时，停止节目。\n\n若要删除存档的内容，请停止并删除节目，然后删除关联的资产。如果资产被某个节目使用，则无法将其删除，必须先删除该节目。\n\n即使你停止并删除了节目，只要你没有删除资产，用户也将能够按需将你的已存档内容作为视频进行流式传输。\n\n如果希望保留已存档的内容但不希望其可供流式传输，请删除流式传输定位符。\n\n\n##获取实时源的缩略图预览\n\n启用实时编码后，你现在可以在实时源到达频道时获得实时源的预览。这可以是一个很有用的工具，用于检查实时源是否实际到达频道。\n\n##<a id=\"states\"></a>频道状态，以及状态如何映射到计费模式 \n\n频道的当前状态。可能的值包括：\n\n- **已停止**。这是频道在创建后的初始状态。在此状态下，可以更新频道属性，但不允许进行流式传输。\n- **正在启动**。频道正在启动。在此状态下，不允许进行更新或流式传输。如果发生错误，则频道会返回到“已停止”状态。\n- **正在运行**。频道能够处理实时流。\n- **正在停止**。频道正在停止。在此状态下，不允许进行更新或流式传输。\n- **正在删除**。频道正被删除。在此状态下，不允许进行更新或流式传输。\n\n下表显示频道状态如何映射到计费模式。\n \n频道状态|门户 UI 指示器|是否计费？\n---|---|---\n正在启动|正在启动|否（暂时状态）\n正在运行|准备就绪（没有正在运行的节目）<br/>或<br/>流式处理（至少有一个正在运行的节目）|是\n正在停止|正在停止|否（暂时状态）\n已停止|已停止|否\n\n\n>[AZURE.NOTE] 目前，启动通道所需的平均时间为大约 2 分钟，最长可能需要 20 多分钟。通道重置最长可能需要 5 分钟。\n\n\n##<a id=\"Considerations\"></a>注意事项\n\n- 当某个编码类型为**“标准”**的频道出现输入源/贡献源丢失的情况时，该频道会采取相应的补偿措施，将源视频/音频替换为表示错误的静态图像和静音。该频道会持续发出静态图像，直到输入/贡献源恢复。我们建议你不要让实时频道处于此类状态的时间超过 2 小时。如果超出该限制，该频道将无法保证输入重新连接时的行为，也无法保证其响应重置命令时的行为。这种情况下必须停止通道并将其删除，然后创建一个新的。\n- 当频道或其关联的节目正在运行时，无法更改输入协议。如果你需要不同的协议，应当针对每个输入协议创建单独的频道。 \n- 每次重新配置实时编码器后，请对频道调用**重置**方法。在重置频道之前，必须停止节目。在重置频道后，重新启动节目。 \n- 只有当频道处于“正在运行”状态且频道中的所有节目都已停止时才能停止频道。\n- 默认情况下，你只能向你的媒体服务帐户添加 5 个频道。这是所有新帐户的软配额。有关详细信息，请参阅[配额和限制](/documentation/articles/media-services-quotas-and-limitations)。\n- 当频道或其关联的节目正在运行时，无法更改输入协议。如果你需要不同的协议，应当针对每个输入协议创建单独的频道。\n- 仅当你的频道处于**“正在运行”**状态时才会向你收费。有关详细信息，请参阅[此](/documentation/articles/media-services-manage-live-encoder-enabled-channels#states)部分。\n- 目前，实时事件的最大建议持续时间为 8 小时。如果你需要运行一个需要更长时间的频道，请通过 WindowsAzure.cn 联系 amslived。\n- 确保你要从中以流形式传输内容的流式传输终结点上至少有一个流式传输保留单元。\n- 在 Azure 中输入多个语言轨迹和执行实时编码时，多语言输入仅支持 RTP。使用 MPEG-2 TS over RTP 最多可以定义 8 个音频流。当前不支持使用 RTMP 或平滑流引入多个音频轨迹。使用[本地实时编码器](/documentation/articles/media-services-manage-channels-overview)执行实时编码时，将不存在这种限制，因为发送到 AMS 的任何数据都会通过某个通道，而不做进一步的处理。\n- 编码预设使用“最大帧速率”30 fps 的思路。因此，如果输入为 60fps/59.97i，则输入帧将修剪/反交错为 30/29.97 fps。因此，如果输入为 50fps/50i，则输入帧将修剪/反交错为 25 fps。如果输入为 25 fps，则输出将保持为 25 fps。\n- 完成后请不要忘记关闭你的通道。否则会继续计费。 \n\n##已知问题\n\n- 通道启动时间已改善为平均 2 分钟，但有时因为需求提高，可能仍然需要长达 20 分钟以上的时间。\n- RTP 支持迎合专业的广播装置。请查看[此](https://azure.microsoft.com/blog/2015/04/13/an-introduction-to-live-encoding-with-azure-media-services/)博客中有关 RTP 的说明。\n- 静态图像应符合[此处](/documentation/articles/media-services-manage-live-encoder-enabled-channels#default_slate)所述的限制。如果你想要尝试创建默认静态图像大于 1920x1080 的频道，最终请求将会出错。\n- 再次强调，完成流式处理后请不要忘记关闭你的通道。否则会继续计费。\n\n###如何创建频道以执行从单比特率到自适应比特率流的实时编码 \n\n选择**“门户”**、**.NET**、**REST API** 以了解如何创建和管理频道和节目。\n\n> [AZURE.SELECTOR]\n- [门户](/documentation/articles/media-services-portal-creating-live-encoder-enabled-channel)\n- [.NET SDK](/documentation/articles/media-services-dotnet-creating-live-encoder-enabled-channel)\n- [REST API](https://msdn.microsoft.com/zh-cn/library/azure/dn783458.aspx)\n\n\n\n##相关主题\n\n[使用 Azure 媒体服务传递实时流式处理事件](/documentation/articles/media-services-live-streaming-workflow)\n\n[媒体服务概念](/documentation/articles/media-services-concepts)\n\n[Azure 媒体服务分片 MP4 实时引入规范](/documentation/articles/media-services-fmp4-live-ingest-overview)\n\n[live-overview]: ./media/media-services-manage-live-encoder-enabled-channels/media-services-live-streaming-new.png\n \n\n<!---HONumber=Mooncake_0314_2016-->"
}