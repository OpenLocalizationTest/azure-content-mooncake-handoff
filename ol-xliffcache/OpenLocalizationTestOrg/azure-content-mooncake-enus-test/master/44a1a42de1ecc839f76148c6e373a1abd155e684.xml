{
  "nodes": [
    {
      "content": "如何管理云服务 | Azure",
      "pos": [
        28,
        43
      ]
    },
    {
      "content": "了解如何在 Azure 门户中管理云服务。",
      "pos": [
        63,
        84
      ]
    },
    {
      "content": "如何管理云服务",
      "pos": [
        306,
        313
      ]
    },
    {
      "content": "[AZURE.SELECTOR]",
      "pos": [
        317,
        333
      ]
    },
    {
      "content": "Azure Portal",
      "pos": [
        337,
        349
      ]
    },
    {
      "content": "在 Azure 门户的“云服务”区域中，可以更新服务角色或部署、将预留部署升级到生产环境、将资源链接到云服务，以便可以查看资源依赖关系并对资源进行整体缩放，以及删除云服务或部署。",
      "pos": [
        406,
        495
      ]
    },
    {
      "content": "如何：更新云服务角色或部署",
      "pos": [
        501,
        514
      ]
    },
    {
      "content": "如果你需要更新云服务的应用程序代码，请使用仪表板、“云服务”页或“实例”页上的“更新”。你可以更新一个角色或所有角色。你将需要上载新的服务包和服务配置文件。",
      "pos": [
        516,
        594
      ]
    },
    {
      "pos": [
        599,
        673
      ],
      "content": "在 <bpt id=\"p1\">[</bpt>Azure 管理门户<ept id=\"p1\">](https://manage.windowsazure.cn/)</ept>中的仪表板的“云服务”页或“实例”页上，单击“更新”。"
    },
    {
      "content": "更新部署",
      "pos": [
        681,
        685
      ]
    },
    {
      "content": "在“部署标签”中，输入一个用于标识部署的名称（例如，mycloudservice4）。你将在仪表板的“快速启动”下找到部署标签。",
      "pos": [
        764,
        828
      ]
    },
    {
      "content": "在“包”中，使用“浏览”上载服务包文件 (.cspkg)。",
      "pos": [
        833,
        862
      ]
    },
    {
      "content": "在“配置”中，使用“浏览”上载服务配置文件 (.cscfg)。",
      "pos": [
        867,
        898
      ]
    },
    {
      "content": "在“角色”中，如果要升级云服务中的所有角色，请选择“全部”。若要执行单一角色更新，请选择要更新的角色。即使你选择更新特定角色，服务配置文件中的更新也将应用于所有角色。",
      "pos": [
        903,
        986
      ]
    },
    {
      "content": "如果更新更改了角色数量或任何角色的大小，则选中“如果角色大小或数量发生改变，则允许更新”复选框以继续进行更新。",
      "pos": [
        991,
        1046
      ]
    },
    {
      "content": "请注意，如果你更改角色大小（即，托管角色实例的虚拟机大小）或角色数量，则必须重建每个角色实例（虚拟机）的映像，并且将会丢失所有本地数据。",
      "pos": [
        1052,
        1120
      ]
    },
    {
      "content": "如果任何服务角色只有一个角色实例，则选中“即使一个或多个角色包含单个实例也进行更新”复选框以继续进行升级。",
      "pos": [
        1125,
        1178
      ]
    },
    {
      "content": "如果每个角色至少具有两个角色实例（虚拟机），那么 Azure 在云服务更新期间只能保证 99.95% 的服务可用性。这使得一台虚拟机可以在另一台虚拟机正更新时处理客户端请求。",
      "pos": [
        1184,
        1271
      ]
    },
    {
      "content": "单击“确定”（复选标记）以开始更新服务。",
      "pos": [
        1276,
        1296
      ]
    },
    {
      "content": "如何：交换部署以将暂留部署升级到生产环境",
      "pos": [
        1303,
        1323
      ]
    },
    {
      "content": "使用“交换”可将云服务的预留部署升级到生产环境。当你决定部署云服务的新版本时，你可以在云服务过渡环境中暂存和测试新版本，同时让你的客户在生产环境中继续使用当前版本。当你准备好将新版本升级到生产环境时，可以使用“交换”来切换这两个部署 URL。",
      "pos": [
        1325,
        1446
      ]
    },
    {
      "content": "可以通过“云服务”页或仪表板来交换部署。",
      "pos": [
        1448,
        1468
      ]
    },
    {
      "pos": [
        1473,
        1522
      ],
      "content": "在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](https://manage.windowsazure.cn/)</ept>中单击“云服务”。"
    },
    {
      "content": "在云服务列表中，单击相应云服务以将其选中。",
      "pos": [
        1527,
        1548
      ]
    },
    {
      "content": "单击“交换”。",
      "pos": [
        1553,
        1560
      ]
    },
    {
      "content": "将打开以下确认提示。",
      "pos": [
        1566,
        1576
      ]
    },
    {
      "content": "云服务交换",
      "pos": [
        1584,
        1589
      ]
    },
    {
      "content": "在验证部署信息后，单击“是”交换部署。",
      "pos": [
        1656,
        1675
      ]
    },
    {
      "content": "交换部署的速度很快，因为唯一发生更改的是部署所用的虚拟 IP 地址 (VIP)。",
      "pos": [
        1681,
        1721
      ]
    },
    {
      "content": "为节省计算成本，当你确定新的生产部署将按预期执行时，可以删除过渡环境中的部署。",
      "pos": [
        1727,
        1766
      ]
    },
    {
      "content": "如何：将资源链接到云服务",
      "pos": [
        1771,
        1783
      ]
    },
    {
      "content": "若要揭示云服务对其他资源的依赖性，你可以将 Azure SQL 数据库实例或存储帐户链接到云服务。可以在“链接的资源”页上链接和取消链接资源，然后在云服务仪表板上监视其使用情况。如果链接的存储帐户启用了监视，你可以在云服务仪表板上监视“请求总数”。",
      "pos": [
        1785,
        1909
      ]
    },
    {
      "pos": [
        1911,
        2077
      ],
      "content": "使用“链接”可将新的或现有的 SQL 数据库实例或存储帐户链接到云服务。然后，你可以在“缩放”页上缩放数据库以及正使用它的云服务角色。（存储帐户可在使用率增加时自动缩放。） 有关详细信息，请参阅<bpt id=\"p1\">[</bpt>如何缩放云服务和链接的资源<ept id=\"p1\">](/documentation/articles/cloud-services-how-to-scale)</ept>。"
    },
    {
      "content": "你还可以在管理门户的“数据库”节点中监视、管理和缩放数据库。",
      "pos": [
        2079,
        2109
      ]
    },
    {
      "content": "从这个意义上说，“链接”某资源并不是将你的应用程序连接到该资源。如果你使用“链接”创建新数据库，则需要将连接字符串添加到你的应用程序代码中，然后升级云服务。如果你的应用程序使用链接的存储帐户中的资源，你还需要添加连接字符串。",
      "pos": [
        2111,
        2223
      ]
    },
    {
      "content": "以下过程描述了如何将部署在新 SQL 数据库服务器上的新 SQL 数据库实例链接到云服务。",
      "pos": [
        2225,
        2270
      ]
    },
    {
      "content": "将 SQL 数据库实例链接到云服务",
      "pos": [
        2276,
        2293
      ]
    },
    {
      "pos": [
        2298,
        2363
      ],
      "content": "在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](http://manage.windowsazure.cn/)</ept>中单击“云服务”。然后单击云服务的名称以打开仪表板。"
    },
    {
      "content": "单击“链接的资源”。",
      "pos": [
        2368,
        2378
      ]
    },
    {
      "content": "“链接的资源”页随即打开。",
      "pos": [
        2384,
        2397
      ]
    },
    {
      "content": "链接的资源页",
      "pos": [
        2405,
        2411
      ]
    },
    {
      "content": "单击“链接资源”或“链接”。",
      "pos": [
        2493,
        2507
      ]
    },
    {
      "content": "“链接资源”向导随即启动。",
      "pos": [
        2513,
        2526
      ]
    },
    {
      "content": "链接页 1",
      "pos": [
        2534,
        2539
      ]
    },
    {
      "content": "单击“创建新资源”或“链接现有资源”。",
      "pos": [
        2627,
        2646
      ]
    },
    {
      "pos": [
        2651,
        2739
      ],
      "content": "选择要链接的资源类型。在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](http://manage.windowsazure.cn/)</ept>中，单击“SQL 数据库”。（预览版管理门户不支持将存储帐户链接到云服务。）"
    },
    {
      "content": "若要完成数据库配置，请按照管理门户的“SQL 数据库”区域的帮助中的说明操作。",
      "pos": [
        2744,
        2783
      ]
    },
    {
      "content": "可以在消息区域中跟踪链接操作的进度。",
      "pos": [
        2789,
        2807
      ]
    },
    {
      "content": "链接进度",
      "pos": [
        2815,
        2819
      ]
    },
    {
      "pos": [
        2911,
        3030
      ],
      "content": "链接完成时，你可以在云服务仪表板上监视链接的资源的状态。有关缩放链接的 SQL 数据库的信息，请参阅<bpt id=\"p1\">[</bpt>如何缩放云服务和链接的资源<ept id=\"p1\">](/documentation/articles/cloud-services-how-to-scale)</ept>。"
    },
    {
      "content": "取消链接链接的资源",
      "pos": [
        3036,
        3045
      ]
    },
    {
      "pos": [
        3050,
        3115
      ],
      "content": "在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](http://manage.windowsazure.cn/)</ept>中单击“云服务”。然后单击云服务的名称以打开仪表板。"
    },
    {
      "content": "单击“链接的资源”，然后选择相应资源。",
      "pos": [
        3120,
        3139
      ]
    },
    {
      "content": "单击“取消链接”。然后在出现确认提示时，单击“是”。",
      "pos": [
        3144,
        3170
      ]
    },
    {
      "content": "取消链接 SQL 数据库对该数据库或应用程序与该数据库的连接没有任何影响。你仍可以在管理门户的“SQL 数据库”区域管理该数据库。",
      "pos": [
        3176,
        3241
      ]
    },
    {
      "content": "如何：删除部署和云服务",
      "pos": [
        3248,
        3259
      ]
    },
    {
      "content": "必须先删除每个现有部署，然后才能删除云服务。",
      "pos": [
        3261,
        3283
      ]
    },
    {
      "content": "为节省计算成本，你可以在验证生产部署能够按预期运行后删除过渡部署。即使云服务未运行，也会向你收取角色实例的计算费用。",
      "pos": [
        3285,
        3343
      ]
    },
    {
      "content": "可使用以下过程删除部署或云服务。",
      "pos": [
        3345,
        3361
      ]
    },
    {
      "pos": [
        3367,
        3415
      ],
      "content": "在<bpt id=\"p1\">[</bpt>管理门户<ept id=\"p1\">](http://manage.windowsazure.cn/)</ept>中单击“云服务”。"
    },
    {
      "content": "选择云服务，然后单击“删除”（若要选择云服务而不打开仪表板，请单击除云服务条目中名称之外的任何位置。）。",
      "pos": [
        3420,
        3472
      ]
    },
    {
      "content": "如果你的部署位于过渡或生产环境中，你会在窗口底部看到如下选择菜单。必须先删除所有现有部署，然后才能删除云服务。",
      "pos": [
        3478,
        3533
      ]
    },
    {
      "content": "“删除”菜单",
      "pos": [
        3541,
        3547
      ]
    },
    {
      "content": "若要删除部署，请单击“删除生产部署”或“删除过渡部署”。然后在出现确认提示时单击“是”。",
      "pos": [
        3621,
        3665
      ]
    },
    {
      "content": "如果要删除云服务，请在需要时重复步骤 3 以删除其他部署。",
      "pos": [
        3670,
        3699
      ]
    },
    {
      "content": "要删除云服务，则单击“删除云服务”。然后在出现确认提示时单击“是”。",
      "pos": [
        3704,
        3738
      ]
    },
    {
      "pos": [
        3742,
        3934
      ],
      "content": "[AZURE.NOTE]\n如果为云服务配置了详细监视，那么在删除云服务时，Azure 不会从你的存储帐户中删除监视数据。你将需要手动删除这些数据。有关在何处查找度量值表的信息，请参阅<a href=\"/documentation/articles/cloud-services-how-to-monitor\">如何：监视云服务</a>中的“如何：在管理门户外部访问详细监视数据”。",
      "leadings": [
        "",
        "> "
      ],
      "nodes": [
        {
          "content": "如果为云服务配置了详细监视，那么在删除云服务时，Azure 不会从你的存储帐户中删除监视数据。你将需要手动删除这些数据。有关在何处查找度量值表的信息，请参阅<ph id=\"ph1\">&lt;a href=\"/documentation/articles/cloud-services-how-to-monitor\"&gt;</ph>如何：监视云服务<ph id=\"ph2\">&lt;/a&gt;</ph>中的“如何：在管理门户外部访问详细监视数据”。",
          "pos": [
            13,
            190
          ]
        }
      ]
    },
    {
      "content": "后续步骤",
      "pos": [
        3940,
        3944
      ]
    },
    {
      "content": "云服务的常规配置",
      "pos": [
        3950,
        3958
      ]
    },
    {
      "pos": [
        4019,
        4091
      ],
      "content": "了解如何<bpt id=\"p1\">[</bpt>部署云服务<ept id=\"p1\">](/documentation/articles/cloud-services-how-to-create-deploy)</ept>"
    },
    {
      "pos": [
        4094,
        4162
      ],
      "content": "配置<bpt id=\"p1\">[</bpt>自定义域名<ept id=\"p1\">](/documentation/articles/cloud-services-custom-domain-name)</ept>"
    },
    {
      "pos": [
        4165,
        4242
      ],
      "content": "配置 <bpt id=\"p1\">[</bpt>ssl 证书<ept id=\"p1\">](/documentation/articles/cloud-services-configure-ssl-certificate)</ept>"
    }
  ],
  "content": "<properties \n    pageTitle=\"如何管理云服务 | Azure\" \n    description=\"了解如何在 Azure 门户中管理云服务。\" \n    services=\"cloud-services\" \n    documentationCenter=\"\" \n    authors=\"Thraka\" \n    manager=\"timlt\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"cloud-services\" \n    ms.date=\"09/22/2015\"\n    wacn.date=\"11/12/2015\"/>\n\n\n\n\n\n#如何管理云服务\n\n> [AZURE.SELECTOR]\n- [Azure Portal](/documentation/articles/cloud-services-how-to-manage)\n\n在 Azure 门户的“云服务”区域中，可以更新服务角色或部署、将预留部署升级到生产环境、将资源链接到云服务，以便可以查看资源依赖关系并对资源进行整体缩放，以及删除云服务或部署。\n\n\n## 如何：更新云服务角色或部署\n\n如果你需要更新云服务的应用程序代码，请使用仪表板、“云服务”页或“实例”页上的“更新”。你可以更新一个角色或所有角色。你将需要上载新的服务包和服务配置文件。\n\n1. 在 [Azure 管理门户](https://manage.windowsazure.cn/)中的仪表板的“云服务”页或“实例”页上，单击“更新”。\n\n    ![更新部署](./media/cloud-services-how-to-manage/CloudServices_UpdateDeployment.png)\n\n2. 在“部署标签”中，输入一个用于标识部署的名称（例如，mycloudservice4）。你将在仪表板的“快速启动”下找到部署标签。\n\n3. 在“包”中，使用“浏览”上载服务包文件 (.cspkg)。\n\n4. 在“配置”中，使用“浏览”上载服务配置文件 (.cscfg)。\n\n5. 在“角色”中，如果要升级云服务中的所有角色，请选择“全部”。若要执行单一角色更新，请选择要更新的角色。即使你选择更新特定角色，服务配置文件中的更新也将应用于所有角色。\n\n6. 如果更新更改了角色数量或任何角色的大小，则选中“如果角色大小或数量发生改变，则允许更新”复选框以继续进行更新。\n\n    请注意，如果你更改角色大小（即，托管角色实例的虚拟机大小）或角色数量，则必须重建每个角色实例（虚拟机）的映像，并且将会丢失所有本地数据。\n\n7. 如果任何服务角色只有一个角色实例，则选中“即使一个或多个角色包含单个实例也进行更新”复选框以继续进行升级。\n\n    如果每个角色至少具有两个角色实例（虚拟机），那么 Azure 在云服务更新期间只能保证 99.95% 的服务可用性。这使得一台虚拟机可以在另一台虚拟机正更新时处理客户端请求。\n\n8. 单击“确定”（复选标记）以开始更新服务。\n\n\n\n## 如何：交换部署以将暂留部署升级到生产环境\n\n使用“交换”可将云服务的预留部署升级到生产环境。当你决定部署云服务的新版本时，你可以在云服务过渡环境中暂存和测试新版本，同时让你的客户在生产环境中继续使用当前版本。当你准备好将新版本升级到生产环境时，可以使用“交换”来切换这两个部署 URL。\n\n可以通过“云服务”页或仪表板来交换部署。\n\n1. 在[管理门户](https://manage.windowsazure.cn/)中单击“云服务”。\n\n2. 在云服务列表中，单击相应云服务以将其选中。\n\n3. 单击“交换”。\n\n    将打开以下确认提示。\n\n    ![云服务交换](./media/cloud-services-how-to-manage/CloudServices_Swap.png)\n\n4. 在验证部署信息后，单击“是”交换部署。\n\n    交换部署的速度很快，因为唯一发生更改的是部署所用的虚拟 IP 地址 (VIP)。\n\n    为节省计算成本，当你确定新的生产部署将按预期执行时，可以删除过渡环境中的部署。\n\n## 如何：将资源链接到云服务\n\n若要揭示云服务对其他资源的依赖性，你可以将 Azure SQL 数据库实例或存储帐户链接到云服务。可以在“链接的资源”页上链接和取消链接资源，然后在云服务仪表板上监视其使用情况。如果链接的存储帐户启用了监视，你可以在云服务仪表板上监视“请求总数”。\n\n使用“链接”可将新的或现有的 SQL 数据库实例或存储帐户链接到云服务。然后，你可以在“缩放”页上缩放数据库以及正使用它的云服务角色。（存储帐户可在使用率增加时自动缩放。） 有关详细信息，请参阅[如何缩放云服务和链接的资源](/documentation/articles/cloud-services-how-to-scale)。\n\n你还可以在管理门户的“数据库”节点中监视、管理和缩放数据库。\n\n从这个意义上说，“链接”某资源并不是将你的应用程序连接到该资源。如果你使用“链接”创建新数据库，则需要将连接字符串添加到你的应用程序代码中，然后升级云服务。如果你的应用程序使用链接的存储帐户中的资源，你还需要添加连接字符串。\n\n以下过程描述了如何将部署在新 SQL 数据库服务器上的新 SQL 数据库实例链接到云服务。\n\n### 将 SQL 数据库实例链接到云服务\n\n1. 在[管理门户](http://manage.windowsazure.cn/)中单击“云服务”。然后单击云服务的名称以打开仪表板。\n\n2. 单击“链接的资源”。\n\n    “链接的资源”页随即打开。\n\n    ![链接的资源页](./media/cloud-services-how-to-manage/CloudServices_LinkedResourcesPage.png)\n\n3. 单击“链接资源”或“链接”。\n\n    “链接资源”向导随即启动。\n\n    ![链接页 1](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkPage1.png)\n\n4. 单击“创建新资源”或“链接现有资源”。\n\n5. 选择要链接的资源类型。在[管理门户](http://manage.windowsazure.cn/)中，单击“SQL 数据库”。（预览版管理门户不支持将存储帐户链接到云服务。）\n\n6. 若要完成数据库配置，请按照管理门户的“SQL 数据库”区域的帮助中的说明操作。\n\n    可以在消息区域中跟踪链接操作的进度。\n\n    ![链接进度](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkProgress.png)\n\n    链接完成时，你可以在云服务仪表板上监视链接的资源的状态。有关缩放链接的 SQL 数据库的信息，请参阅[如何缩放云服务和链接的资源](/documentation/articles/cloud-services-how-to-scale)。\n\n### 取消链接链接的资源\n\n1. 在[管理门户](http://manage.windowsazure.cn/)中单击“云服务”。然后单击云服务的名称以打开仪表板。\n\n2. 单击“链接的资源”，然后选择相应资源。\n\n3. 单击“取消链接”。然后在出现确认提示时，单击“是”。\n\n    取消链接 SQL 数据库对该数据库或应用程序与该数据库的连接没有任何影响。你仍可以在管理门户的“SQL 数据库”区域管理该数据库。\n\n\n\n## 如何：删除部署和云服务\n\n必须先删除每个现有部署，然后才能删除云服务。\n\n为节省计算成本，你可以在验证生产部署能够按预期运行后删除过渡部署。即使云服务未运行，也会向你收取角色实例的计算费用。\n\n可使用以下过程删除部署或云服务。 \n\n1. 在[管理门户](http://manage.windowsazure.cn/)中单击“云服务”。\n\n2. 选择云服务，然后单击“删除”（若要选择云服务而不打开仪表板，请单击除云服务条目中名称之外的任何位置。）。\n\n    如果你的部署位于过渡或生产环境中，你会在窗口底部看到如下选择菜单。必须先删除所有现有部署，然后才能删除云服务。\n\n    ![“删除”菜单](./media/cloud-services-how-to-manage/CloudServices_DeleteMenu.png)\n\n\n3. 若要删除部署，请单击“删除生产部署”或“删除过渡部署”。然后在出现确认提示时单击“是”。\n\n4. 如果要删除云服务，请在需要时重复步骤 3 以删除其他部署。\n\n5. 要删除云服务，则单击“删除云服务”。然后在出现确认提示时单击“是”。\n\n> [AZURE.NOTE]\n> 如果为云服务配置了详细监视，那么在删除云服务时，Azure 不会从你的存储帐户中删除监视数据。你将需要手动删除这些数据。有关在何处查找度量值表的信息，请参阅<a href=\"/documentation/articles/cloud-services-how-to-monitor\">如何：监视云服务</a>中的“如何：在管理门户外部访问详细监视数据”。\n\n\n## 后续步骤\n\n * [云服务的常规配置](/documentation/articles/cloud-services-how-to-configure)\n* 了解如何[部署云服务](/documentation/articles/cloud-services-how-to-create-deploy)\n* 配置[自定义域名](/documentation/articles/cloud-services-custom-domain-name)\n* 配置 [ssl 证书](/documentation/articles/cloud-services-configure-ssl-certificate)\n\n<!---HONumber=79-->"
}